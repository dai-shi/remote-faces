import{m as we,r as D,s as Ne,j as bt,a as Ct}from"./index.f1a9920c.js";import{g as xe}from"./SingleRoom.3ce540a8.js";var E={exports:{}};(function(_,b){(function(s,w){w(b)})(we,function(s){(function(r){r[r.BLACK=1]="BLACK",r[r.B=1]="B",r[r.WHITE=-1]="WHITE",r[r.W=-1]="W",r[r.EMPTY=0]="EMPTY",r[r.E=0]="E"})(s.Color||(s.Color={}));/*! *****************************************************************************
	  Copyright (c) Microsoft Corporation.

	  Permission to use, copy, modify, and/or distribute this software for any
	  purpose with or without fee is hereby granted.

	  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	  PERFORMANCE OF THIS SOFTWARE.
	  ***************************************************************************** */var w=function(r,t){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])},w(r,t)};function p(r,t){w(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var m=function(){return m=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},m.apply(this,arguments)};function N(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return o}function x(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(k(arguments[t]));return r}var S=function(r){p(t,r);function t(e,i){var n=this.constructor,o=r.call(this,e)||this;return o.__proto__=n.prototype,o.name=o.name="SGFSyntaxError",o.message=e||"There was an unspecified syntax error in the SGF",i&&(o.message+=" on line "+i.lineNo+", char "+i.charNo+`:
`,o.message+="	"+i.sgfString.split(`
`)[i.lineNo-1]+`
`,o.message+="	"+Array(i.charNo+1).join(" ")+"^"),o}return t}(Error),G="A".charCodeAt(0),U="Z".charCodeAt(0),ut=" ".charCodeAt(0);function P(r){if(!r)return!1;var t=r.charCodeAt(0);return t>=G&&t<=U}var V=function(){function r(t){this.position=0,this.lineNo=1,this.charNo=0,this.sgfString=t}return r.prototype.currentChar=function(){for(;this.sgfString.charCodeAt(this.position)<=ut;)this.nextChar();return this.sgfString[this.position]},r.prototype.nextChar=function(){return this.sgfString[this.position]===`
`?(this.charNo=0,this.lineNo++):this.charNo++,this.position++,this.sgfString[this.position]},r.prototype.processChar=function(t){if(this.currentChar()!==t)throw new S("Unexpected character "+this.currentChar()+". Character "+t+" was expected.",this);return this.nextChar()},r.prototype.parsePropertyValue=function(t){if(!(t&&this.currentChar()!=="[")){for(var e="",i=this.processChar("[");i!=="]";){if(i){if(i==="\\")if(i=this.nextChar(),i){if(i===`
`)continue}else throw new S("End of SGF inside of property",this)}else throw new S("End of SGF inside of property",this);e+=i,i=this.nextChar()}return this.processChar("]"),e}},r.prototype.parsePropertyIdent=function(){var t="",e=this.currentChar();if(!P(e))throw new S("Property identifier must consists from upper case letters.",this);for(t+=e;(e=this.nextChar())&&P(e);)t+=e;return t},r.prototype.parsePropertyValues=function(){var t=[],e=this.parsePropertyValue();for(e&&t.push(e);e=this.parsePropertyValue(!0);)t.push(e);return t},r.prototype.parseProperty=function(){if(!!P(this.currentChar()))return[this.parsePropertyIdent(),this.parsePropertyValues()]},r.prototype.parseNode=function(){this.processChar(";");for(var t={},e;e=this.parseProperty();)t[e[0]]=e[1];return t},r.prototype.parseSequence=function(){var t=[];for(t.push(this.parseNode());this.currentChar()===";";)t.push(this.parseNode());return t},r.prototype.parseGameTree=function(){this.processChar("(");var t=this.parseSequence(),e=[];return this.currentChar()==="("&&(e=this.parseCollection()),this.processChar(")"),{sequence:t,children:e}},r.prototype.parseCollection=function(){var t=[];for(t.push(this.parseGameTree());this.currentChar()==="(";)t.push(this.parseGameTree());return t},r}(),C={read:function(r){return!0},write:function(r){return""}},v={read:function(r){return parseFloat(r)},write:function(r){return r.toString(10)}},T={read:function(r){return r},write:function(r){return r}},j={read:function(r){return r==="w"||r==="W"?s.Color.WHITE:s.Color.BLACK},write:function(r){return r===s.Color.WHITE?"W":"B"}},nt={read:function(r){return r?{x:r.charCodeAt(0)-97,y:r.charCodeAt(1)-97}:null},write:function(r){return r?String.fromCharCode(r.x+97)+String.fromCharCode(r.y+97):""}},Zt={read:function(r){return{x:r.charCodeAt(0)-97,y:r.charCodeAt(1)-97,text:r.substr(3)}},write:function(r){return String.fromCharCode(r.x+97)+String.fromCharCode(r.y+97)+":"+r.text}},Et={read:function(r){return r?[{x:r.charCodeAt(0)-97,y:r.charCodeAt(1)-97},{x:r.charCodeAt(3)-97,y:r.charCodeAt(4)-97}]:null},write:function(r){return r?String.fromCharCode(r[0].x+97)+String.fromCharCode(r[0].y+97)+":"+(String.fromCharCode(r[1].x+97)+String.fromCharCode(r[1].y+97)):""}},h={_default:{transformer:T,multiple:!1,notEmpty:!0}};h.B=h.W={transformer:nt,multiple:!1,notEmpty:!1},h.KO={transformer:C,multiple:!1,notEmpty:!1},h.MN={transformer:v,multiple:!1,notEmpty:!0},h.AB=h.AW=h.AE={transformer:nt,multiple:!0,notEmpty:!0},h.PL={transformer:j,multiple:!1,notEmpty:!0},h.C=h.N={transformer:T,multiple:!1,notEmpty:!0},h.DM=h.GB=h.GW=h.HO=h.UC=h.V={transformer:v,multiple:!1,notEmpty:!0},h.BM=h.TE={transformer:v,multiple:!1,notEmpty:!0},h.DO=h.IT={transformer:C,multiple:!1,notEmpty:!1},h.CR=h.MA=h.SL=h.SQ=h.TR={transformer:nt,multiple:!0,notEmpty:!0},h.LB={transformer:Zt,multiple:!0,notEmpty:!0},h.AR=h.LN={transformer:Et,multiple:!0,notEmpty:!0},h.DD=h.TB=h.TW={transformer:nt,multiple:!0,notEmpty:!1},h.AP=h.CA={transformer:T,multiple:!1,notEmpty:!0},h.FF=h.GM=h.ST=h.SZ={transformer:v,multiple:!1,notEmpty:!0},h.AN=h.BR=h.BT=h.CP=h.DT=h.EV=h.GN=h.GC=h.GN=h.ON=h.OT=h.PB=h.PC=h.PW=h.RE=h.RO=h.RU=h.SO=h.US=h.WR=h.WT={transformer:T,multiple:!1,notEmpty:!0},h.TM=h.HA=h.KM={transformer:v,multiple:!1,notEmpty:!0},h.BL=h.WL=h.OB=h.OW={transformer:v,multiple:!1,notEmpty:!0},h.PM={transformer:v,multiple:!1,notEmpty:!0},h.VW={transformer:Et,multiple:!1,notEmpty:!0};var St=function(r,t){t.setSGFProperties(r.sequence[0]||{});for(var e=t,i=1;i<r.sequence.length;i++){var n=new I;n.setSGFProperties(r.sequence[i]),e.appendChild(n),e=n}for(var i=0;i<r.children.length;i++)e.appendChild(St(r.children[i],new I));return t},Qt=["\\\\","\\]"],$t=function(r){return Qt.reduce(function(t,e){return t.replace(new RegExp(e,"g"),e)},r)},I=function(){function r(){this.parent=null,this.children=[],this.properties={}}return Object.defineProperty(r.prototype,"root",{get:function(){for(var t=this;t.parent!=null;)t=t.parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"innerSGF",{get:function(){var t=";";for(var e in this.properties)this.properties.hasOwnProperty(e)&&(t+=e+"["+this.getSGFProperty(e).map($t).join("][")+"]");return this.children.length===1?""+t+this.children[0].innerSGF:this.children.length>1?this.children.reduce(function(i,n){return i+"("+n.innerSGF+")"},t):t},set:function(t){this.clean();var e=t;e[0]!=="("&&(e[0]!==";"&&(e=";"+e),e="("+e+")"),r.fromSGF(e,0,this)},enumerable:!1,configurable:!0}),r.prototype.getPath=function(){for(var t={depth:0,forks:[]},e=this;e.parent;)t.depth++,e.parent.children.length>1&&t.forks.unshift(e.parent.children.indexOf(e)),e=e.parent;return t},r.prototype.appendChild=function(t){if(t==null||!(t instanceof r)||t===this)throw new Error("Invalid argument passed to `appendChild` method, KNode was expected.");return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t)-1},r.prototype.contains=function(t){return this.children.indexOf(t)>=0?!0:this.children.some(function(e){return e.contains(t)})},r.prototype.insertBefore=function(t,e){if(t==null||!(t instanceof r)||t===this)throw new Error("Invalid argument passed to `insertBefore` method, KNode was expected.");return e==null?(this.appendChild(t),this):(t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(this.children.indexOf(e),0,t),this)},r.prototype.removeChild=function(t){return this.children.splice(this.children.indexOf(t),1),t.parent=null,this},r.prototype.replaceChild=function(t,e){if(t==null||!(t instanceof r)||t===this)throw new Error("Invalid argument passed to `replaceChild` method, KNode was expected.");return this.insertBefore(t,e),this.removeChild(e),this},r.prototype.clean=function(){for(var t=this.children.length-1;t>=0;t--)this.removeChild(this.children[t]);this.properties={}},r.prototype.getProperty=function(t){return this.properties[t]},r.prototype.setProperty=function(t,e){return e===void 0?delete this.properties[t]:this.properties[t]=e,this},r.prototype.removeProperty=function(t){this.setProperty(t)},r.prototype.forEachProperty=function(t){var e=this;Object.keys(this.properties).forEach(function(i){return t(i,e.properties[i])})},r.prototype.getSGFProperty=function(t){if(this.properties[t]!==void 0){var e=h[t]||h._default;return e.multiple?this.properties[t].map(function(i){return e.transformer.write(i)}):[e.transformer.write(this.properties[t])]}return null},r.prototype.setSGFProperty=function(t,e){var i=h[t]||h._default;return e===void 0?(delete this.properties[t],this):(i.multiple?this.properties[t]=e.map(function(n){return i.transformer.read(n)}):this.properties[t]=i.transformer.read(e[0]),this)},r.prototype.setSGFProperties=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setSGFProperty(e,t[e]);return this},r.prototype.toSGF=function(){return"("+this.innerSGF+")"},r.prototype.cloneNode=function(t){var e=new r,i=JSON.parse(JSON.stringify(this.properties));return e.properties=i,this.children.forEach(function(n){e.appendChild(n.cloneNode())}),t&&this.parent&&this.parent.appendChild(e),e},r.fromJS=function(t,e){return e===void 0&&(e=new r),St(t,e)},r.fromSGF=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=new r);var n=new V(t);return r.fromJS(n.parseCollection()[e],i)},r}();(function(r){r.KO="KO",r.ALL="ALL",r.NONE="NONE"})(s.Repeating||(s.Repeating={}));var ot={repeating:s.Repeating.KO,allowRewrite:!1,allowSuicide:!1,komi:6.5},pt={repeating:s.Repeating.NONE,allowRewrite:!1,allowSuicide:!1,komi:7.5},ct={repeating:s.Repeating.NONE,allowRewrite:!1,allowSuicide:!0,komi:7.5},te={repeating:s.Repeating.ALL,allowRewrite:!0,allowSuicide:!0,komi:0},tt={Japanese:ot,GOE:ct,NZ:ct,AGA:pt,Chinese:pt};function ee(r){for(var t=[],e=0;e<r;e++)t.push([]);return t}var At=function(){function r(t){t===void 0&&(t=19),this.grid=[],this.capCount={black:0,white:0},this.turn=s.Color.BLACK,this.size=t,this.clear()}return r.prototype.isOnPosition=function(t,e){return t>=0&&e>=0&&t<this.size&&e<this.size},r.prototype.get=function(t,e){if(!!this.isOnPosition(t,e))return this.grid[t*this.size+e]},r.prototype.set=function(t,e,i){if(!this.isOnPosition(t,e))throw new TypeError("Attempt to set field outside of position.");return this.grid[t*this.size+e]=i,this},r.prototype.clear=function(){for(var t=0;t<this.size*this.size;t++)this.grid[t]=s.Color.EMPTY;return this},r.prototype.clone=function(){var t=new r(this.size);return t.grid=this.grid.slice(0),t.capCount.black=this.capCount.black,t.capCount.white=this.capCount.white,t.turn=this.turn,t},r.prototype.compare=function(t){if(t.size!==this.size)throw new TypeError("Positions of different sizes cannot be compared.");for(var e=[],i=0;i<this.size*this.size;i++)this.grid[i]!==t.grid[i]&&e.push({x:Math.floor(i/this.size),y:i%this.size,c:t.grid[i]});return e},r.prototype.applyMove=function(t,e,i,n,o){if(i===void 0&&(i=this.turn),n===void 0&&(n=!1),o===void 0&&(o=!1),!(o||this.get(t,e)===s.Color.EMPTY))return!1;var a=this.get(t,e);this.set(t,e,i);var l=this.get(t,e-1)===-i&&this.captureIfNoLiberties(t,e-1),u=this.get(t+1,e)===-i&&this.captureIfNoLiberties(t+1,e),d=this.get(t,e+1)===-i&&this.captureIfNoLiberties(t,e+1),g=this.get(t-1,e)===-i&&this.captureIfNoLiberties(t-1,e),L=l||u||d||g;if(!L&&!this.hasLiberties(t,e))if(n)this.capture(t,e,i);else return this.set(t,e,a),!1;return this.turn=-i,!0},r.prototype.validatePosition=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.captureIfNoLiberties(t-1,e);return this},r.prototype.hasLiberties=function(t,e,i,n){return i===void 0&&(i=ee(this.size)),n===void 0&&(n=this.get(t,e)),this.isOnPosition(t,e)?this.get(t,e)===s.Color.EMPTY?!0:i[t][e]||this.get(t,e)===-n?!1:(i[t][e]=!0,this.hasLiberties(t,e-1,i,n)||this.hasLiberties(t,e+1,i,n)||this.hasLiberties(t-1,e,i,n)||this.hasLiberties(t+1,e,i,n)):!1},r.prototype.captureIfNoLiberties=function(t,e){return this.hasLiberties(t,e)?!1:(this.capture(t,e),!0)},r.prototype.capture=function(t,e,i){i===void 0&&(i=this.get(t,e)),this.isOnPosition(t,e)&&i!==s.Color.EMPTY&&this.get(t,e)===i&&(this.set(t,e,s.Color.EMPTY),i===s.Color.BLACK?this.capCount.white=this.capCount.white+1:this.capCount.black=this.capCount.black+1,this.capture(t,e-1,i),this.capture(t,e+1,i),this.capture(t-1,e,i),this.capture(t+1,e,i))},r.prototype.toString=function(){for(var t="\u250C",e="\u252C",i="\u2510",n="\u251C",o="\u253C",a="\u2524",l="\u2514",u="\u2534",d="\u2518",g="\u25CF",L="\u25CB",A="\u2500",M="   ",K=0;K<this.size;K++)M+=K<9?K+" ":K;M+=`
`;for(var R=0;R<this.size;R++)for(var B=0;B<this.size;B++){var it=this.grid[B*this.size+R];if(B===0&&(M+=(R<10?" "+R:R)+" "),it!==s.Color.EMPTY)M+=it===s.Color.BLACK?g:L;else{var O=void 0;R===0?B===0?O=t:B<this.size-1?O=e:O=i:R<this.size-1?B===0?O=n:B<this.size-1?O=o:O=a:B===0?O=l:B<this.size-1?O=u:O=d,M+=O}B===this.size-1?R!==this.size-1&&(M+=`
`):M+=A}return M},r.prototype.toTwoDimensionalArray=function(){for(var t=[],e=0;e<this.size;e++){t[e]=[];for(var i=0;i<this.size;i++)t[e][i]=this.grid[e*this.size+i]}return t},r}(),wt=function(){function r(t,e){t===void 0&&(t=19),e===void 0&&(e=ot),this.size=t,this.rules=e,this.komi=e.komi,this.positionStack=[new At(t)]}return Object.defineProperty(r.prototype,"position",{get:function(){return this.positionStack[this.positionStack.length-1]},set:function(t){this.positionStack[this.positionStack.length-1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"turn",{get:function(){return this.position.turn},set:function(t){this.position.turn=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"capCount",{get:function(){return this.position.capCount},enumerable:!1,configurable:!0}),r.prototype.play=function(t,e){var i=this.tryToPlay(t,e);return i&&this.pushPosition(i),i},r.prototype.tryToPlay=function(t,e){var i=this.position.clone(),n=i.applyMove(t,e,i.turn,this.rules.allowSuicide,this.rules.allowRewrite);return n&&!this.hasPositionRepeated(i)?i:!1},r.prototype.hasPositionRepeated=function(t){var e;if(this.rules.repeating===s.Repeating.KO&&this.positionStack.length-2>=0)e=this.positionStack.length-2;else if(this.rules.repeating===s.Repeating.NONE)e=0;else return!1;for(var i=this.positionStack.length-1;i>=e;i--)if(this.positionStack[i].compare(t).length===0)return!0;return!1},r.prototype.pass=function(t){t===void 0&&(t=this.turn);var e=this.position.clone();e.turn=-(t||this.turn),this.pushPosition(e)},r.prototype.isValid=function(t,e){return!!this.tryToPlay(t,e)},r.prototype.isOnBoard=function(t,e){return this.position.isOnPosition(t,e)},r.prototype.addStone=function(t,e,i){return this.isOnBoard(t,e)&&this.position.get(t,e)===s.Color.EMPTY?(this.position.set(t,e,i),!0):!1},r.prototype.removeStone=function(t,e){return this.isOnBoard(t,e)&&this.position.get(t,e)!==s.Color.EMPTY?(this.position.set(t,e,s.Color.EMPTY),!0):!1},r.prototype.setStone=function(t,e,i){return this.isOnBoard(t,e)?(this.position.set(t,e,i),!0):!1},r.prototype.getStone=function(t,e){return this.position.get(t,e)},r.prototype.pushPosition=function(t){return this.positionStack.push(t)},r.prototype.popPosition=function(){return this.positionStack.length>1?this.positionStack.pop():null},r.prototype.clear=function(){this.positionStack=[this.positionStack[0]]},r}(),ft=function(){function r(t){this.zIndex=0,this.opacity=1,this.type=t}return r}(),Y=function(r){p(t,r);function t(e,i,n){i===void 0&&(i=0),n===void 0&&(n=0);var o=r.call(this,e)||this;return o.scaleX=1,o.scaleY=1,o.rotate=0,o.x=i,o.y=n,o}return t.prototype.setPosition=function(e,i){this.x=e,this.y=i},t.prototype.setScale=function(e){this.scaleX=e,this.scaleY=e},t}(ft),at=function(r){p(t,r);function t(e,i,n,o){i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=s.Color.E);var a=r.call(this,e,i,n)||this;return a.variation=o,a}return t}(Y),dt=function(r){p(t,r);function t(e,i,n,o){i===void 0&&(i=0),n===void 0&&(n=0);var a=r.call(this,"LB",i,n,o)||this;return a.text=e,a}return t}(at),Nt=function(r){p(t,r);function t(e,i,n){var o=r.call(this,e)||this;return o.start=i,o.end=n,o}return t}(ft),xt=function(){function r(){this._events={}}return r.prototype.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)},r.prototype.off=function(t,e){this._events[t]&&(e==null&&(this._events[t]=[]),this._events[t]=this._events[t].filter(function(i){return i!==e}))},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._events[t]&&this._events[t].forEach(function(n){return n.apply(void 0,x(e))})},r}();function z(r,t){var e={},i=Object.keys(r);return i.forEach(function(n){var o=t[n],a=r[n];o!=null&&o.constructor===Object&&!Array.isArray(o)&&a!=null?e[n]=z(a,o):o!==void 0?e[n]=o:e[n]=a}),Object.keys(t).forEach(function(n){i.indexOf(n)===-1&&(e[n]=t[n])}),e}var st={stoneSize:.47,marginSize:.25,font:"calibri",backgroundColor:"#CEB053",backgroundImage:"",markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLineWidth:.05,shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:.25,shadowOffsetX:.07,shadowOffsetY:.13,grid:{linesWidth:.03,linesColor:"#654525",starColor:"#531",starSize:.07},coordinates:{color:"#531",bold:!1,labelsX:"ABCDEFGHJKLMNOPQRSTUVWXYZ",labelsY:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]},starPoints:{5:[{x:2,y:2}],7:[{x:3,y:3}],8:[{x:2,y:2},{x:5,y:2},{x:2,y:5},{x:5,y:5}],9:[{x:2,y:2},{x:6,y:2},{x:4,y:4},{x:2,y:6},{x:6,y:6}],10:[{x:2,y:2},{x:7,y:2},{x:2,y:7},{x:7,y:7}],11:[{x:2,y:2},{x:8,y:2},{x:5,y:5},{x:2,y:8},{x:8,y:8}],12:[{x:3,y:3},{x:8,y:3},{x:3,y:8},{x:8,y:8}],13:[{x:3,y:3},{x:9,y:3},{x:6,y:6},{x:3,y:9},{x:9,y:9}],14:[{x:3,y:3},{x:10,y:3},{x:3,y:10},{x:10,y:10}],15:[{x:3,y:3},{x:11,y:3},{x:7,y:7},{x:3,y:11},{x:11,y:11}],16:[{x:3,y:3},{x:12,y:3},{x:3,y:12},{x:12,y:12}],17:[{x:3,y:3},{x:8,y:3},{x:13,y:3},{x:3,y:8},{x:8,y:8},{x:13,y:8},{x:3,y:13},{x:8,y:13},{x:13,y:13}],18:[{x:3,y:3},{x:14,y:3},{x:3,y:14},{x:14,y:14}],19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],20:[{x:3,y:3},{x:16,y:3},{x:3,y:16},{x:16,y:16}],21:[{x:3,y:3},{x:10,y:3},{x:17,y:3},{x:3,y:10},{x:10,y:10},{x:17,y:10},{x:3,y:17},{x:10,y:17},{x:17,y:17}]}},Mt={size:19,width:0,height:0,viewport:{top:0,right:0,bottom:0,left:0},coordinates:!1,theme:st},_t=function(r){p(t,r);function t(e,i){i===void 0&&(i={});var n=r.call(this)||this;return n.objects=[],n.element=e,n.config=z(Mt,i),n}return t.prototype.resize=function(){},t.prototype.redraw=function(){},t.prototype.addObject=function(e){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addObject(e[i]);return}this.hasObject(e)||this.objects.push(e)},t.prototype.updateObject=function(e){},t.prototype.removeObject=function(e){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.removeObject(e[i]);return}var n=this.objects.indexOf(e);n!==-1&&this.objects.splice(n,1)},t.prototype.removeObjectsAt=function(e,i){var n=this;this.objects.forEach(function(o){o instanceof Y&&o.x===e&&o.y===i&&n.removeObject(o)})},t.prototype.removeAllObjects=function(){this.objects=[]},t.prototype.hasObject=function(e){return this.objects.indexOf(e)>=0},t.prototype.setWidth=function(e){this.config.width=e,this.config.height=0,this.resize()},t.prototype.setHeight=function(e){this.config.width=0,this.config.height=e,this.resize()},t.prototype.setDimensions=function(e,i){this.config.width=e,this.config.height=i,this.resize()},t.prototype.getViewport=function(){return this.config.viewport},t.prototype.setViewport=function(e){this.config.viewport=e},t.prototype.getSize=function(){return this.config.size},t.prototype.setSize=function(e){e===void 0&&(e=19),this.config.size=e},t.prototype.getCoordinates=function(){return this.config.coordinates},t.prototype.setCoordinates=function(e){this.config.coordinates=e},t}(xt),c="http://www.w3.org/2000/svg",f="objects",y="gridMask",H="shadows",kt=function(){function r(t){t===void 0&&(t={}),this.params=t}return r.prototype.createElement=function(){var t;return t={},t[f]=this.createSVGElements(),t[y]=this.createSVGElements(),t},r.prototype.createSVGElements=function(){var t=document.createElementNS(c,"g"),e=document.createElementNS(c,"circle"),i=document.createElementNS(c,"line"),n=document.createElementNS(c,"polygon");return t.appendChild(e),t.appendChild(i),t.appendChild(n),t},r.prototype.updateElement=function(t,e,i){t[f].setAttribute("stroke",this.params.color||i.theme.markupNoneColor),t[f].setAttribute("fill",this.params.color||i.theme.markupNoneColor),t[f].setAttribute("stroke-width",this.params.lineWidth||i.theme.markupLineWidth),this.updateSVGElements(t[f],e),t[y].setAttribute("stroke","rgba(0,0,0,"+i.theme.markupGridMask+")"),t[y].setAttribute("fill","rgba(0,0,0,"+i.theme.markupGridMask+")"),t[y].setAttribute("stroke-width",(this.params.lineWidth||i.theme.markupLineWidth)*3),this.updateSVGElements(t[y],e)},r.prototype.updateSVGElements=function(t,e){var i=t.children[0],n=t.children[1],o=t.children[2],a=e.start.x,l=e.start.y,u=e.end.x,d=e.end.y,g=Math.sqrt((u-a)*(u-a)+(d-l)*(d-l)),L=function(J){return a+J*(u-a)},A=function(J){return l+J*(d-l)},M=1/g/2.5,K=L(1-M),R=A(1-M),B=function(J){return K+J*(d-l)},it=function(J){return R+J*(a-u)},O=.1;i.setAttribute("cx",a),i.setAttribute("cy",l),i.setAttribute("r",O),n.setAttribute("x1",L(1/g*O)),n.setAttribute("y1",A(1/g*O)),n.setAttribute("x2",K),n.setAttribute("y2",R),o.setAttribute("points",`
      `+B(-M/1.75)+","+it(-M/1.75)+`
      `+B(M/1.75)+","+it(M/1.75)+`
      `+u+","+d+`
    `)},r}(),Z=function(){function r(){}return r.prototype.updateElement=function(t,e,i){var n="translate("+e.x+", "+e.y+")",o="scale("+e.scaleX+", "+e.scaleY+")",a="rotate("+e.rotate+")";Object.keys(t).forEach(function(l){t[l].setAttribute("transform",n+" "+o+" "+a),t[l].setAttribute("opacity",e.opacity)})},r}(),Q=function(r){p(t,r);function t(e){e===void 0&&(e={});var i=r.call(this)||this;return i.params=e,i}return t.prototype.updateElement=function(e,i,n){r.prototype.updateElement.call(this,e,i,n),i.variation===s.Color.B?(e[f].setAttribute("stroke",n.theme.markupBlackColor),e[f].setAttribute("fill",this.params.fillColor||"rgba(0,0,0,0)")):i.variation===s.Color.W?(e[f].setAttribute("stroke",n.theme.markupWhiteColor),e[f].setAttribute("fill",this.params.fillColor||"rgba(0,0,0,0)")):(e[f].setAttribute("stroke",this.params.color||n.theme.markupNoneColor),e[f].setAttribute("fill",this.params.fillColor||"rgba(0,0,0,0)")),e[f].setAttribute("stroke-width",this.params.lineWidth||n.theme.markupLineWidth)},t}(Z),lt=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e){var i,n=document.createElementNS(c,"circle");n.setAttribute("cx","0"),n.setAttribute("cy","0"),n.setAttribute("r","0.25");var o=document.createElementNS(c,"circle");return o.setAttribute("cx","0"),o.setAttribute("cy","0"),o.setAttribute("r","0.35"),o.setAttribute("fill","rgba(0,0,0,"+e.theme.markupGridMask+")"),i={},i[f]=n,i[y]=o,i},t}(Q),Bt=function(r){p(t,r);function t(e){var i=r.call(this)||this;return i.params=e,i}return t.prototype.createElement=function(){var e=document.createElementNS(c,"rect");return e.setAttribute("x","-0.5"),e.setAttribute("y","-0.5"),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("fill",this.params.color),e},t}(Z),Ot=function(r){p(t,r);function t(e){var i=r.call(this)||this;return i.params=e,i}return t.prototype.createElement=function(){var e=document.createElementNS(c,"circle");return e.setAttribute("cx","0"),e.setAttribute("cy","0"),e.setAttribute("r","0.15"),e.setAttribute("fill",this.params.color),e},t}(Z);function X(r){return r+"-"+Math.floor(Math.random()*1e9).toString(36)}var $=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e,i){return null},t.prototype.createShadow=function(e,i){var n=e.theme.stoneSize;if(!this.shadowFilterElement){var o=document.createElementNS(c,"radialGradient"),a=e.theme.shadowBlur,l=Math.max(n-n*a,1e-5),u=n+1/7*n*a;o.setAttribute("id",X("shadowFilter")),o.setAttribute("fr",String(l)),o.setAttribute("r",String(u)),o.innerHTML=`
        <stop offset="0%" stop-color="`+e.theme.shadowColor+`" />
        <stop offset="100%" stop-color="`+e.theme.shadowTransparentColor+`" />
      `,i(o),this.shadowFilterElement=o}var d=document.createElementNS(c,"circle");return d.setAttribute("cx",String(e.theme.shadowOffsetX)),d.setAttribute("cy",String(e.theme.shadowOffsetY)),d.setAttribute("r",String(n)),d.setAttribute("fill","url(#"+this.shadowFilterElement.id+")"),d},t}(Z),re=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e,i){var n;if(r.prototype.createElement.call(this,e,i),!this.filterElement){var o=document.createElementNS(c,"filter");o.setAttribute("id",X("filter")),o.setAttribute("x","-300%"),o.setAttribute("y","-300%"),o.setAttribute("width","600%"),o.setAttribute("height","600%");var a=document.createElementNS(c,"feGaussianBlur");a.setAttribute("in","SourceGraphic"),a.setAttribute("stdDeviation",.3*e.theme.stoneSize),o.appendChild(a),this.filterElement=o,i(o)}var l=document.createElementNS(c,"g"),u=document.createElementNS(c,"circle");u.setAttribute("cx","0"),u.setAttribute("cy","0"),u.setAttribute("fill","#000"),u.setAttribute("r",e.theme.stoneSize),l.appendChild(u);var d=document.createElementNS(c,"circle");d.setAttribute("cx",-.4*e.theme.stoneSize),d.setAttribute("cy",-.4*e.theme.stoneSize),d.setAttribute("r",.25*e.theme.stoneSize),d.setAttribute("fill","#fff"),d.setAttribute("filter","url(#"+this.filterElement.id+")"),l.appendChild(d);var g=document.createElementNS(c,"circle");return g.setAttribute("cx",.4*e.theme.stoneSize),g.setAttribute("cy",.4*e.theme.stoneSize),g.setAttribute("r",.15*e.theme.stoneSize),g.setAttribute("fill","#fff"),g.setAttribute("filter","url(#"+this.filterElement.id+")"),l.appendChild(g),n={},n[f]=l,n[H]=this.createShadow(e,i),n},t}($),ie=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e,i){var n;if(r.prototype.createElement.call(this,e,i),!this.filterElement1){var o=document.createElementNS(c,"radialGradient");o.setAttribute("id",X("filter")),o.setAttribute("fx","30%"),o.setAttribute("fy","30%"),o.innerHTML=`
        <stop offset="10%" stop-color="rgba(255,255,255,0.9)" />
        <stop offset="100%" stop-color="rgba(255,255,255,0)" />
      `,i(o),this.filterElement1=o;var a=document.createElementNS(c,"radialGradient");a.setAttribute("id",X("filter")),a.setAttribute("fx","70%"),a.setAttribute("fy","70%"),a.innerHTML=`
        <stop offset="10%" stop-color="rgba(255,255,255,0.7)" />
        <stop offset="100%" stop-color="rgba(255,255,255,0)" />
      `,i(a),this.filterElement2=a}var l=document.createElementNS(c,"g"),u=document.createElementNS(c,"circle");u.setAttribute("cx","0"),u.setAttribute("cy","0"),u.setAttribute("fill","#ccc"),u.setAttribute("r",e.theme.stoneSize),l.appendChild(u);var d=document.createElementNS(c,"circle");d.setAttribute("cx","0"),d.setAttribute("cy","0"),d.setAttribute("r",e.theme.stoneSize),d.setAttribute("fill","url(#"+this.filterElement1.id+")"),l.appendChild(d);var g=document.createElementNS(c,"circle");return g.setAttribute("cx","0"),g.setAttribute("cy","0"),g.setAttribute("r",e.theme.stoneSize),g.setAttribute("fill","url(#"+this.filterElement2.id+")"),l.appendChild(g),n={},n[f]=l,n[H]=this.createShadow(e,i),n},t}($),mt=function(r){p(t,r);function t(e){e===void 0&&(e={});var i=r.call(this,e)||this;return!e.maxWidth&&e.maxWidth!==0&&(e.maxWidth=.95),i}return t.prototype.createElement=function(e){var i,n=document.createElementNS(c,"text");n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","middle"),n.setAttribute("lengthAdjust","spacingAndGlyphs");var o=document.createElementNS(c,"text");return o.setAttribute("text-anchor","middle"),o.setAttribute("dominant-baseline","middle"),o.setAttribute("stroke-width","0.2"),o.setAttribute("stroke","rgba(0,0,0,"+e.theme.markupGridMask+")"),o.setAttribute("lengthAdjust","spacingAndGlyphs"),i={},i[f]=n,i[y]=o,i},t.prototype.updateElement=function(e,i,n){r.prototype.updateElement.call(this,e,i,n);var o=.5;i.text.length===1?o=.7:i.text.length===2&&(o=.6),this.params.color?e[f].setAttribute("fill",this.params.color):i.variation===s.Color.B?e[f].setAttribute("fill",n.theme.markupBlackColor):i.variation===s.Color.W?e[f].setAttribute("fill",n.theme.markupWhiteColor):e[f].setAttribute("fill",n.theme.markupNoneColor),e[f].removeAttribute("stroke"),e[f].setAttribute("font-family",this.params.font||n.theme.font),e[f].setAttribute("stroke-width","0"),e[f].setAttribute("font-size",o),e[f].textContent=i.text,e[y].setAttribute("font-size",o),e[y].textContent=i.text,this.params.maxWidth>0&&(e[f].getComputedTextLength()>this.params.maxWidth?(e[f].setAttribute("textLength",""+this.params.maxWidth),e[y].setAttribute("textLength",""+this.params.maxWidth)):(e[f].removeAttribute("textLength"),e[y].removeAttribute("textLength")))},t}(Q),Tt=function(){function r(t){t===void 0&&(t={}),this.params=t}return r.prototype.createElement=function(){var t,e=document.createElementNS(c,"line"),i=document.createElementNS(c,"line");return t={},t[f]=e,t[y]=i,t},r.prototype.updateElement=function(t,e,i){t[f].setAttribute("stroke",this.params.color||i.theme.markupNoneColor),t[f].setAttribute("stroke-width",this.params.lineWidth||i.theme.markupLineWidth),t[f].setAttribute("x1",e.start.x),t[f].setAttribute("y1",e.start.y),t[f].setAttribute("x2",e.end.x),t[f].setAttribute("y2",e.end.y),t[y].setAttribute("stroke","rgba(0,0,0,"+i.theme.markupGridMask+")"),t[y].setAttribute("stroke-width",(this.params.lineWidth||i.theme.markupLineWidth)*2),t[y].setAttribute("x1",e.start.x),t[y].setAttribute("y1",e.start.y),t[y].setAttribute("x2",e.end.x),t[y].setAttribute("y2",e.end.y)},r}(),Lt=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e,i){var n;if(r.prototype.createElement.call(this,e,i),!this.filterElement1){var o=document.createElementNS(c,"radialGradient");o.setAttribute("id",X("filter")),o.setAttribute("cx","45%"),o.setAttribute("cy","45%"),o.setAttribute("fx","20%"),o.setAttribute("fy","20%"),o.setAttribute("r","60%"),o.innerHTML=`
        <stop offset="0%" stop-color="rgba(48,48,48,1)" />
        <stop offset="80%" stop-color="rgba(16,16,16,1)" />
        <stop offset="100%" stop-color="rgba(0,0,0,1)" />
      `,i(o),this.filterElement1=o}var a=document.createElementNS(c,"g"),l=document.createElementNS(c,"circle");return l.setAttribute("cx","0"),l.setAttribute("cy","0"),l.setAttribute("fill","url(#"+this.filterElement1.id+")"),l.setAttribute("r",e.theme.stoneSize),a.appendChild(l),n={},n[f]=a,n[H]=this.createShadow(e,i),n},t}($),Gt=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e,i){var n;if(r.prototype.createElement.call(this,e,i),!this.filterElement1){var o=document.createElementNS(c,"radialGradient");o.setAttribute("id",X("filter")),o.setAttribute("cx","45%"),o.setAttribute("cy","45%"),o.setAttribute("fx","20%"),o.setAttribute("fy","20%"),o.setAttribute("r","60%"),o.innerHTML=`
        <stop offset="0%" stop-color="rgba(255,255,255,1)" />
        <stop offset="80%" stop-color="rgba(215,215,215,1)" />
        <stop offset="100%" stop-color="rgba(170,170,170,1)" />
      `,i(o),this.filterElement1=o}var a=document.createElementNS(c,"g"),l=document.createElementNS(c,"circle");return l.setAttribute("cx","0"),l.setAttribute("cy","0"),l.setAttribute("fill","url(#"+this.filterElement1.id+")"),l.setAttribute("r",e.theme.stoneSize),a.appendChild(l),n={},n[f]=a,n[H]=this.createShadow(e,i),n},t}($),ne=function(r){p(t,r);function t(e,i){var n=r.call(this)||this;return n.fallback=i,n.randSeed=Math.ceil(Math.random()*9999999),n.paths=e,n.loadedPaths={},n}return t.prototype.createElement=function(e,i){var n=this;r.prototype.createElement.call(this,e,i);var o=Math.floor(Math.random()*this.paths.length),a=document.createElementNS(c,"g"),l;this.loadedPaths[o]||(l=this.fallback.createElement(e,i),l instanceof SVGElement||(l=l[f]),a.appendChild(l));var u=document.createElementNS(c,"image");return u.setAttribute("href",this.paths[o]),u.setAttribute("width",e.theme.stoneSize*2),u.setAttribute("height",e.theme.stoneSize*2),u.setAttribute("x",-e.theme.stoneSize),u.setAttribute("y",-e.theme.stoneSize),this.loadedPaths[o]||u.setAttribute("opacity","0"),u.addEventListener("load",function(){l&&(u.setAttribute("opacity","1"),a.removeChild(l),n.loadedPaths[o]=!0)}),a.appendChild(u),a},t}($),oe=function(r){p(t,r);function t(e){var i=r.call(this)||this;return i.color=e,i}return t.prototype.createElement=function(e){var i=document.createElementNS(c,"circle");return i.setAttribute("cx","0"),i.setAttribute("cy","0"),i.setAttribute("r",e.theme.stoneSize),i.setAttribute("fill",this.color),i},t}(Z),Rt=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e){var i,n=document.createElementNS(c,"rect");n.setAttribute("x","-0.25"),n.setAttribute("y","-0.25"),n.setAttribute("width","0.50"),n.setAttribute("height","0.50");var o=document.createElementNS(c,"rect");return o.setAttribute("x","-0.35"),o.setAttribute("y","-0.35"),o.setAttribute("width","0.70"),o.setAttribute("height","0.70"),o.setAttribute("fill","rgba(0,0,0,"+e.theme.markupGridMask+")"),i={},i[f]=n,i[y]=o,i},t}(Q),Pt=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e){var i,n=document.createElementNS(c,"polygon");n.setAttribute("points","0,-0.25 -0.25,0.166666 0.25,0.166666");var o=document.createElementNS(c,"polygon");return o.setAttribute("points","0,-0.35 -0.35,0.2333333 0.35,0.2333333"),o.setAttribute("fill","rgba(0,0,0,"+e.theme.markupGridMask+")"),i={},i[f]=n,i[y]=o,i},t}(Q),Wt=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createElement=function(e){var i,n=document.createElementNS(c,"path");n.setAttribute("d","M -0.20,-0.20 L 0.20,0.20 M 0.20,-0.20 L -0.20,0.20");var o=document.createElementNS(c,"circle");return o.setAttribute("cx","0"),o.setAttribute("cy","0"),o.setAttribute("r","0.15"),o.setAttribute("fill","rgba(0,0,0,"+e.theme.markupGridMask+")"),i={},i[f]=n,i[y]=o,i},t}(Q),ae=Object.freeze({__proto__:null,Arrow:kt,Circle:lt,Dim:Bt,Dot:Ot,GlassStoneBlack:re,GlassStoneWhite:ie,Label:mt,Line:Tt,ModernStoneBlack:Lt,ModernStoneWhite:Gt,RealisticStone:ne,SimpleStone:oe,Square:Rt,Triangle:Pt,XMark:Wt});function Vt(r,t,e,i){var n=document.createElementNS(c,"line");return n.setAttribute("x1",r),n.setAttribute("y1",t),n.setAttribute("x2",e),n.setAttribute("y2",i),n}function se(r,t,e){var i=document.createElementNS(c,"circle");return i.setAttribute("cx",r),i.setAttribute("cy",t),i.setAttribute("r",e),i.setAttribute("fill","#553310"),i.setAttribute("stroke-width","0"),i}function le(r){var t=r.theme.grid.linesWidth,e=document.createElementNS(c,"g");e.setAttribute("stroke",r.theme.grid.linesColor),e.setAttribute("stroke-width",t.toString()),e.setAttribute("fill",r.theme.grid.starColor);for(var i=0;i<r.size;i++)e.appendChild(Vt(i,0-t/2,i,r.size-1+t/2)),e.appendChild(Vt(0-t/2,i,r.size-1+t/2,i));var n=r.theme.starPoints[r.size];return n&&n.forEach(function(o){e.appendChild(se(o.x,o.y,r.theme.grid.starSize))}),e}function ht(r,t,e){var i=document.createElementNS(c,"text");return i.setAttribute("x",r),i.setAttribute("y",t),i.textContent=e,i}function he(r){var t=document.createElementNS(c,"g");t.style.userSelect="none";var e=r.size,i=r.theme.coordinates,n=i.fontSize,o=i.color,a=i.labelsX,l=i.labelsY,u=i.top,d=i.bottom,g=i.right,L=i.left;t.setAttribute("font-family",r.theme.font),t.setAttribute("font-size",n),t.setAttribute("text-anchor","middle"),t.setAttribute("dominant-baseline","middle"),r.theme.coordinates.bold&&t.setAttribute("font-weight","bold"),t.setAttribute("fill",o);for(var A=0;A<e;A++)u&&t.appendChild(ht(A,-.75,a[A])),d&&t.appendChild(ht(A,e-.25,a[A])),L&&t.appendChild(ht(-.75,e-A-1,l[A])),g&&t.appendChild(ht(e-.25,e-A-1,l[A]));return t}var ue=m(m({},st),{markupGridMask:.8,stoneSize:.48,coordinates:m(m({},st.coordinates),{fontSize:.5,top:!0,right:!0,bottom:!0,left:!0}),grid:m(m({},st.grid),{linesWidth:.03,starSize:.09}),drawHandlers:{CR:new lt,SQ:new Rt,LB:new mt,TR:new Pt,MA:new Wt({lineWidth:.075}),SL:new Ot({color:"rgba(32, 32, 192, 0.75)"}),LN:new Tt,AR:new kt,DD:new Bt({color:"rgba(0, 0, 0, 0.5)"}),W:new Gt,B:new Lt}}),pe=m(m({},Mt),{theme:ue}),zt=function(r){p(t,r);function t(e,i){i===void 0&&(i={});var n=r.call(this,e,z(pe,i))||this;return n.objects=[],n.contexts={},n.boardElement=document.createElement("div"),n.boardElement.style.display="inline-block",n.boardElement.style.position="relative",n.boardElement.style.verticalAlign="middle",n.boardElement.style.userSelect="none",n.element.appendChild(n.boardElement),n.touchArea=document.createElement("div"),n.touchArea.style.position="absolute",n.touchArea.style.top="0",n.touchArea.style.left="0",n.touchArea.style.bottom="0",n.touchArea.style.right="0",n.touchArea.style.zIndex="1",n.touchArea.style.borderTop="#F0E7A7 solid 1px",n.touchArea.style.borderRight="#D1A974 solid 1px",n.touchArea.style.borderLeft="#CCB467 solid 1px",n.touchArea.style.borderBottom="#665926 solid 1px",n.boardElement.appendChild(n.touchArea),n.svgElement=document.createElementNS(c,"svg"),n.svgElement.style.display="block",n.boardElement.appendChild(n.svgElement),n.defsElement=document.createElementNS(c,"defs"),n.svgElement.appendChild(n.defsElement),n.setViewport(),n.resize(),n.redraw(),n}return t.prototype.resize=function(){this.config.width&&this.config.height?(this.boardElement.style.width="",this.svgElement.style.width=this.config.width+"px",this.svgElement.style.height=this.config.height+"px"):this.config.width?(this.boardElement.style.width="",this.svgElement.style.width=this.config.width+"px",this.svgElement.style.height="auto"):this.config.height?(this.boardElement.style.width="",this.svgElement.style.width="auto",this.svgElement.style.height=this.config.height+"px"):(this.boardElement.style.width="100%",this.svgElement.style.width="100%",this.svgElement.style.height="auto")},t.prototype.redraw=function(){this.svgElement.style.backgroundColor=this.config.theme.backgroundColor,this.config.theme.backgroundImage?this.svgElement.style.backgroundImage="url('"+this.config.theme.backgroundImage+"')":this.svgElement.style.backgroundImage="",this.drawGrid(),this.drawCoordinates(),this.drawObjects()},t.prototype.drawGrid=function(){this.contexts[y]&&this.svgElement.removeChild(this.contexts[y]),this.contexts.gridElement&&this.svgElement.removeChild(this.contexts.gridElement);var e=this.config.size;this.contexts[y]=document.createElementNS(c,"mask"),this.contexts[y].id=X("mask"),this.contexts[y].innerHTML='<rect x="-0.5" y="-0.5" width="'+e+'" height="'+e+'" fill="white" />',this.svgElement.appendChild(this.contexts[y]),this.contexts.gridElement=le(this.config),this.contexts.gridElement.setAttribute("mask","url(#"+this.contexts[y].id+")"),this.svgElement.appendChild(this.contexts.gridElement)},t.prototype.drawCoordinates=function(){this.contexts.coordinatesElement&&this.svgElement.removeChild(this.contexts.coordinatesElement),this.contexts.coordinatesElement=he(this.config),this.contexts.coordinatesElement.style.opacity=this.config.coordinates?"":"0",this.svgElement.appendChild(this.contexts.coordinatesElement)},t.prototype.drawObjects=function(){var e=this;this.contexts[H]&&this.svgElement.removeChild(this.contexts[H]),this.contexts[f]&&this.svgElement.removeChild(this.contexts[f]),this.contexts[H]=document.createElementNS(c,"g"),this.svgElement.appendChild(this.contexts[H]),this.contexts[f]=document.createElementNS(c,"g"),this.svgElement.appendChild(this.contexts[f]),this.objectsElementMap=new Map,this.objects.forEach(function(i){return e.createObjectElements(i)})},t.prototype.addObject=function(e){if(r.prototype.addObject.call(this,e),!Array.isArray(e)){if(this.objectsElementMap.get(e)){this.updateObject(e);return}this.createObjectElements(e)}},t.prototype.createObjectElements=function(e){var i,n=this,o=this.getObjectHandler(e),a=o.createElement(this.config,function(u){return n.defsElement.appendChild(u)}),l;a instanceof SVGElement?l=(i={},i[f]=a,i):l=a,this.objectsElementMap.set(e,l),Object.keys(l).forEach(function(u){return n.contexts[u].appendChild(l[u])}),o.updateElement(l,e,this.config)},t.prototype.getObjectHandler=function(e){return"handler"in e?e.handler:this.config.theme.drawHandlers[e.type]},t.prototype.removeObject=function(e){var i=this;if(r.prototype.removeObject.call(this,e),!Array.isArray(e)){var n=this.objectsElementMap.get(e);n&&(this.objectsElementMap.delete(e),Object.keys(n).forEach(function(o){return i.contexts[o].removeChild(n[o])}))}},t.prototype.updateObject=function(e){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.updateObject(e[i]);return}var n=this.objectsElementMap.get(e);if(!!n){var o=this.getObjectHandler(e);o.updateElement(n,e,this.config)}},t.prototype.setViewport=function(e){e===void 0&&(e=this.config.viewport),r.prototype.setViewport.call(this,e);var i=this.config,n=i.coordinates,o=i.theme,a=i.size,l=o.marginSize,u=o.coordinates,d=u.fontSize,g=u.top,L=u.left,A=u.bottom,M=u.right;this.top=e.top-.5-(n&&g&&!e.top?d:0)-l,this.left=e.left-.5-(n&&L&&!e.left?d:0)-l,this.bottom=a-.5-this.top-e.bottom+(n&&A&&!e.bottom?d:0)+l,this.right=a-.5-this.left-e.right+(n&&M&&!e.right?d:0)+l,this.svgElement.setAttribute("viewBox",this.left+" "+this.top+" "+this.right+" "+this.bottom)},t.prototype.setSize=function(e){e===void 0&&(e=19),r.prototype.setSize.call(this,e),this.drawGrid(),this.drawCoordinates(),this.setViewport()},t.prototype.setCoordinates=function(e){r.prototype.setCoordinates.call(this,e),this.contexts.coordinatesElement.style.opacity=this.config.coordinates?"":"0",this.setViewport()},t.prototype.on=function(e,i){r.prototype.on.call(this,e,i),this.registerBoardListener(e)},t.prototype.registerBoardListener=function(e){var i=this;this.touchArea.addEventListener(e,function(n){if(n.layerX!=null){var o=i.getRelativeCoordinates(n.layerX,n.layerY);i.emit(e,n,o)}else i.emit(e,n)})},t.prototype.getRelativeCoordinates=function(e,i){var n=this.touchArea.offsetWidth/this.right,o=this.touchArea.offsetHeight/this.bottom,a=Math.round(e/n+this.left),l=Math.round(i/o+this.top);return a<0||a>=this.config.size||l<0||l>=this.config.size?null:{x:a,y:l}},t}(_t),W;(function(r){r.BLACK_MOVE="B",r.EXECUTE_ILLEGAL="KO",r.MOVE_NUMBER="MN",r.WHITE_MOVE="W",r.ADD_BLACK="AB",r.CLEAR_FIELD="AE",r.ADD_WHITE="AW",r.SET_TURN="PL",r.COMMENT="C",r.EVEN_POSITION="DM",r.GOOD_FOR_BLACK="GB",r.GOOD_FOR_WHITE="GW",r.HOTSPOT="HO",r.NODE_NAME="N",r.UNCLEAR_POSITION="UC",r.NODE_VALUE="V",r.BAD_MOVE="BM",r.DOUBTFUL_MOVE="DM",r.INTERESTING_MOVE="IT",r.GOOD_MOVE="TE",r.ARROW="AR",r.CIRCLE="CR",r.DIM="DD",r.LABEL="LB",r.LINE="LN",r.X_MARK="MA",r.SELECTED="SL",r.SQUARE="SQ",r.TRIANGLE="TR",r.APPLICATION="AP",r.CHARSET="CA",r.SGF_VERSION="FF",r.GAME_TYPE="GM",r.VARIATIONS_STYLE="ST",r.BOARD_SIZE="SZ",r.ANNOTATOR="AN",r.BLACK_RANK="BR",r.BLACK_TEAM="BT",r.COPYRIGHT="CP",r.DATE="DT",r.EVENT="EV",r.GAME_NAME="GN",r.GAME_COMMENT="GC",r.OPENING_INFO="ON",r.OVER_TIME="OT",r.BLACK_NAME="BN",r.PLACE="PC",r.WHITE_NAME="PW",r.RESULT="RE",r.ROUND="RO",r.RULES="RU",r.SOURCE="SO",r.TIME_LIMITS="TM",r.AUTHOR="US",r.WHITE_RANK="WR",r.WHITE_TEAM="WT",r.BLACK_TIME_LEFT="BL",r.BLACK_STONES_LEFT="OB",r.WHITE_STONES_LEFT="OW",r.WHITE_TIME_LEFT="WL",r.FIGURE="FG",r.PRINT_MOVE_NUMBERS="PM",r.BOARD_SECTION="VW",r.HANDICAP="HA",r.KOMI="KM",r.BLACK_TERRITORY="TB",r.WHITE_TERRITORY="TW"})(W||(W={}));function ce(r){r.target.params.size=r.value}function fe(r){tt[r.value]&&(r.target.params.rules=tt[r.value])}function de(r){r.value>1&&r.target.currentNode===r.target.rootNode&&!r.target.getProperty(W.SET_TURN)&&(r.target.game.position.turn=s.Color.WHITE)}function jt(r){var t=r.propIdent==="B"?s.Color.B:s.Color.W;r.value&&r.target.game.position.applyMove(r.value.x,r.value.y,t,!0,!0),r.target.game.position.turn=-t}function me(r){r.target.game.turn=r.value}function yt(r){var t;switch(r.propIdent){case"AB":t=s.Color.B;break;case"AW":t=s.Color.W;break;case"AE":t=s.Color.E;break}r.value.forEach(function(e){r.target.game.setStone(e.x,e.y,t)})}var Ht=function(r){p(t,r);function t(){var e=r.call(this)||this;return e.loadKifu(new I),e.plugins=[],e.on("beforeInit.SZ",ce),e.on("beforeInit.RU",fe),e.on("applyGameChanges.HA",de),e.on("applyGameChanges.B",jt),e.on("applyGameChanges.W",jt),e.on("applyGameChanges.PL",me),e.on("applyGameChanges.AB",yt),e.on("applyGameChanges.AW",yt),e.on("applyGameChanges.AE",yt),e}return t.prototype.loadKifu=function(e){this.rootNode=e,this.currentNode=e,this.emit("loadKifu",{name:"loadKifu",kifuNode:e,target:this}),this.executeRoot()},t.prototype.newGame=function(e,i){var n=new I;if(e&&n.setProperty("SZ",e),i){var o=Object.keys(tt).find(function(a){return tt[a]===i});o&&n.setProperty("RU",o)}this.loadKifu(n)},t.prototype.executeRoot=function(){this.params={size:19,rules:ot},this.emitNodeLifeCycleEvent("beforeInit"),this.game=new wt(this.params.size,this.params.rules),this.executeNode()},t.prototype.executeNode=function(){this.emitNodeLifeCycleEvent("applyGameChanges"),this.emitNodeLifeCycleEvent("applyNodeChanges")},t.prototype.executeNext=function(e){this.emitNodeLifeCycleEvent("clearNodeChanges"),this.game.pushPosition(this.game.position.clone()),this.currentNode=this.currentNode.children[e],this.executeNode()},t.prototype.executePrevious=function(){this.emitNodeLifeCycleEvent("clearNodeChanges"),this.emitNodeLifeCycleEvent("clearGameChanges"),this.game.popPosition(),this.currentNode=this.currentNode.parent,this.emitNodeLifeCycleEvent("applyNodeChanges")},t.prototype.emitNodeLifeCycleEvent=function(e){var i=this;this.emit(e,{name:e,target:this}),this.currentNode.forEachProperty(function(n,o){i.emit(e+"."+n,{name:e,target:i,propIdent:n,value:o})})},t.prototype.getPropertyHandler=function(e){return this.constructor.propertyHandlers[e]},t.prototype.getProperty=function(e){return this.currentNode.getProperty(e)},t.prototype.setProperty=function(e,i){this.emitNodeLifeCycleEvent("clearNodeChanges"),this.emitNodeLifeCycleEvent("clearGameChanges"),this.currentNode.setProperty(e,i),this.executeNode()},t.prototype.getRootProperty=function(e){return this.rootNode.getProperty(e)},t.prototype.getNextNodes=function(){return this.currentNode.children},t.prototype.next=function(e){if(e===void 0&&(e=0),this.currentNode.children.length){var i=void 0;if(typeof e=="number"?i=e:i=this.currentNode.children.indexOf(e),this.currentNode.children[i])return this.executeNext(i),!0}return!1},t.prototype.previous=function(){return this.currentNode.parent?(this.executePrevious(),!0):!1},t.prototype.first=function(){for(;this.previous(););},t.prototype.last=function(){for(;this.next(););},t.prototype.goTo=function(e){var i=typeof e=="number"?{depth:e,forks:[]}:e;this.first();for(var n=0,o=0;n<i.depth;n++)this.currentNode.children.length>1?this.next(i.forks[o++]):this.next()},t.prototype.getCurrentPath=function(){var e={depth:0,forks:[]};if(this.currentNode)for(var i=this.currentNode;i.parent;)e.depth++,i.parent.children.length>1&&e.forks.push(i.parent.children.indexOf(i)),i=i.parent;return e},t.prototype.previousFork=function(){for(;this.previous();)if(this.currentNode.children.length>1)return},t.prototype.play=function(e,i){var n=new I;this.game.turn===s.Color.W?n.setProperty(W.WHITE_MOVE,{x:e,y:i}):n.setProperty(W.BLACK_MOVE,{x:e,y:i});var o=this.currentNode.appendChild(n);this.next(o)},t.prototype.use=function(e){if(!e||typeof e.apply!="function")throw new TypeError("Plugin must implement an `apply` method.");e.apply(this),this.plugins.push(e)},t}(xt),ye={enabled:!1,showVariations:!0},Dt=function(){function r(t){var e=this;t===void 0&&(t={}),this.gameStateStack=[],this.handleChange=function(i){i&&!e.config.enabled?e.enable():!i&&e.config.enabled&&e.disable()},this.config=z(ye,t)}return r.prototype.apply=function(t){if(this.player)throw new Error("This plugin instance has already been applied to a player object.");this.player=t,this.player.on("editMode.change",this.handleChange),this.config.enabled&&this.enable()},r.prototype.setEnabled=function(t){t!==this.config.enabled&&this.player.emit("editMode.change",t)},r.prototype.play=function(t){if(!!this.config.enabled){for(var e=0;e<this.player.currentNode.children.length;e++){var i=this.player.currentNode.children[e],n=i.getProperty("B")||i.getProperty("W");if(n.x===t.x&&n.y===t.y){this.player.next(e);return}}this.player.game.isValid(t.x,t.y)&&this.player.play(t.x,t.y)}},r.prototype.enable=function(){var t=this;this.saveGameState(),this.config.showVariations?this.player.rootNode.setProperty(W.VARIATIONS_STYLE,0):this.player.rootNode.setProperty(W.VARIATIONS_STYLE,2),this.config.enabled=!0;var e=-1,i=-1,n=new Y("B");n.opacity=.35;var o=new Y("W");o.opacity=.35;var a=null;this._boardMouseMoveEvent=function(l){if(e!==l.x||i!==l.y){if(t.player.game.isValid(l.x,l.y)){var u=t.player.game.turn===s.Color.BLACK?n:o;u.setPosition(l.x,l.y),a?t.player.emit("board.updateTemporaryObject",u):(t.player.emit("board.addTemporaryObject",u),a=u)}else t._boardMouseOutEvent();e=l.x,i=l.y}},this._boardMouseOutEvent=function(){a&&(t.player.emit("board.removeTemporaryObject",a),a=null),e=-1,i=-1},this._boardClickEvent=function(l){t._boardMouseOutEvent(),l!=null&&t.play(l)},this._nodeChange=function(){var l={x:e,y:i};t._boardMouseOutEvent(),t._boardMouseMoveEvent(l)},this.player.on("board.mouseMove",this._boardMouseMoveEvent),this.player.on("board.mouseOut",this._boardMouseOutEvent),this.player.on("board.click",this._boardClickEvent),this.player.on("applyNodeChanges",this._nodeChange)},r.prototype.disable=function(){this.player.off("board.mouseMove",this._boardMouseMoveEvent),this.player.off("board.mouseOut",this._boardMouseOutEvent),this.player.off("board.click",this._boardClickEvent),this.player.off("applyNodeChanges",this._nodeChange),this.config.enabled=!1,this.restoreGameState()},r.prototype.saveGameState=function(){this.gameStateStack.push({rootNode:this.player.rootNode.cloneNode(),path:this.player.getCurrentPath()})},r.prototype.restoreGameState=function(){var t=this.gameStateStack.pop();t&&(this.player.first(),this.player.loadKifu(t.rootNode),this.player.goTo(t.path))},r}(),It={enableMouseWheel:!0,enableKeys:!0,fastReplay:2e3},Ft=function(r){p(t,r);function t(e){e===void 0&&(e={});var i=r.call(this)||this;return i.components=new Map,i.fastReplayEnabled=!1,i.handleResize=function(){i.emit("resize")},i.handleMouseWheel=function(n){i.config.enableMouseWheel&&(n.deltaY>0?i.next():n.deltaY<0&&i.previous(),n.preventDefault())},i.handleKeydown=function(n){if(i.config.enableKeys&&i.hasFocus())return i.config.fastReplay>=0&&!i.fastReplayTimeout&&(i.fastReplayTimeout=window.setTimeout(function(){i.fastReplayEnabled=!0},i.config.fastReplay)),n.key==="ArrowRight"?(i.next(),i.fastReplayEnabled&&(i.next(),i.next())):n.key==="ArrowLeft"&&(i.previous(),i.fastReplayEnabled&&(i.previous(),i.previous())),!1},i.handleKeyup=function(){window.clearTimeout(i.fastReplayTimeout),i.fastReplayTimeout=null,i.fastReplayEnabled=!1},i.config=z(It,e),window.addEventListener("resize",i.handleResize),document.addEventListener("keydown",i.handleKeydown),document.addEventListener("keyup",i.handleKeyup),i}return t.prototype.render=function(e,i){i.innerHTML="";var n=this.createWrapper();i.appendChild(n),n.appendChild(e.element),e.create(this),this.components.set(i,e)},t.prototype.clear=function(e){var i=this.components.get(e);i&&typeof i.destroy=="function"&&i.destroy();var n=e.firstChild;n.removeEventListener("wheel",this.handleMouseWheel),e.removeChild(n),this.components.delete(e)},t.prototype.createWrapper=function(){var e=document.createElement("div");return e.className="wgo-player",e.tabIndex=1,e.addEventListener("wheel",this.handleMouseWheel),e},t.prototype.hasFocus=function(){var e,i;try{for(var n=N(this.components.keys()),o=n.next();!o.done;o=n.next()){var a=o.value;if(a.firstChild===document.activeElement)return!0}}catch(l){e={error:l}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return!1},t}(Ht),et=function(){function r(t,e){var i=this;e===void 0&&(e=[]),this.direction=t,this.children=e,this.element=document.createElement("div"),this.element.className="wgo-player__container wgo-player__container--"+this.direction,this.children.forEach(function(n){return i.element.appendChild(n.element)})}return r.prototype.create=function(t){this.children.forEach(function(e){return e.create(t)})},r.prototype.destroy=function(){this.children.forEach(function(t){return typeof t.destroy=="function"&&t.destroy()})},r}(),Kt={gameInfoProperties:{DT:"Date",KM:"Komi",HA:"Handicap",AN:"Annotations",CP:"Copyright",GC:"Game comments",GN:"Game name",ON:"Fuseki",OT:"Overtime",TM:"Basic time",RE:"Result",RO:"Round",RU:"Rules",US:"Recorder",PC:"Place",EV:"Event",SO:"Source"},hideResult:!0},vt=function(){function r(t){t===void 0&&(t={}),this.config=z(Kt,t),this.printInfo=this.printInfo.bind(this),this.element=document.createElement("div"),this.element.className="wgo-player__box wgo-player__box--content";var e=document.createElement("div");e.innerHTML="Game information",e.className="wgo-player__box__title",this.element.appendChild(e);var i=document.createElement("div");i.className="wgo-player__box__content",this.element.appendChild(i),this.infoTable=document.createElement("table"),this.infoTable.className="wgo-player__box__game-info",i.appendChild(this.infoTable)}return r.prototype.create=function(t){this.player=t,this.player.on("beforeInit",this.printInfo),this.printInfo()},r.prototype.destroy=function(){this.player.off("beforeInit",this.printInfo),this.player=null},r.prototype.addInfo=function(t,e,i){var n=document.createElement("tr");n.dataset.propIdent=t,this.infoTable.appendChild(n);var o=document.createElement("th");o.textContent=this.config.gameInfoProperties[t],n.appendChild(o);var a=document.createElement("td");if(i){var l=document.createElement("a");l.href="#",l.addEventListener("click",function(u){u.preventDefault(),a.textContent=e}),l.textContent="show",a.appendChild(l)}else a.textContent=e;n.appendChild(a)},r.prototype.removeInfo=function(t){var e=this.infoTable.querySelector("[data-id='"+t+"']");this.infoTable.removeChild(e)},r.prototype.printInfo=function(){var t=this;this.infoTable.innerHTML="",this.player.rootNode&&this.player.rootNode.forEachProperty(function(e,i){t.config.gameInfoProperties[e]&&t.addInfo(e,i,t.config.hideResult&&e===W.RESULT)})},r}(),ve={menuItems:[]},q=function(){function r(t){t===void 0&&(t={}),this.config=z(ve,t),this.update=this.update.bind(this),this.createDOM()}return r.prototype.createDOM=function(){var t=this;this.element=document.createElement("div"),this.element.className="wgo-player__control-panel";var e=document.createElement("form");if(e.className="wgo-player__button-group",this.element.appendChild(e),e.addEventListener("submit",function(a){a.preventDefault(),t.player.goTo(parseInt(t.moveNumber.value,10))}),this.first=document.createElement("button"),this.first.type="button",this.first.className="wgo-player__button",this.first.innerHTML='<span class="wgo-player__icon-to-end wgo-player__icon--reverse"></span>',this.first.addEventListener("click",function(){return t.player.first()}),e.appendChild(this.first),this.previous=document.createElement("button"),this.previous.type="button",this.previous.className="wgo-player__button",this.previous.innerHTML='<span class="wgo-player__icon-play wgo-player__icon--reverse"></span>',this.previous.addEventListener("click",function(){return t.player.previous()}),e.appendChild(this.previous),this.moveNumber=document.createElement("input"),this.moveNumber.className="wgo-player__button wgo-player__move-number",this.moveNumber.value="0",this.moveNumber.addEventListener("blur",function(a){t.player.goTo(parseInt(t.moveNumber.value,10))}),e.appendChild(this.moveNumber),this.next=document.createElement("button"),this.next.type="button",this.next.className="wgo-player__button",this.next.innerHTML='<span class="wgo-player__icon-play"></span>',this.next.addEventListener("click",function(){return t.player.next()}),e.appendChild(this.next),this.last=document.createElement("button"),this.last.type="button",this.last.className="wgo-player__button",this.last.innerHTML='<span class="wgo-player__icon-to-end"></span>',this.last.addEventListener("click",function(){return t.player.last()}),e.appendChild(this.last),this.config.menuItems.length){var i=document.createElement("div");i.className="wgo-player__menu-wrapper",this.element.appendChild(i);var n=document.createElement("button");n.type="button",n.className="wgo-player__button wgo-player__button--menu",n.innerHTML='<span class="wgo-player__icon-menu"></span>',i.appendChild(n);var o=document.createElement("div");o.className="wgo-player__menu",this.createMenuItems(o),i.appendChild(o)}},r.prototype.create=function(t){this.player=t,this.player.on("applyNodeChanges",this.update),this.player.currentNode&&this.update()},r.prototype.destroy=function(){this.player.off("applyNodeChanges",this.update),this.player=null},r.prototype.update=function(){this.moveNumber.value=String(this.player.getCurrentPath().depth),this.player.currentNode.parent?(this.first.disabled=!1,this.previous.disabled=!1):(this.first.disabled=!0,this.previous.disabled=!0),this.player.currentNode.children.length===0?(this.next.disabled=!0,this.last.disabled=!0):(this.next.disabled=!1,this.last.disabled=!1)},r.prototype.createMenuItems=function(t){this.config.menuItems.forEach(function(e){var i=document.createElement("a");i.className="wgo-player__menu-item",i.tabIndex=0,i.textContent=e.name,i.href="javascript: void(0)",e.defaultChecked&&e.defaultChecked()&&i.classList.add("wgo-player__menu-item--checked"),i.addEventListener("click",function(n){n.preventDefault();var o=e.handleClick();e.checkable&&(o?i.classList.add("wgo-player__menu-item--checked"):i.classList.remove("wgo-player__menu-item--checked")),i.blur()}),t.appendChild(i)})},r.menuItems={download:function(t){return{name:"Download SGF",handleClick:function(){var e=t.rootNode.getProperty(W.GAME_NAME)||"game",i=t.rootNode.toSGF(),n=document.createElement("a");n.setAttribute("href","data:application/x-go-sgf;charset=utf-8,"+encodeURIComponent(i)),n.setAttribute("download",e+".sgf"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},displayCoordinates:function(t){return{name:"Display coordinates",checkable:!0,handleClick:function(){return t.setCoordinates(!t.config.coordinates),t.config.coordinates},defaultChecked:function(){return t.config.coordinates}}},editMode:function(t){return{name:"Edit mode",checkable:!0,handleClick:function(){return t.setEnabled(!t.config.enabled),t.config.enabled},defaultChecked:function(){return t.config.enabled}}},gameInfo:function(t,e){return{name:"Game info",handleClick:function(){var i=document.createElement("div");i.className="wgo-player__overlay";var n=document.createElement("div");n.className="wgo-player__overlay__close",n.addEventListener("click",function(){i.parentElement.removeChild(i),l.destroy()}),i.appendChild(n);var o=document.createElement("div");o.className="wgo-player__modal",i.appendChild(o);var a=document.createElement("div");a.className="wgo-player__modal__content",o.appendChild(a);var l=new vt({hideResult:!1});l.create(t),a.appendChild(l.element);var u=document.createElement("div");u.className="wgo-player__wgo-info",u.innerHTML='Game viewed in open source JS player <a href="https://github.com/waltheri/wgo.js" target="_blank">WGo</a>.',a.appendChild(u),e(i)}}}},r}(),ge=function(r){p(t,r);function t(e,i,n){i===void 0&&(i=0),n===void 0&&(n=0);var o=r.call(this,"custom",i,n)||this;return o.handler=e,o}return t}(Y),be=function(r){p(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(dt),Ut={B:s.Color.BLACK,W:s.Color.WHITE},Yt={coordinates:!0,currentMoveBlackMark:new lt({color:"rgba(255,255,255,0.8)",fillColor:"rgba(0,0,0,0)"}),currentMoveWhiteMark:new lt({color:"rgba(0,0,0,0.8)",fillColor:"rgba(0,0,0,0)"}),variationDrawHandler:new mt({color:"#33f"}),highlightCurrentMove:!0,showVariations:!0,showCurrentVariations:!1},Xt=function(){function r(t){t===void 0&&(t={}),this.config=z(Yt,t),this.viewportStack=[],this.applyNodeChanges=this.applyNodeChanges.bind(this),this.clearNodeChanges=this.clearNodeChanges.bind(this),this.applyMarkupProperty=this.applyMarkupProperty.bind(this),this.applyLabelMarkupProperty=this.applyLabelMarkupProperty.bind(this),this.applyLineMarkupProperty=this.applyLineMarkupProperty.bind(this),this.applyViewportProperty=this.applyViewportProperty.bind(this),this.clearViewportProperty=this.clearViewportProperty.bind(this),this.applyMoveProperty=this.applyMoveProperty.bind(this),this.addTemporaryBoardObject=this.addTemporaryBoardObject.bind(this),this.removeTemporaryBoardObject=this.removeTemporaryBoardObject.bind(this),this.updateTemporaryBoardObject=this.updateTemporaryBoardObject.bind(this),this.setCoordinates=this.setCoordinates.bind(this),this.createDOM()}return r.prototype.createDOM=function(){var t=this;this.element=document.createElement("div"),this.element.className="wgo-player__board",this.stoneBoardsObjects=[],this.temporaryBoardObjects=[],this.board=new zt(this.element,{coordinates:this.config.coordinates,theme:this.config.theme}),this.board.on("click",function(e,i){t.handleBoardClick(i)}),this.board.on("mousemove",function(e,i){if(!i){t.boardMouseX!=null&&(t.boardMouseX=null,t.boardMouseY=null,t.handleBoardMouseOut());return}(i.x!==t.boardMouseX||i.y!==t.boardMouseY)&&(t.boardMouseX=i.x,t.boardMouseY=i.y,t.handleBoardMouseMove(i))}),this.board.on("mouseout",function(e,i){if(!i&&t.boardMouseX!=null){t.boardMouseX=null,t.boardMouseY=null,t.handleBoardMouseOut();return}})},r.prototype.create=function(t){this.player=t,this.player.on("applyNodeChanges",this.applyNodeChanges),this.player.on("clearNodeChanges",this.clearNodeChanges),this.player.on("applyNodeChanges.CR",this.applyMarkupProperty),this.player.on("applyNodeChanges.TR",this.applyMarkupProperty),this.player.on("applyNodeChanges.SQ",this.applyMarkupProperty),this.player.on("applyNodeChanges.SL",this.applyMarkupProperty),this.player.on("applyNodeChanges.MA",this.applyMarkupProperty),this.player.on("applyNodeChanges.DD",this.applyMarkupProperty),this.player.on("applyNodeChanges.LB",this.applyLabelMarkupProperty),this.player.on("applyNodeChanges.LN",this.applyLineMarkupProperty),this.player.on("applyNodeChanges.AR",this.applyLineMarkupProperty),this.player.on("applyGameChanges.VW",this.applyViewportProperty),this.player.on("clearGameChanges.VW",this.clearViewportProperty),this.player.on("applyNodeChanges.B",this.applyMoveProperty),this.player.on("applyNodeChanges.W",this.applyMoveProperty),this.player.on("board.addTemporaryObject",this.addTemporaryBoardObject),this.player.on("board.removeTemporaryObject",this.removeTemporaryBoardObject),this.player.on("board.updateTemporaryObject",this.updateTemporaryBoardObject),this.player.on("board.setCoordinates",this.setCoordinates)},r.prototype.destroy=function(){this.player.off("applyNodeChanges",this.applyNodeChanges),this.player.off("clearNodeChanges",this.clearNodeChanges),this.player.off("applyNodeChanges",this.applyNodeChanges),this.player.off("clearNodeChanges",this.clearNodeChanges),this.player.off("applyNodeChanges.CR",this.applyMarkupProperty),this.player.off("applyNodeChanges.TR",this.applyMarkupProperty),this.player.off("applyNodeChanges.SQ",this.applyMarkupProperty),this.player.off("applyNodeChanges.SL",this.applyMarkupProperty),this.player.off("applyNodeChanges.MA",this.applyMarkupProperty),this.player.off("applyNodeChanges.DD",this.applyMarkupProperty),this.player.off("applyNodeChanges.LB",this.applyLabelMarkupProperty),this.player.off("applyNodeChanges.LN",this.applyLineMarkupProperty),this.player.off("applyNodeChanges.AR",this.applyLineMarkupProperty),this.player.off("applyGameChanges.VW",this.applyViewportProperty),this.player.off("clearGameChanges.VW",this.clearViewportProperty),this.player.off("applyNodeChanges.B",this.applyMoveProperty),this.player.off("applyNodeChanges.W",this.applyMoveProperty),this.player.off("board.addTemporaryObject",this.addTemporaryBoardObject),this.player.off("board.removeTemporaryObject",this.removeTemporaryBoardObject),this.player.off("board.updateTemporaryObject",this.updateTemporaryBoardObject),this.player.off("board.setCoordinates",this.setCoordinates),this.player=null},r.prototype.updateStones=function(){var t=this;this.stoneBoardsObjects=this.stoneBoardsObjects.filter(function(a){return t.player.game.getStone(a.x,a.y)!==Ut[a.type]?(t.board.removeObject(a),!1):!0});for(var e=this.player.game.position,i=function(a){for(var l=function(d){var g=e.get(a,d);if(g&&!n.stoneBoardsObjects.some(function(A){return A.x===a&&A.y===d&&g===Ut[A.type]})){var L=new Y(g===s.Color.B?"B":"W",a,d);n.board.addObject(L),n.stoneBoardsObjects.push(L)}},u=0;u<e.size;u++)l(u)},n=this,o=0;o<e.size;o++)i(o)},r.prototype.addVariationMarkup=function(){var t=this,e=this.getVariations();e.length>1&&(e.forEach(function(i,n){if(i){var o=new be(String.fromCodePoint(65+n),i.x,i.y);o.handler=t.config.variationDrawHandler,t.addTemporaryBoardObject(o)}}),this.boardMouseX!=null&&this.handleVariationCursor(this.boardMouseX,this.boardMouseY,e))},r.prototype.clearTemporaryBoardObjects=function(){this.temporaryBoardObjects.length&&(this.board.removeObject(this.temporaryBoardObjects),this.temporaryBoardObjects=[])},r.prototype.handleBoardClick=function(t){this.player.emit("board.click",t);var e=this.getVariations();if(e.length>1){var i=e.findIndex(function(n){return n&&n.x===t.x&&n.y===t.y});i>=0&&(this.shouldShowCurrentVariations()?(this.player.previous(),this.player.next(i)):this.player.next(i))}},r.prototype.handleBoardMouseMove=function(t){this.player.emit("board.mouseMove",t),this.handleVariationCursor(t.x,t.y,this.getVariations())},r.prototype.handleBoardMouseOut=function(){this.player.emit("board.mouseOut"),this.removeVariationCursor()},r.prototype.handleVariationCursor=function(t,e,i){if(i.length>1){var n=i.findIndex(function(o){return o&&o.x===t&&o.y===e});if(n>=0){this.element.style.cursor="pointer";return}}this.removeVariationCursor()},r.prototype.removeVariationCursor=function(){this.element.style.cursor&&(this.element.style.cursor="")},r.prototype.applyNodeChanges=function(){this.updateStones(),this.addVariationMarkup()},r.prototype.clearNodeChanges=function(){this.clearTemporaryBoardObjects(),this.removeVariationCursor()},r.prototype.applyMarkupProperty=function(t){var e=this;t.value.forEach(function(i){var n=new at(t.propIdent,i.x,i.y,e.player.game.getStone(i.x,i.y));n.zIndex=10,e.addTemporaryBoardObject(n)})},r.prototype.applyLabelMarkupProperty=function(t){var e=this;t.value.forEach(function(i){var n=new dt(i.text,i.x,i.y,e.player.game.getStone(i.x,i.y));n.zIndex=10,e.addTemporaryBoardObject(n)})},r.prototype.applyLineMarkupProperty=function(t){var e=this;t.value.forEach(function(i){var n=new Nt(t.propIdent,i[0],i[1]);n.zIndex=10,e.addTemporaryBoardObject(n)})},r.prototype.applyViewportProperty=function(t){var e=this.board.getViewport();if(this.viewportStack.push(e),t.value){var i=Math.min(t.value[0].x,t.value[1].x),n=Math.min(t.value[0].y,t.value[1].y),o=Math.max(t.value[0].x,t.value[1].x),a=Math.max(t.value[0].y,t.value[1].y);this.board.setViewport({left:i,top:n,right:this.board.getSize()-o-1,bottom:this.board.getSize()-a-1})}else this.board.setViewport({top:0,right:0,bottom:0,left:0})},r.prototype.clearViewportProperty=function(){var t=this.viewportStack.pop();t&&this.board.setViewport(t)},r.prototype.applyMoveProperty=function(t){if(this.config.highlightCurrentMove){if(!t.value||Ce(t.value,this.player.currentNode.properties)||this.getVariations().length>1&&this.shouldShowCurrentVariations())return;var e=new ge(t.propIdent==="B"?this.config.currentMoveBlackMark:this.config.currentMoveWhiteMark,t.value.x,t.value.y);e.zIndex=10,this.addTemporaryBoardObject(e)}},r.prototype.addTemporaryBoardObject=function(t){this.temporaryBoardObjects.push(t),this.board.addObject(t)},r.prototype.removeTemporaryBoardObject=function(t){this.temporaryBoardObjects=this.temporaryBoardObjects.filter(function(e){return e!==t}),this.board.removeObject(t)},r.prototype.updateTemporaryBoardObject=function(t){this.board.updateObject(t)},r.prototype.setCoordinates=function(t){this.config.coordinates=t,this.board.setCoordinates(t)},r.prototype.getVariations=function(){if(this.shouldShowVariations())if(this.shouldShowCurrentVariations()){if(this.player.currentNode.parent)return this.player.currentNode.parent.children.map(function(t){return t.getProperty("B")||t.getProperty("W")})}else return this.player.currentNode.children.map(function(t){return t.getProperty("B")||t.getProperty("W")});return[]},r.prototype.shouldShowVariations=function(){var t=this.player.rootNode.getProperty(W.VARIATIONS_STYLE);return t!=null?!(t&2):this.config.showVariations},r.prototype.shouldShowCurrentVariations=function(){var t=this.player.rootNode.getProperty(W.VARIATIONS_STYLE);return t!=null?!!(t&1):this.config.showCurrentVariations},r}();function qt(r,t){return t&&r.x===t.x&&r.y===t.y}function Ce(r,t){for(var e=Object.keys(t),i=0;i<e.length;i++)if(!(e[i]==="B"||e[i]==="W")){var n=t[e[i]];if(Array.isArray(n)){for(var o=0;o<n.length;o++)if(qt(r,n[o]))return!0}else if(qt(r,n))return!0}return!1}var F=function(){function r(t,e){this.params=t,this.component=e,this.resize=this.resize.bind(this),this.visible=!0,this.element=this.component.element}return r.prototype.create=function(t){this.player=t,this.player.on("resize",this.resize),this.component.create(this.player),this.resize()},r.prototype.resize=function(){var t=this.shouldRenderComponent();if(this.visible&&!t){var e=this.createPlaceholder();this.element.parentElement.replaceChild(e,this.element),this.element=e,this.visible=!1}else if(!this.visible&&t){var i=this.component.element;this.element.parentElement.replaceChild(i,this.element),this.element=i,this.visible=!0}},r.prototype.destroy=function(){this.player.off("resize",this.resize),this.player=null,typeof this.component.destroy=="function"&&this.component.destroy()},r.prototype.shouldRenderComponent=function(){var t=this.element.parentElement.offsetWidth,e=this.element.parentElement.offsetHeight;return!(this.params.minWidth!=null&&this.params.minWidth>t||this.params.minHeight!=null&&this.params.minHeight>e||this.params.maxWidth!=null&&this.params.maxWidth<t||this.params.maxHeight!=null&&this.params.maxHeight<e||this.params.orientation==="portrait"&&t<e)},r.prototype.createPlaceholder=function(){return document.createComment(" WGo component placeholder for "+(this.component.constructor?this.component.constructor.name:"unknown")+" "+JSON.stringify(this.params)+" ")},r}(),Jt={formatMoves:!0,formatNicks:!0},gt=function(){function r(t){t===void 0&&(t={}),this.config=z(Jt,t),this.setComments=this.setComments.bind(this),this.clearComments=this.clearComments.bind(this),this.element=document.createElement("div"),this.element.className="wgo-player__box wgo-player__box--content";var e=document.createElement("div");e.innerHTML="Comments",e.className="wgo-player__box__title",this.element.appendChild(e),this.commentsElement=document.createElement("div"),this.commentsElement.className="wgo-player__box__content",this.element.appendChild(this.commentsElement)}return r.prototype.create=function(t){if(this.player=t,this.player.on("applyNodeChanges.C",this.setComments),this.player.on("clearNodeChanges.C",this.clearComments),this.player.currentNode){var e=this.player.currentNode.getProperty("C");e&&this.setComments({value:e})}},r.prototype.destroy=function(){this.player.off("applyNodeChanges.C",this.setComments),this.player.off("clearNodeChanges.C",this.clearComments),this.player=null},r.prototype.setComments=function(t){var e=this;this.commentsElement.innerHTML=this.formatComment(t.value),this.config.formatMoves&&[].forEach.call(this.commentsElement.querySelectorAll(".wgo-player__move-link"),function(i){var n=Ee(i.textContent,e.player.game.size),o=new at("MA",n.x,n.y,e.player.game.getStone(n.x,n.y));o.zIndex=20,i.addEventListener("mouseenter",function(){e.player.emit("board.addTemporaryObject",o)}),i.addEventListener("mouseleave",function(){e.player.emit("board.removeTemporaryObject",o)})})},r.prototype.clearComments=function(){this.commentsElement.textContent=""},r.prototype.formatComment=function(t){var e=t.replace(/</g,"&lt;").replace(/>/g,"&gt;");return e="<p>"+e.replace(/\n/g,"</p><p>")+"</p>",this.config.formatNicks&&(e=e.replace(/(<p>)([^:]{3,}:)\s/g,'<p><span class="wgo-player__nick">$2</span> ')),this.config.formatMoves&&(e=e.replace(/\b[a-zA-Z]1?\d\b/g,'<a href="javascript:void(0)" class="wgo-player__move-link">$&</a>')),e},r}();function Ee(r,t){var e=r.toLowerCase().charCodeAt(0)-97,i=parseInt(r.substr(1),10)-1;return{x:e,y:t-1-i}}var rt=function(){function r(t){this.color=t,this.colorChar=t===s.Color.B?"B":"W",this.colorName=t===s.Color.B?"black":"white",this.setName=this.setName.bind(this),this.setRank=this.setRank.bind(this),this.setTeam=this.setTeam.bind(this),this.setCaps=this.setCaps.bind(this),this.element=document.createElement("div"),this.element.className="wgo-player__box wgo-player__player-tag";var e=document.createElement("div");e.className="wgo-player__player-tag__name",this.element.appendChild(e),this.playerNameElement=document.createElement("span"),e.appendChild(this.playerNameElement),this.playerRankElement=document.createElement("small"),this.playerRankElement.className="wgo-player__player-tag__name__rank",e.appendChild(this.playerRankElement),this.playerCapsElement=document.createElement("div"),this.playerCapsElement.className="wgo-player__player-tag__color wgo-player__player-tag__color--"+this.colorName,this.playerCapsElement.textContent="0",this.element.appendChild(this.playerCapsElement),this.playerTeamElement=document.createElement("div")}return r.prototype.create=function(t){this.player=t,this.player.on("beforeInit.P"+this.colorChar,this.setName),this.player.on("beforeInit."+this.colorChar+"R",this.setRank),this.player.on("beforeInit."+this.colorChar+"T",this.setTeam),this.player.on("applyNodeChanges",this.setCaps),this.initialSet()},r.prototype.destroy=function(){this.player.off("beforeInit.P"+this.colorChar,this.setName),this.player.off("beforeInit."+this.colorChar+"R",this.setRank),this.player.off("beforeInit."+this.colorChar+"T",this.setTeam),this.player.off("applyNodeChanges",this.setCaps),this.player=null},r.prototype.setName=function(t){this.playerNameElement.textContent=t.value||this.colorName},r.prototype.setRank=function(t){this.playerRankElement.textContent=t.value},r.prototype.setTeam=function(t){this.playerTeamElement.textContent=t.value},r.prototype.setCaps=function(){this.playerCapsElement.textContent=this.player.game.position.capCount[this.colorName].toString()},r.prototype.initialSet=function(){this.player.rootNode&&(this.playerNameElement.textContent=this.player.rootNode.getProperty("P"+this.colorChar)||this.colorName,this.playerRankElement.textContent=this.player.rootNode.getProperty(this.colorChar+"R")||"",this.playerTeamElement.textContent=this.player.rootNode.getProperty(this.colorChar+"T")||""),this.player.game&&this.setCaps()},r}(),Se=m(m({},It),{board:Yt,comments:m({enabled:!0},Jt),gameInfo:m({enabled:!0},Kt),sgfFile:null,sgf:null}),Ae=function(r){p(t,r);function t(e,i){i===void 0&&(i={});var n=r.call(this)||this;return n.config=z(Se,i),n.element=e,n.init(),n}return t.prototype.init=function(){var e=this,i=new Dt;this.use(i);var n=new Xt(this.config.board),o={menuItems:[q.menuItems.editMode(i),q.menuItems.displayCoordinates(n),q.menuItems.download(this),q.menuItems.gameInfo(this,function(d){return e.element.firstChild.appendChild(d)})]},a=[],l=[];this.config.gameInfo.enabled&&a.push(new vt(this.config.gameInfo)),this.config.comments.enabled&&(a.push(new gt(this.config.comments)),l.push(new F({maxWidth:649},new gt(this.config.comments))));var u=new et("column",x([new F({maxWidth:749},new et("row",[new rt(s.Color.B),new rt(s.Color.W)])),new et("row",[n,new F({minWidth:650},new et("column",x([new F({minWidth:250},new rt(s.Color.B)),new F({minWidth:250},new rt(s.Color.W)),new F({minWidth:250},new q(o))],a)))]),new F({maxWidth:749},new q(o))],l));this.render(u,this.element),this.config.sgf?this.loadKifu(I.fromSGF(this.config.sgf)):this.config.sgfFile&&fetch(this.config.sgfFile).then(function(d){return d.text()}).then(function(d){return e.loadKifu(I.fromSGF(d))})},t}(Ft);s.BoardBase=_t,s.BoardObject=ft,s.CHINESE_RULES=pt,s.CommentsBox=gt,s.Container=et,s.ControlPanel=q,s.EditMode=Dt,s.FieldBoardObject=Y,s.Game=wt,s.GameInfoBox=vt,s.ING_RULES=ct,s.JAPANESE_RULES=ot,s.KifuNode=I,s.LabelBoardObject=dt,s.LineBoardObject=Nt,s.MarkupBoardObject=at,s.NO_RULES=te,s.PlayerBase=Ht,s.PlayerDOM=Ft,s.PlayerTag=rt,s.Position=At,s.ResponsiveComponent=F,s.SGFParser=V,s.SGFSyntaxError=S,s.SVGBoard=zt,s.SVGBoardComponent=Xt,s.SVGFieldDrawHandler=Z,s.SVGMarkupDrawHandler=Q,s.SVGStoneDrawHandler=$,s.SVG_GRID_MASK=y,s.SVG_NS=c,s.SVG_OBJECTS=f,s.SVG_SHADOWS=H,s.SimplePlayer=Ae,s.goRules=tt,s.propertyValueTypes=h,s.svgDrawHandlers=ae,Object.defineProperty(s,"__esModule",{value:!0})})})(E,E.exports);const Me=_=>{try{const b=_;return!(typeof b.size!="number"||b.grid.length!==b.size*b.size||b.grid.some(s=>s!==E.exports.Color.B&&s!==E.exports.Color.W&&s!==E.exports.Color.E)||typeof b.capCount.black!="number"||typeof b.capCount.white!="number"||b.turn!==E.exports.Color.B&&b.turn!==E.exports.Color.W)}catch{return!1}},_e=(_,b,s,w)=>{const p=xe(_,b),m=`${w||"go"}Board`;p.extraDataListMap[m]||(p.extraDataListMap[m]=[]);const N=p.extraDataListMap[m];return D.exports.useEffect(()=>{const x=()=>{s(N.flatMap(G=>{try{const U=JSON.parse(G);if(Me(U))return[U]}catch{}return[]}))},S=Ne(N,x);return x(),S},[N,s]),{syncUp:D.exports.useCallback(x=>{N.length<x.length?N.push(...x.slice(N.length).map(S=>JSON.stringify(S))):N.length>x.length&&N.splice(x.length,N.length-x.length)},[N])}},ke=_=>{const b=new E.exports.Position(_.size);return b.grid=_.grid,b.capCount=_.capCount,b.turn=_.turn,b},Be=(_,b,s,w)=>{const p=new E.exports.Game(6),m=new E.exports.SVGBoard(_,{height:_.clientHeight,size:6});let N=[],k=null;const x=()=>{N=N.filter(C=>p.getStone(C.x,C.y)!==(C.type==="B"?E.exports.Color.B:E.exports.Color.W)?(m.removeObject(C),!1):!0),k&&m.removeObject(k),k=null;for(let C=0;C<p.position.size;C+=1)for(let v=0;v<p.position.size;v+=1){const T=p.position.get(C,v);if(T&&!N.some(j=>j.x===C&&j.y===v&&T===(j.type==="B"?E.exports.Color.B:E.exports.Color.W))){const j=new E.exports.FieldBoardObject(T===E.exports.Color.B?"B":"W",C,v);m.addObject(j),N.push(j),k===null?(k=new E.exports.MarkupBoardObject("SQ",C,v,T),m.addObject(k)):k&&(m.removeObject(k),k=!1)}}};let S=null;const G=()=>{S&&(m.removeObject(S),S=null)};return m.on("mousemove",(C,v)=>{if(!(v&&p.isValid(v.x,v.y))){G();return}if(!S)S=new E.exports.FieldBoardObject(p.turn===E.exports.Color.B?"B":"W");else{if(S.x===v.x&&S.y===v.y)return;m.removeObject(S)}S.setPosition(v.x,v.y),m.addObject(S)}),m.on("mouseout",G),m.on("click",(C,{x:v,y:T})=>{p.isValid(v,T)&&(G(),p.play(v,T),x(),b(p.turn===E.exports.Color.B?"black":"white"),s(p.position.capCount),w(p.positionStack))}),b(p.turn===E.exports.Color.B?"black":"white"),{syncDown:C=>{if(p.positionStack.length!==C.length){for(;p.positionStack.length<C.length;)p.pushPosition(ke(C[p.positionStack.length]));for(;p.positionStack.length>C.length;)p.popPosition();x(),b(p.turn===E.exports.Color.B?"black":"white"),s(p.position.capCount),G()}},pass:()=>{p.pass(),b(p.turn===E.exports.Color.B?"black":"white"),w(p.positionStack)},undo:()=>{p.popPosition()&&(x(),b(p.turn===E.exports.Color.B?"black":"white"),s(p.position.capCount),w(p.positionStack))},resize:()=>{m.setDimensions(_.clientWidth,_.clientHeight)}}},Le=D.exports.memo(({roomId:_,userId:b,uniqueId:s})=>{const w=D.exports.useRef(),p=D.exports.useMemo(()=>{const P=V=>{!V.length||(w.current?w.current.syncDown(V):setTimeout(()=>{P(V)},1e3))};return P},[]),{syncUp:m}=_e(_,b,p,s),[N,k]=D.exports.useState("black"),[x,S]=D.exports.useState({black:0,white:0}),G=D.exports.useRef(null);return D.exports.useEffect(()=>{if(G.current){const P=G.current,V=Be(P,k,S,m);w.current=V;const C=new MutationObserver(V.resize),v=P.parentNode?.parentNode;return v&&C.observe(v,{attributes:!0,attributeFilter:["style"]}),()=>{C.disconnect(),P.innerHTML=""}}},[m]),bt("div",{className:"GoBoard-container",children:[bt("div",{className:"GoBoard-toolbar",children:["Next Turn: ",N==="black"?"Black":"White",Ct("button",{type:"button",onClick:()=>{w.current&&w.current.pass()},children:"Pass"}),Ct("button",{type:"button",onClick:()=>{w.current&&w.current.undo()},children:"Undo"}),bt("div",{children:["Capture Count: Black ",x.black,", White ",x.white]})]}),Ct("div",{className:"GoBoard-canvas",ref:G})]})});export{Le as GoBoard,Le as default};
