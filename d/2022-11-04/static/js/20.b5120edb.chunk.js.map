{"version":3,"file":"static/js/20.b5120edb.chunk.js","mappings":"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","sources":["states/roomPresets.ts","hooks/useGatherArea.ts","media/capture.ts","states/preference.ts","hooks/useFaceImages.ts","media/audio.ts","hooks/useFaceVideos.ts","components/RegionEditor.tsx","components/MySetting.tsx","utils/excalidraw.ts","components/LinkOpener.tsx","components/Loading.tsx","components/FaceCard.tsx","components/FaceList.tsx","components/GatherArea.tsx","components/SingleRoom.tsx","media/video.ts","states/roomMap.ts","network/room.ts","utils/base64.ts","utils/emoji.ts","utils/sleep.ts","utils/types.ts"],"sourcesContent":["import { RegionData } from \"../hooks/useGatherArea\";\n\nconst createMeeting = (\n  i: number,\n  x: number,\n  y: number,\n  w: number,\n  h: number\n) => ({\n  [`meeting${i}`]: {\n    type: \"meeting\",\n    position: [x, y],\n    size: [w, h],\n    zIndex: 0,\n    background: \"\",\n    border: \"\",\n    iframe: \"\",\n  },\n});\n\nconst createGoBoard = (i: number, x: number, y: number) => ({\n  [`gomeeting${i}`]: {\n    type: \"meeting\",\n    position: [x, y],\n    size: [250, 150],\n    zIndex: 0,\n    background: \"\",\n    border: \"\",\n    iframe: \"\",\n  },\n  [`gobard${i}`]: {\n    type: \"goboard\",\n    position: [x, y],\n    size: [250, 150],\n    zIndex: 0,\n    background: \"rgba(140, 140, 140, 0.2)\",\n    border: \"\",\n    iframe: \"\",\n  },\n});\n\nconst intro: Record<string, RegionData> = {\n  background: {\n    type: \"default\",\n    position: [36, 36],\n    size: [800, 500],\n    zIndex: -100,\n    background:\n      \"url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDY2Ny4yOTIyOTgzMDU3OTI3IDQxOC4xNDczNjEzODYyNzcyIiB3aWR0aD0iMTMzNC41ODQ1OTY2MTE1ODUzIiBoZWlnaHQ9IjgzNi4yOTQ3MjI3NzI1NTQ1Ij4KICA8IS0tIHN2Zy1zb3VyY2U6ZXhjYWxpZHJhdyAtLT4KICAKICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgQGZvbnQtZmFjZSB7CiAgICAgICAgZm9udC1mYW1pbHk6ICJWaXJnaWwiOwogICAgICAgIHNyYzogdXJsKCJodHRwczovL2V4Y2FsaWRyYXcuY29tL1ZpcmdpbC53b2ZmMiIpOwogICAgICB9CiAgICAgIEBmb250LWZhY2UgewogICAgICAgIGZvbnQtZmFtaWx5OiAiQ2FzY2FkaWEiOwogICAgICAgIHNyYzogdXJsKCJodHRwczovL2V4Y2FsaWRyYXcuY29tL0Nhc2NhZGlhLndvZmYyIik7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSI2NjcuMjkyMjk4MzA1NzkyNyIgaGVpZ2h0PSI0MTguMTQ3MzYxMzg2Mjc3MiIgZmlsbD0iI2ZmZmZmZiI+PC9yZWN0PjxnPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUzLjQ5Nzc3MzUzMDI3OTc0NCAyMDMuNDAxNzY0NDE1NzM2MjQpIHJvdGF0ZSgwIC0xOS42MDg3MTQwNDM1Njc1NDUgLTI1LjY3MDMzNTAxNDg0OTk2OCkiPjxwYXRoIGQ9Ik0wLjA0MDc4OTI4NTY3NDY5MTIgMC45Mzk2MDg4MDMwMTg5Mjc0IEMtNi4zODU5NzU3NzkzNTIyODkgLTcuODM1OTk0ODM4NjU1MDIwNCwgLTMxLjkzNzUxNjQ0NjY5ODIxIC00My40NTIxNDcxOTExNjcsIC0zOC42NTQ4NTA0MzU2NzUzODUgLTUyLjI4MDI3ODgzMjcxODg4IE0tMS4zOTY5MzUwNjg2ODU1NjE1IDAuMzg3Mjk5NDc5MjY0NzY2MTYgQy03LjkxNjAyNzI0NzQ2MDEzNjUgLTguMjcwNDExODcyNjUxNDUsIC0zMy4xNzk2MDIyNzkxNDg3NDYgLTQyLjUxNzM2NTQxMTEyODk3LCAtMzkuMjU4MjE3MzcyODA5Nzk2IC01MS4wNjU3MDEyNDgwNjEwNiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIj48L3BhdGg+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUzLjQ5Nzc3MzUzMDI3OTc0NCAyMDMuNDAxNzY0NDE1NzM2MjQpIHJvdGF0ZSgwIC0xOS42MDg3MTQwNDM1Njc1NDUgLTI1LjY3MDMzNTAxNDg0OTk2OCkiPjxwYXRoIGQ9Ik0tMTIuODE5NTU5MjAxNTg1NTczIC0zMy4xOTc5NDQ4NTk4MDkxMyBDLTIyLjcyOTA5MTEzNzk5NDczIC00MC43NzA0MDI4NDQ1NjY0NiwgLTI5LjU3NzAxMzE2ODExNjA3IC00NC40MzUyOTM5NjAyODc3OSwgLTQxLjE3OTY5NDcyNjAxMDExIC01MC42OTkwMTc1ODA1MzU0MSBNLTE0LjgzMjg2MTc1NzgyNDY0MiAtMzMuMzI1NjM3MDc1ODg1MDggQy0yMy4wOTQ1OTE4MzE5MjYwOTUgLTM5LjQ0ODUwODEzMzYwMzIzLCAtMjkuNDgyNTU4MTQwMzcxMTc1IC00NS4xNjMzNTk5OTQ5MDM5MywgLTM4LjU0OTkxMTY1MzUwMTI0IC01MC40NDAzMjQ1MDQ3OTY1NjQiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1My40OTc3NzM1MzAyNzk3NDQgMjAzLjQwMTc2NDQxNTczNjI0KSByb3RhdGUoMCAtMTkuNjA4NzE0MDQzNTY3NTQ1IC0yNS42NzAzMzUwMTQ4NDk5NjgpIj48cGF0aCBkPSJNLTI5LjQyMDQ3NTMwMjAzMDM1OCAtMjEuMTM0MzgwNDE5MjM3MTU0IEMtMzQuNTE3NjY0NzMwMTM4MzY0IC0zMi4yMzY3OTEyMjA5NzQ4MSwgLTM2LjUxNTcxMjE4OTA1OTA5NCAtMzkuNDI1OTkyMzI0NDMyNDM2LCAtNDEuMTc5Njk0NzI2MDEwMTEgLTUwLjY5OTAxNzU4MDUzNTQxIE0tMzEuNDMzNzc3ODU4MjY5NDI2IC0yMS4yNjIwNzI2MzUzMTMxMSBDLTM0LjY3MzY3MzM5NDc0NDQ1IC0zMS4xMTQxMTM5MjIyMzUwMDYsIC0zNS45MjU4ODQ3MzQ2NzkxNDQgLTQwLjU2MTAxOTUyMzE0NTQ1NCwgLTM4LjU0OTkxMTY1MzUwMTI0IC01MC40NDAzMjQ1MDQ3OTY1NjQiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDguNTA3MTUxMDU3MjU0MzA1IDIwNy4wODIxNjEzODY5ODAyNikgcm90YXRlKDAgMjYuODczNjY2OTA1NTM0NjM0IDcuNjMwNzk0MzA2NTA5ODQxKSI+PHRleHQgeD0iMCIgeT0iMTIuMjYxNTg4NjEzMDE5NjgiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjEzLjI3MDk0NjYyMDAxNzA5MnB4IiBmaWxsPSJibGFjayIgdGV4dC1hbmNob3I9InN0YXJ0IiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIj5GYWNlIExpc3Q8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwIDEwKSByb3RhdGUoMCA5MS45NTMyMDg4MTIzODY0OSA2Mi4xODA5MDgwMjEzMTE4MzYpIj48cGF0aCBkPSJNMzEuMDkwNDU0MDEwNjU1OTE1IDAgTTMxLjA5MDQ1NDAxMDY1NTkxNSAwIEM2MS4wMjY0NzI3NDM3Nzc3NDUgMCwgOTAuOTYyNDkxNDc2ODk5NTcgMCwgMTUyLjgxNTk2MzYxNDExNzEgMCBNMTUyLjgxNTk2MzYxNDExNzEgMCBDMTczLjU0MjkzMjk1NDU1NDM3IDAsIDE4My45MDY0MTc2MjQ3NzMgMTAuMzYzNDg0NjcwMjE4NjQsIDE4My45MDY0MTc2MjQ3NzMgMzEuMDkwNDU0MDEwNjU1OTE1IE0xODMuOTA2NDE3NjI0NzczIDMxLjA5MDQ1NDAxMDY1NTkxNSBDMTgzLjkwNjQxNzYyNDc3MyA1Mi42MjY4Mjg3MDA3OTU0MTQsIDE4My45MDY0MTc2MjQ3NzMgNzQuMTYzMjAzMzkwOTM0OTIsIDE4My45MDY0MTc2MjQ3NzMgOTMuMjcxMzYyMDMxOTY3NzQgTTE4My45MDY0MTc2MjQ3NzMgOTMuMjcxMzYyMDMxOTY3NzQgQzE4My45MDY0MTc2MjQ3NzMgMTEzLjk5ODMzMTM3MjQwNTAyLCAxNzMuNTQyOTMyOTU0NTU0MzcgMTI0LjM2MTgxNjA0MjYyMzY2LCAxNTIuODE1OTYzNjE0MTE3MSAxMjQuMzYxODE2MDQyNjIzNjYgTTE1Mi44MTU5NjM2MTQxMTcxIDEyNC4zNjE4MTYwNDI2MjM2NiBDMTIyLjM4MTg1MjIwNjMxMjg2IDEyNC4zNjE4MTYwNDI2MjM2NiwgOTEuOTQ3NzQwNzk4NTA4NiAxMjQuMzYxODE2MDQyNjIzNjYsIDMxLjA5MDQ1NDAxMDY1NTkxNSAxMjQuMzYxODE2MDQyNjIzNjYgTTMxLjA5MDQ1NDAxMDY1NTkxNSAxMjQuMzYxODE2MDQyNjIzNjYgQzEwLjM2MzQ4NDY3MDIxODY0IDEyNC4zNjE4MTYwNDI2MjM2NiwgMCAxMTMuOTk4MzMxMzcyNDA1MDIsIDAgOTMuMjcxMzYyMDMxOTY3NzQgTTAgOTMuMjcxMzYyMDMxOTY3NzQgQzAgNjguNzAxMDc4NjE1NDc1NTQsIDAgNDQuMTMwNzk1MTk4OTgzMzM2LCAwIDMxLjA5MDQ1NDAxMDY1NTkxNSBNMCAzMS4wOTA0NTQwMTA2NTU5MTUgQzAgMTAuMzYzNDg0NjcwMjE4NjQsIDEwLjM2MzQ4NDY3MDIxODY0IDAsIDMxLjA5MDQ1NDAxMDY1NTkxNSAwIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlLWRhc2hhcnJheT0iMyA2Ij48L3BhdGg+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMS44NDU1MTM2Mjc3NzM1OCAyMS40NjQ0OTk0NDQxMDQ5NDUpIHJvdGF0ZSgwIDMwLjg1NDk1MDg5MTUzOTc3MiA3LjYzMDc5NDMwNjUwOTg0MSkiPjx0ZXh0IHg9IjAiIHk9IjEyLjI2MTU4ODYxMzAxOTY4IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIxMy4yNzA5NDY2MjAwMTcwOThweCIgZmlsbD0iYmxhY2siIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciI+RW50cnkgQXJlYTwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjUuOTEzMzg0ODEwNzE0ODkgMTM5LjEwNzQyODcwODQyNTgpIHJvdGF0ZSgwIDU5IDYpIj48dGV4dCB4PSIwIiB5PSIxMCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMTAuNjE2NzU3Mjk2MDEzNjgxcHgiIGZpbGw9ImJsYWNrIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiPllvdSBjYW4gZHJhZyB5b3VyIGF2YXRhcjwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjgwLjMxMjEzNTA1NjYwNzMgMzEuMjA4NDk0OTIwNTQxMTE0KSByb3RhdGUoMCA4NC4xOTkyMzE1Mzg2NjEyNSA1NS4yNTA2ODMyMzI4NjgwODQpIj48cGF0aCBkPSJNMC45NjU4MTM2NDIzNjc3MjA2IDAuNzkwMzMwNzMyMjQxMjcyOSBDNTkuOTI2MDgxODMzNzkyOTcgLTIuNTQwMDEwMzg1OTkwNzcwNiwgMTI0LjAzNTUyNTY2OTEzOTEyIC0xLjM3OTY0NTEwMjUwMTU0MzMsIDE2OC42ODM5NzY0MjQzMzczMiAtMS45ODUyMjYyNDkzMjIyOTUyIE0wLjA5NTA2MDI0MTQwODY0NjEgMC42NTI5MTMwMzY3NTYyMTc1IEM0NC4wNzQ5MTU2NTcwMzQ3NCAyLjI3MDc5MDQ0NjA5MDQyMDUsIDg2Ljk2ODg0NTk3MDQyNjk0IDEuNzY0MTc0NzE3OTUwNTQzMSwgMTY3LjkwMDA1OTIxMjQwOTg0IC0wLjQ1Mjk2MzIwMDM5Nzc4OTUgTTE2OC43MjgyNDgzNzAyOTA3IC0wLjkzNDEyMzEzNDI0MDUwODEgQzE2OC44ODkzMDA0MDE1ODA4NCAyMi41NjAxOTg5NDg1NDU2NDcsIDE2Ni4xOTM3ODU1NDM4MTE4MyA0NS42MTAzMzE5NTk2NzY1MywgMTY2LjQ5ODk0MjU2NjUxNDkgMTEwLjc0Njc4OTI3MDQ2NDMyIE0xNjcuNzg0NjI3MTg4NDA3NzcgLTAuNDcyMTkzODA0NTY5NTQyNCBDMTcwLjE2ODc0NzEyNTkzMjYgMjYuNDEwNDYzNzc4OTc1NzksIDE3MC4xNjQ0MTEzMzUwNjAwNCA1My42NjEwNzQ2NjI5OTcxOTQsIDE2OC41OTY0MTgzOTk3NzQ0MiAxMTAuMDAyNzM2NTQwODk0OTQgTTE2Ny42NTcyNDM0NDMxMzIzMyAxMTEuMDg4NDA0NDcwNTA3MDQgQzEwOC4wOTg4Njc4ODk0NjMyOSAxMTIuMjIzNzg5NzU4MzMzMzcsIDQ1LjEwOTQ2Nzc4NDQwMjY1IDExMy4wMzI5NTQ5MzgwNjI4MywgLTEuNjU0MzU3NjA2NTQ1MDkwNyAxMDkuMDA1MzQwOTI3NjY0MTggTTE2Ny40NDc3NzU2MjEzNzc4MiAxMDkuODY3MTgwNTU4MzA1MjIgQzEwNS43MTM1NTA4NTIyNzQ1NSAxMTAuOTMwNDI4ODY4NjYzMTYsIDQ0LjQ2MTgyMTM5MTA5MzYzNiAxMTEuNTU5NzcwODU4NDE4NzksIDAuODI0NDk1MDU5NDM4MDQ5OCAxMDkuNzAyMzgwNTk5ODM3NzQgTTEuMzcwNDEzNjA2OTg2NDAzNSAxMDkuNzM2NTg5MzA2NDE3ODQgQy0wLjk1ODA3OTU0MjQxNzAyMDUgNzYuMDExNzIyMjI5ODc4MzIsIC0xLjY2OTM5ODY5MDk1NzUxNzQgNDEuMDgxMDY5NDAxOTk2MDIsIDEuNTM1MTAxMTgwODk2MTYzIDAuODY5MTAzMDM4NjgzNTMzNyBNLTAuNzM3NDg1NDI2NDc4MDg3OSAxMTEuMzQyMzQ0OTQxOTU1MDUgQzAuMDAwNDM3MDA0Njg0Nzk5OTAyMDcgNzQuMjg0NjkzMTg4MTU4MzcsIC0xLjY5NDE0NzI3NTU2NzY1NjggMzkuMjQ0MzQ3NzYyMTgxNTMsIDAuODc2NjA3MTkxNzQ4OTE3MSAwLjcwNTc1MjkxMTk3NzQ2OTkiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNTQuNjU5NDg1ODA1NzkyNjYgMTIuMDQ4MzI5Mjg0ODcxMDQ1KSByb3RhdGUoMCA0NC41IDcuNSkiPjx0ZXh0IHg9IjAiIHk9IjEyIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIxMy4yNzA5NDY2MjAwMTcxMXB4IiBmaWxsPSJibGFjayIgdGV4dC1hbmNob3I9InN0YXJ0IiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIj5NZWV0aW5nIEFyZWEgMTwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc1LjAzODY5NzU1NjYwNzMgMzEuOTg5NzQ0OTIwNTQxMTE0KSByb3RhdGUoMCA4NC4xOTkyMzE1Mzg2NjEyNSA1NS4yNTA2ODMyMzI4NjgwODQpIj48cGF0aCBkPSJNMC4zOTU5MTA2NDQ5MDM3NzkwMyAtMC45OTcyNTk4NDk2ODI0NTAzIEM0OS41NDc4MTEzMzM3Nzk3OSAtMi42NDQ4MTQ3MzMxMjI5NTA2LCA5OC4xNDc2MTI3OTQ3NTA1MyAtMS43MDc3MDk3MzMxMDM4NzcsIDE2OC45ODU1MDEwODIwOTM0IDAuOTExNTI4Mjk0OTA2MDIwMiBNLTAuODI3MTc4ODAzMjcyNTQ1MyAtMC43NDgwMTI3NjkwMzU5OTUgQzU0LjQxNDI5ODUwNjE3MDU4IC0xLjg2NzE2Nzk0ODg3NjY3NDQsIDEwOC4wNTAzNDA0NDQyMTQ3OCAtMS45NTM5MTE2OTExMDQyMjg3LCAxNjcuNzY0Mjc3MTY5ODkxNTkgLTAuNzg3OTM3NTk5MjM0MjgzIE0xNzAuMDQ3NDUzMTk2MTk4NjMgLTEuNTk3OTcxNzMxNzk2ODYwNyBDMTY4LjU0NzMyMDQyMDk4MjA2IDI3Ljk1MjgxNjAwNDQ4NDI2LCAxNjcuNTk1MjA5MzU1NTk0MzMgNTUuODI4NzQzNzQwMTU1MDI2LCAxNjcuNjMzNjg1OTE4MDA0MiAxMDkuOTQzMTA5MDEwNzI5OTMgTTE2OS4xNjYwMTM2Njc3NzA2IDAuNDM0NTUxNTE5MzQxNzY2ODMgQzE2Ny45MzM0MDM0NzYxMjUxNiAzNS44OTcxOTM3MjM3NjQzOSwgMTY3Ljg0MjY3NTU4MDYyNjkgNjkuNDc5Mzg1Njc5NDY4NzUsIDE2OS4yMzk0NDE1NTM1NDE0IDExMS4zNzMzOTIwMjcyNTUxNCBNMTcwLjE1MTY3NzQ2MDgyMDM3IDExMS45MTI4NzIyODk2OTExMSBDMTI0LjMyMzg2MTkwNjM1OTYxIDExMS4yNjAyMzI3NTAwNzI3MywgODEuNjUxMTAwNDQ0MzA2MDggMTExLjc3MjIzMTcwMTUwNzgyLCAxLjY5ODQ4MDY4OTg5ODEzMzMgMTA5Ljg2Mjc0ODUzODUyNzYzIE0xNjguOTc3MjQ1MjUxMTI3NDcgMTEwLjg5NTY3ODIwMzkzNjY1IEMxMDYuOTczNTU2MDAyMTU1MzYgMTA4LjcyMDc4NTYzMTcwNDk0LCA0Ni4wMjk0MDk0MDkxMjgwOSAxMDkuMTUzMzI3MDkxNTAzNzUsIC0wLjY2NjYwNDIxODA3MzE4OTMgMTEwLjg0OTE1NTg1NDgxNzQ3IE0tMS45OTM5OTIyNDQ4MjQ3NjcxIDExMC41MDE3MTY1Mjk0MDI4NyBDMS43OTI3ODk2MTkxNDA0NzU3IDc1LjQzOTcxMTg2MzkxMTkxLCAwLjk4OTIzNDMwOTM2Nzk4NDQgNDAuMzA2MjQwNzUyNDk4MSwgMS41MzQwMDE0OTM4MjY1MDg1IC0wLjIxMzg5MTUwMDYwNzEzMjkgTS0wLjY5MzA3NTExNzY1NTA5ODQgMTExLjA3MjM2MjEzNjQ3OTQ2IEMwLjAyNjEwNjAyNDQ1MjQ0MzU4OCA4MC43ODcwMTA1NTUxNTE4LCAtMS4yNzgxNTE0NTc4Mzc4MjQ0IDUyLjAwNDA4MjI2MDI2MjEyLCAtMC42MDIwMzI4NjcyNjAyNzczIC0wLjcyODUzNTUyMDg0NDE2MTUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NDkuODA3OTIzMzA1NzkyNyAxMS42NjE2MTA1MzQ4NzEwNDUpIHJvdGF0ZSgwIDQ0LjUgNy41KSI+PHRleHQgeD0iMCIgeT0iMTIiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjEzLjI3MDk0NjYyMDAxNzExcHgiIGZpbGw9ImJsYWNrIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiPk1lZXRpbmcgQXJlYSAyPC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOTMuMjM3OTE2MzA2NjA3MyAyMjkuMTEwODM4NjcwNTQxMSkgcm90YXRlKDAgMTc3LjY4OTQ2NTkxMzY2MTI1IDg5LjUxODI2MTM1Nzg2ODA2KSI+PHBhdGggZD0iTS0wLjU5MzUyMzcxOTEwNjI2NiAtMC4zNjYwNzgxMzM1MDc5MTI3NCBDODkuNzQ2Nzg5MTQ4NjQ0NzUgMC45MDk2ODU1MTA4ODEwNTA0LCAxNzguNzIxNTM1NjM2MDMzMiAwLjQzMDgxOTU0OTQ1NjcxMjg2LCAzNTUuNDk0NjU0NTY2OTA0IC0wLjgwMjUwMDk0NzMwMTI3ODIgTS0wLjUyNDE2Nzc4NjI0ODIyMjQgMC4yNzI3NTA2OTg1MTYyNzM4IEMxNDEuMzU0MDExMzUyNDM0NzggMC41NzQ1MjE2NDkwODMxNTQ3LCAyODIuNzQxMjAwODQ3MDIxODQgLTAuMDc1OTYwMzk0MTU3Njg4NDYsIDM1NS41NDU1OTkwMjYxNDY3NiAtMC40OTM5OTc1NDc1MDg2NDQxNiBNMzU3LjE4NzE0MTUwOTIwNTk2IDAuMDg5NTU0MTk2MjIzNjE2NiBDMzUzLjU4ODY4NTY2NjY4MDMgNjAuOTYwNDM3Mjg5MjU3ODEsIDM1NS4zNDAwNzE1MzQyNzYgMTI0LjA1MDE5ODE3NDY1MDQsIDM1Ny4yMDIyMjQ0MDQ5NjE3IDE3OS4xOTI1Mzc5Mzg2MjgzIE0zNTQuNTcxNDIzMDkzMjY3NjQgMC43NDU4OTg0Mzc2ODYyNjQ1IEMzNTQuMTkxNTA5OTM5MDY4NyA0NC41NjcxODg3MDAzNjQwMSwgMzU0LjQwMDc4MjIzNDMwNTI3IDg5LjIwNjE3OTM0OTA4OTExLCAzNTYuMjc2Mjk2ODYzNzQzIDE3OS43NDQxOTU3NzA4NTU5NSBNMzU2LjMwNTUzMDUxNTM2ODEgMTc4LjcxMTQ5MDQ2NDIwODMgQzI0NC45MDc2MTgzOTU3MzgyNCAxNzguNzQwMzE2Mzg5MTY1NDMsIDEzNS4yMDM5MzYxODk5ODQ1MiAxNzguNTkyNDcxMTExNTc3MiwgMC41NzUzNzQ0NjQ0MjM2ODA4IDE4MC4xOTIwNTQzODI3MTUyNyBNMzU1LjE0NDkwODA1Njc5NzkzIDE3OS4yNTQ1OTQ0MTE0Njk0NyBDMjUyLjkwNTc2NzY2NjE2Mzc0IDE4MC42MDg1ODg1OTkxNzcsIDE0OS42NzkyMDgwODA1MTE4IDE4MS4zNjMyMDE2NjI1NTg3NCwgLTAuNDYwMDQ4MTI4MjE4MDk2NSAxNzguNDU1MzMxNDI4NTAwMjQgTTAuNzY5OTA2NDI1ODQ4NjAzMiAxNzkuMTg5NjA0ODUzNjYzNTUgQzAuNTQzOTkwMDA5OTg2MDk0NiAxMjMuODQ4MjQ5Nzk4MTM0MTMsIC0wLjUwMzQ1NjA2MjExNTQ5ODQgNjYuMjAwMjU5ODM5NjUwNiwgLTAuMjQwNDEyNzQ3NDg3NDI1OCAtMC45NjM3MzM5NjU1MzA5OTE2IE0wLjg4ODYwMTkzMTc0MzMyMzggMTc4Ljc0MDM2OTg5NzcxOTQzIEMxLjMxNzU2MjMzNDk0NzU1MDcgMTI4Ljc0MzMxMzY0MjcwMzE2LCAxLjI1MjgxOTIwMzU0ODM5NiA3OS40MTc1MzQ0MzM4OTA1MSwgLTAuNTA3ODY3NDUyNjg4NTE1MiAwLjczMDE5MTI3MjY4MzQ0MTYiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjEuNTQ2MjA0NTU1NzkyNjYgMTUxLjM3MjU0ODAzNDg3MTA0KSByb3RhdGUoMCAxOTcuODczMDQ2ODc1IDYuNTAyODcwMDg1MDkzODg5KSI+PHRleHQgeD0iMCIgeT0iMTAuMDA1NzQwMTcwMTg3Nzk0IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIxMC44ODA1MTA4MDI4MDg3MjRweCIgZmlsbD0iYmxhY2siIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciI+RHJhZyB5b3UgYXZhdGFyIGludG8gYSBtZWV0aW5nIGFyZWEgYW5kIHlvdSBjYW4gdGFsayB3aXRoIG90aGVycyBpbiB0aGUgc2FtZSBhcmVhPC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1ODEuMDMwNTc5NTU1NzkyNyAyMDYuMjQzNjQxNzg0ODcxMDQpIHJvdGF0ZSgwIDI5LjUgNy41KSI+PHRleHQgeD0iMCIgeT0iMTIiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjEzLjI3MDk0NjYyMDAxNzExcHgiIGZpbGw9ImJsYWNrIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiPkNoYXQgQXJlYTwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQuNjMyNDQ3NTU2NjA3MzAzIDI1My41NjM5NjM2NzA1NDExKSByb3RhdGUoMCAxMTYuMjU1ODcyMTYzNjYxMjUgNzYuOTU3NzE0NDgyODY4MDYpIj48cGF0aCBkPSJNMS4xMzg4NTQxNzQyNTE2MjE2IDEuMDkwMzgyOTA5MDMzODU4NCBDNTcuODAwMDQ1MDg4OTY3MzggLTIuOTg2OTUwOTgwMDcxMjU5LCAxMTguNTY3NzA5MzQwMzk2NjggLTIuNzQ1NTE2MzE5NTY3MzYyNiwgMjMzLjAzNDkyMDQwODQ3NTIgLTAuODYwNDQzODk4MjY1MjQyMyBNLTAuMzg4NjE3MjcwMzg0NTM3NzUgMC41MzIwOTc5MDI3Mjg5MDc2IEM3My4yNjc5NTc3ODIxNTg1NSAwLjU2NTUyMzg3OTk0NzI3NTYsIDE0Ni4xODk4NTE1NjY0ODE5IDEuMzg0NDA0NjM0NzM3NjA3MywgMjMyLjExODExNjI2OTMwOTM1IDAuNTUwNDI3NzA0NzE0MTAzOCBNMjM0LjMyMjI5MTE0ODMwNTggMC45MDU1OTU2ODQ0MjQwNDI3IEMyMzEuOTQxNzIwMDI1MDM1NCA0OC45MTEwMjMxMjI1NDg2MiwgMjM1LjAwNzM0NDA4MzI4MjAyIDEwMC40NjkzMzE4MDE1MTc5MiwgMjMzLjc4MjY1MjA5MjU3Njg4IDE1My45MDQxNjU1NTk4MzE5NCBNMjMxLjYyMDczMTEwNDU3NTk1IC0wLjA5OTI3NTE5ODc2NTA5OTA1IEMyMzMuMDM5NjcyODQyMTU3NTYgNDguMTE5NDM3ODI5Njc2NCwgMjMyLjY5OTQ0NTMyNzY1MjE3IDk3LjUxMjI1NjUwMjM0Mzk3LCAyMzIuOTcxNzIyMTQ1MDQ0MTcgMTUzLjUwNDY2ODIwODIyMjc3IE0yMzMuMjE3NzQxOTI4MjM3NDQgMTU0LjgxOTg4MDU1MTY4MjEzIEMxNTguMzA2MzgxNzk2ODY0IDE1NC42NDYzMzQ0MDcxMzQ2NywgODMuNTc0Nzc2MTMxODI5NSAxNTMuNzE2ODYzNzYzODUyODQsIC0xLjAwMDI5OTg2NjM0MDg3NjYgMTUyLjUyNDcyMTgzMzYwNTcyIE0yMzIuMTM5Mzg2NTg5MDQwMiAxNTQuNDI0MzgyOTg4ODk2NyBDMTUyLjU2NjcyMTMwNjMzNzY4IDE1NC45MDI5MTczMjUwNTY1NiwgNzQuMDM1MjQxMTg1MzU0NjggMTU0LjExOTYxNzI0MzMzMTAyLCAtMC41NTcwMTk3NDcyMDI5MDczIDE1My40NzAyNzgzNDQ2MDEyIE0tMS4yNDQ1ODkwMjUxNTQ3MDk4IDE1Mi4zNTg1OTU3MjI3Mzg1OCBDLTMuMDgxNzg3MDM3Nzk3NTExIDEwNC44NjgxNTc5NTc3ODc4NiwgLTIuNDA1MDE0MTQ1MzIyMzgzIDU3LjIzMTUwNDc1Mzk5NDM2LCAxLjQ5MDYyNDY3MTgwMTkyNDcgMS45NDM1MzI1NTA3MDc0NTk0IE0tMC4wMzg1NTgwMjM5ODE3NTAwMSAxNTQuNjgxMDUzMzQyNjgxMyBDMC40OTg0MjQ1ODc0MjE1MDMyIDEwNi4yMzM5OTIzNDgwODk1NCwgMC40NTEzNDcwMjEwMzYyMzQwMyA1Ny41NzkxNDAwMjUwNjc1OSwgLTAuOTM1MDcwMjY0MTUzMTgyNSAtMC43NzY3MjA5MzgyNzI3NzQyIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEyLjk4MzcwNDU1NTc5MjY2IDIzMC4wODM0ODU1MzQ4NzEwNCkgcm90YXRlKDAgNzEgNy41KSI+PHRleHQgeD0iMCIgeT0iMTIiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjEzLjI3MDk0NjYyMDAxNzExcHgiIGZpbGw9ImJsYWNrIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiPlZpZGUvU2NyZWVuIFNoYXJlIEFyZWE8L3RleHQ+PC9nPjwvc3ZnPg==) left top / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n  },\n  chat: {\n    type: \"chat\",\n    position: [392, 313],\n    size: [415, 208],\n    zIndex: 0,\n    background: \"rgba(135, 206, 235, 0.2)\",\n    border: \"\",\n    iframe: \"\",\n  },\n  ...createMeeting(1, 382, 82, 180, 115),\n  ...createMeeting(2, 614, 82, 180, 115),\n  share: {\n    type: \"media\",\n    position: [69, 343],\n    size: [272, 177],\n    zIndex: 0,\n    background: \"rgba(0, 240, 0, 0.2)\",\n    border: \"\",\n    iframe: \"\",\n  },\n};\n\nconst phone: Record<string, RegionData> = {\n  ...createMeeting(0, 45, 40, 45, 500),\n  share1: {\n    type: \"media\",\n    position: [100, 40],\n    size: [250, 250],\n    zIndex: 0,\n    background: \"rgba(0, 240, 0, 0.2)\",\n    border: \"\",\n    iframe: \"\",\n  },\n  share2: {\n    type: \"media\",\n    position: [100, 300],\n    size: [250, 250],\n    zIndex: 0,\n    background: \"rgba(0, 240, 0, 0.2)\",\n    border: \"\",\n    iframe: \"\",\n  },\n  share3: {\n    type: \"media\",\n    position: [360, 40],\n    size: [800, 550],\n    zIndex: 0,\n    background: \"rgba(0, 240, 0, 0.2)\",\n    border: \"\",\n    iframe: \"\",\n  },\n};\n\nconst igo: Record<string, RegionData> = {\n  chat: {\n    type: \"chat\",\n    position: [45, 200],\n    size: [240, 310],\n    zIndex: 0,\n    background: \"rgba(135, 206, 235, 0.2)\",\n    border: \"\",\n    iframe: \"\",\n  },\n  ...createGoBoard(1, 300, 40),\n  ...createGoBoard(2, 300, 200),\n  ...createGoBoard(3, 300, 360),\n  ...createGoBoard(4, 560, 40),\n  ...createGoBoard(5, 560, 200),\n  ...createGoBoard(6, 560, 360),\n  ...createGoBoard(7, 820, 40),\n  ...createGoBoard(8, 820, 200),\n  ...createGoBoard(9, 820, 360),\n};\n\nconst office1: Record<string, RegionData> = {\n  background: {\n    type: \"default\",\n    position: [0, 0],\n    size: [1021, 676],\n    zIndex: -100,\n    background:\n      \"url(https://user-images.githubusercontent.com/17561803/111254880-55862c80-8659-11eb-88f1-3aaa42ba2b68.png) left top / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n  },\n  chat: {\n    type: \"chat\",\n    position: [40, 480],\n    size: [380, 190],\n    zIndex: 0,\n    background: \"white\",\n    border: \"skyblue solid 3px\",\n    iframe: \"\",\n  },\n  ...createMeeting(1, 77, 244, 273, 230),\n  ...createMeeting(2, 297, 41, 135, 125),\n  ...createMeeting(3, 385, 321, 113, 75),\n  share: {\n    type: \"media\",\n    position: [540, 405],\n    size: [480, 270],\n    zIndex: 0,\n    background: \"rgba(0, 240, 0, 0.3)\",\n    border: \"\",\n    iframe: \"\",\n  },\n  go: {\n    type: \"goboard\",\n    position: [820, 95],\n    size: [200, 120],\n    zIndex: 0,\n    background: \"rgba(0,240,0,0.6)\",\n    border: \"\",\n    iframe: \"\",\n  },\n  go2: {\n    type: \"goboard\",\n    position: [820, 220],\n    size: [200, 120],\n    zIndex: 0,\n    background: \"rgba(0,100,240,0.6)\",\n    border: \"\",\n    iframe: \"\",\n  },\n};\n\nconst office2: Record<string, RegionData> = {\n  background: {\n    type: \"default\",\n    position: [0, 0],\n    size: [1120, 740],\n    zIndex: -100,\n    background:\n      \"url(https://user-images.githubusercontent.com/17561803/118205142-ab7d2200-b49a-11eb-863a-3a9a5560d7df.png) left top / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n  },\n  chat: {\n    type: \"chat\",\n    position: [85, 530],\n    size: [375, 200],\n    zIndex: 0,\n    background: \"rgba(206,206,206,0.9)\",\n    border: \"#2C2F33 solid 2px\",\n    iframe: \"\",\n  },\n  ...createMeeting(1, 220, 180, 240, 180),\n  ...createMeeting(2, 863, 230, 250, 230),\n  ...createMeeting(3, 650, 47, 160, 160),\n  share: {\n    type: \"media\",\n    position: [600, 480],\n    size: [510, 250],\n    zIndex: 0,\n    background: \"rgba(0,0,0,0.2)\",\n    border: \"limegreen solid 2px\",\n    iframe: \"\",\n  },\n  ...createGoBoard(10, 865, 5),\n};\n\nconst office3: Record<string, RegionData> = {\n  background: {\n    type: \"default\",\n    position: [0, 0],\n    size: [1120, 740],\n    zIndex: -100,\n    background:\n      \"url(https://user-images.githubusercontent.com/17561803/120201967-fc459680-c260-11eb-8b1f-6bb108476f2f.png) left top / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n  },\n  chat: {\n    type: \"chat\",\n    position: [56, 340],\n    size: [250, 394],\n    zIndex: 0,\n    background: \"rgba(167,194,211,0.9)\",\n    border: \"#2C2F33 solid 3px\",\n    iframe: \"\",\n  },\n  ...createMeeting(1, 575, 295, 200, 130),\n  ...createMeeting(2, 516, 555, 200, 180),\n  ...createMeeting(3, 441, 373, 100, 100),\n  share: {\n    type: \"media\",\n    position: [763, 643],\n    size: [350, 90],\n    zIndex: 0,\n    background: \"rgba(167,194,211,0.6)\",\n    border: \"#2C2F33 solid 3px\",\n    iframe: \"\",\n  },\n  go: {\n    type: \"goboard\",\n    position: [320, 594],\n    size: [180, 140],\n    zIndex: 0,\n    background: \"rgba(167,194,211,0.6)\",\n    border: \"#2C2F33 solid 3px\",\n    iframe: \"\",\n  },\n  movable: {\n    type: \"default\",\n    position: [244, 109],\n    size: [36, 36],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/17561803/120613305-12d23480-c491-11eb-91ba-d338c3ba631e.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n};\n\nconst office4: Record<string, RegionData> = {\n  background: {\n    type: \"default\",\n    position: [0, 0],\n    size: [1120, 740],\n    zIndex: -100,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919537-78c7d05e-26f4-43f6-9fdd-4db8e7fbc098.jpg) left top / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n  },\n  chat: {\n    type: \"chat\",\n    position: [60, 460],\n    size: [230, 270],\n    zIndex: 0,\n    background: \"rgba(255,255,255,0.3)\",\n    border: \"#deca54 solid 1px\",\n    iframe: \"\",\n  },\n  ...createMeeting(1, 480, 580, 220, 150),\n  ...createMeeting(2, 160, 300, 250, 140),\n  ...createMeeting(3, 830, 190, 140, 70),\n  movie: {\n    type: \"default\",\n    position: [763, 289],\n    size: [109, 63],\n    zIndex: 0,\n    background: \"\",\n    border: \"\",\n    iframe: \"https://www.youtube.com/embed/ofrC1WFeoLw\",\n  },\n  share: {\n    type: \"media\",\n    position: [820, 590],\n    size: [290, 140],\n    zIndex: 0,\n    background: \"rgba(255,255,255,0.3)\",\n    border: \"#deca54 solid 1px\",\n    iframe: \"\",\n  },\n  go: {\n    type: \"goboard\",\n    position: [292, 590],\n    size: [160, 140],\n    zIndex: 0,\n    background: \"rgba(255,255,255,0.3)\",\n    border: \"#deca54 solid 1px\",\n    iframe: \"\",\n  },\n  BeachChair: {\n    type: \"default\",\n    position: [959, 422],\n    size: [35, 63],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919528-eac984b0-ce64-4ab1-8973-c429e9a10052.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  BeachChair2: {\n    type: \"default\",\n    position: [1068, 423],\n    size: [35, 63],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919528-eac984b0-ce64-4ab1-8973-c429e9a10052.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  ChairA: {\n    type: \"default\",\n    position: [367, 317],\n    size: [35, 48],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919531-82d14682-c684-4da7-bc83-8ae17861150e.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  ChairB: {\n    type: \"default\",\n    position: [174, 330],\n    size: [35, 48],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919533-6a09f353-16c2-465d-b09f-ff64b0357418.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  ChairC: {\n    type: \"default\",\n    position: [345, 374],\n    size: [35, 48],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919534-d4a669f9-c228-4a55-9b2a-df04bd2dd0d1.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  Digda: {\n    type: \"default\",\n    position: [119, 409],\n    size: [26, 22],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919535-97212807-b151-4937-8e08-b4fdd1f497e7.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  Kintone: {\n    type: \"default\",\n    position: [907, 110],\n    size: [46, 28],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919536-99b58589-238f-44e9-b2a2-f20a615e730c.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  BlockA: {\n    type: \"default\",\n    position: [400, 500],\n    size: [22, 19],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126926610-244ca224-89b8-4418-b457-5d23ca34d69e.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  BlockB: {\n    type: \"default\",\n    position: [430, 500],\n    size: [22, 19],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126926292-dd184ddb-2a78-4720-8b69-2daa6e911f08.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  BlockC: {\n    type: \"default\",\n    position: [460, 500],\n    size: [22, 19],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919530-aeff42a1-a033-4eb1-a395-bc3700b9a54d.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n  BlockD: {\n    type: \"default\",\n    position: [490, 500],\n    size: [22, 19],\n    zIndex: 0,\n    background:\n      \"url(https://user-images.githubusercontent.com/52230939/126919529-b82d5f24-71ae-482b-987d-55d68829a490.png) center center / contain no-repeat\",\n    border: \"\",\n    iframe: \"\",\n    movable: true,\n  },\n};\n\nexport const roomPresets: Record<string, Record<string, RegionData>> = {\n  intro,\n  phone,\n  igo,\n  office1,\n  office2,\n  office3,\n  office4,\n};\n","import { useCallback, useState, useRef, useEffect } from \"react\";\nimport { useSnapshot } from \"valtio\";\n\nimport { getRoomState } from \"../states/roomMap\";\nimport { roomPresets } from \"../states/roomPresets\";\nimport { getRoomPresetFromUrl } from \"../utils/url\";\n\nconst getInitialPosition = (uid: string): [number, number] => [\n  parseInt(uid.slice(0, 2), 16) / 2 + 50,\n  parseInt(uid.slice(2, 4), 16) / 2 + 30,\n];\n\nexport type AvatarData = {\n  position: [left: number, top: number];\n};\n\nconst isAvatarData = (x: unknown): x is AvatarData => {\n  try {\n    const obj = x as AvatarData;\n    if (\n      typeof obj.position[0] === \"number\" &&\n      typeof obj.position[1] === \"number\"\n    ) {\n      return true;\n    }\n    return false;\n  } catch (e) {\n    return false;\n  }\n};\n\nexport type RegionData = {\n  type: \"default\" | \"meeting\" | \"chat\" | \"media\" | \"goboard\";\n  position: [left: number, top: number];\n  size: [width: number, height: number];\n  zIndex?: number;\n  background?: string;\n  border?: string;\n  iframe?: string;\n  movable?: boolean;\n};\n\nexport const isRegionData = (x: unknown): x is RegionData => {\n  try {\n    const obj = x as RegionData;\n    if (\n      [\"default\", \"meeting\", \"chat\", \"media\", \"goboard\"].includes(obj.type) &&\n      typeof obj.position[0] === \"number\" &&\n      typeof obj.position[1] === \"number\" &&\n      typeof obj.size[0] === \"number\" &&\n      typeof obj.size[1] === \"number\" &&\n      (typeof obj.zIndex === \"undefined\" || typeof obj.zIndex === \"number\") &&\n      (typeof obj.background === \"undefined\" ||\n        typeof obj.background === \"string\") &&\n      (typeof obj.border === \"undefined\" || typeof obj.border === \"string\") &&\n      (typeof obj.iframe === \"undefined\" || typeof obj.iframe === \"string\")\n    ) {\n      return true;\n    }\n    return false;\n  } catch (e) {\n    return false;\n  }\n};\n\nexport type AvatarMap = {\n  [userId: string]: AvatarData;\n};\n\nexport type RegionMap = {\n  [regionId: string]: RegionData;\n};\n\nexport const useGatherArea = (roomId: string, userId: string) => {\n  const roomState = getRoomState(roomId, userId);\n  const { userIdList, gatherAvatarMap, gatherRegionMap } =\n    useSnapshot(roomState);\n\n  const avatarMap: AvatarMap = {};\n  userIdList.forEach(({ userId }) => {\n    const data = gatherAvatarMap[userId];\n    if (!isAvatarData(data)) return;\n    avatarMap[userId] = data;\n  });\n\n  const [myAvatar, setMyAvatar] = useState<AvatarData>({\n    position: getInitialPosition(userId),\n  });\n  const dataToBroadcast = useRef<AvatarData>();\n\n  useEffect(() => {\n    if (!myAvatar) return;\n    if (dataToBroadcast.current) {\n      dataToBroadcast.current = myAvatar;\n    } else {\n      dataToBroadcast.current = myAvatar;\n      setTimeout(() => {\n        roomState.gatherAvatarMap[userId] = dataToBroadcast.current;\n        dataToBroadcast.current = undefined;\n      }, 500);\n    }\n  }, [roomState, userId, myAvatar]);\n\n  const regionMap: RegionMap = {};\n  Object.entries(gatherRegionMap).forEach(([id, data]) => {\n    if (isRegionData(data)) {\n      regionMap[id] = data;\n    }\n  });\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const roomPreset = getRoomPresetFromUrl() || \"\";\n      const preset = roomPresets[roomPreset];\n      if (!preset) return;\n      if (Object.keys(roomState.gatherRegionMap).length > 0) return;\n      Object.entries(preset).forEach(([id, data]) => {\n        roomState.gatherRegionMap[id] = data;\n      });\n    }, 10 * 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [roomState]);\n\n  const timerMap = useRef<{ [id: string]: NodeJS.Timeout }>({});\n  const updateRegion = useCallback(\n    (id: string, data: RegionData | null) => {\n      clearTimeout(timerMap.current[id]);\n      timerMap.current[id] = setTimeout(() => {\n        if (data === null) {\n          delete roomState.gatherRegionMap[id];\n          return;\n        }\n        const found = roomState.gatherRegionMap[id];\n        if (found && isRegionData(found)) {\n          Object.keys(data).forEach((key) => {\n            (found as any)[key as keyof RegionData] =\n              data[key as keyof RegionData];\n          });\n        } else {\n          roomState.gatherRegionMap[id] = data;\n        }\n      }, 500);\n    },\n    [roomState]\n  );\n\n  return {\n    avatarMap,\n    myAvatar,\n    setMyAvatar,\n    regionMap,\n    updateRegion,\n  };\n};\n","import { sleep } from \"../utils/sleep\";\n\nconst captureImage = async (stream: MediaStream, track: MediaStreamTrack) => {\n  if (typeof ImageCapture !== \"undefined\") {\n    const imageCapture = new ImageCapture(track);\n    await sleep(2000);\n    let srcImg: ImageBitmap;\n    try {\n      const blob = await imageCapture.takePhoto();\n      srcImg = await createImageBitmap(blob);\n    } catch (e) {\n      srcImg = await imageCapture.grabFrame();\n    }\n    const srcW = srcImg.width;\n    const srcH = srcImg.height;\n    return { srcImg, srcW, srcH };\n  }\n  const video = document.createElement(\"video\");\n  video.autoplay = true;\n  video.setAttribute(\"playsinline\", \"\");\n  video.style.display = \"block\";\n  video.style.width = \"1px\";\n  video.style.height = \"1px\";\n  video.style.position = \"absolute\";\n  video.style.bottom = \"0\";\n  document.body.appendChild(video);\n  const dispose = () => {\n    document.body.removeChild(video);\n  };\n  video.srcObject = stream;\n  await sleep(2000);\n  const srcImg = video;\n  const srcW = video.videoWidth;\n  const srcH = video.videoHeight;\n  return { srcImg, srcW, srcH, dispose };\n};\n\nexport const takePhoto = async (deviceId?: string, size = 72) => {\n  const constraints = {\n    video: {\n      deviceId,\n      width: 1280,\n      height: 720,\n    },\n  };\n  const stream = await navigator.mediaDevices.getUserMedia(constraints);\n  const [track] = stream.getVideoTracks();\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n  const dstW = size;\n  const dstH = size;\n  canvas.width = dstW;\n  canvas.height = dstH;\n  const { srcImg, srcW, srcH, dispose } = await captureImage(stream, track);\n  const ratio = Math.max(dstW / srcW, dstH / srcH);\n  const width = Math.min(srcW, dstW / ratio);\n  const height = Math.min(srcH, dstH / ratio);\n  const x = (srcW - width) / 2;\n  const y = (srcH - height) / 2;\n  ctx.drawImage(srcImg, x, y, width, height, 0, 0, dstW, dstH);\n  if (dispose) {\n    dispose();\n  }\n  track.stop();\n  return canvas.toDataURL(\"image/jpeg\");\n};\n","import { proxy } from \"valtio\";\n\ntype Preference = {\n  photoSize?: number;\n};\n\nexport const preferenceState = proxy<Preference>({});\n","import { useEffect, useState } from \"react\";\nimport { useSnapshot } from \"valtio\";\n\nimport { isObject } from \"../utils/types\";\nimport { takePhoto } from \"../media/capture\";\nimport { getRoomState } from \"../states/roomMap\";\nimport { preferenceState } from \"../states/preference\";\n\ntype ImageUrl = string;\n\ntype FaceInfo = {\n  nickname: string;\n  message: string;\n  liveMode: boolean;\n  micOn: boolean;\n  speakerOn: boolean;\n};\n\nconst isFaceInfo = (x: unknown): x is FaceInfo =>\n  isObject(x) &&\n  typeof (x as { nickname: unknown }).nickname === \"string\" &&\n  typeof (x as { message: unknown }).message === \"string\" &&\n  typeof (x as { liveMode: unknown }).liveMode === \"boolean\" &&\n  typeof (x as { micOn: unknown }).micOn === \"boolean\" &&\n  typeof (x as { speakerOn: unknown }).speakerOn === \"boolean\";\n\ntype ImageData = {\n  userId: string;\n  image: ImageUrl;\n  info: FaceInfo;\n  updated: number; // in milliseconds\n};\n\nconst isImageData = (x: unknown): x is ImageData =>\n  isObject(x) &&\n  typeof (x as { image: unknown }).image === \"string\" &&\n  isFaceInfo((x as { info: unknown }).info) &&\n  typeof (x as { updated: unknown }).updated === \"number\";\n\nconst TTL = 2 * 60 * 1000; // 2 minutes\n\nlet myImageCache:\n  | {\n      deviceId?: string;\n      photoSize?: number;\n      createdAt: number;\n      promiseUrl: Promise<ImageUrl>;\n    }\n  | undefined;\n\nconst takePhotoWithCache = (\n  deviceId?: string,\n  photoSize?: number\n): Promise<ImageUrl> => {\n  const now = Date.now();\n  if (\n    myImageCache &&\n    myImageCache.deviceId === deviceId &&\n    myImageCache.photoSize === photoSize &&\n    myImageCache.createdAt + TTL > now\n  ) {\n    return myImageCache.promiseUrl;\n  }\n  const promiseUrl = takePhoto(deviceId, photoSize);\n  myImageCache = {\n    deviceId,\n    photoSize,\n    createdAt: now,\n    promiseUrl,\n  };\n  return promiseUrl;\n};\n\nexport const useFaceImages = (\n  roomId: string,\n  userId: string,\n  avatar: string,\n  nickname: string,\n  statusMesg: string,\n  suspended: boolean,\n  liveMode: boolean,\n  micOn: boolean,\n  speakerOn: boolean,\n  deviceId?: string\n) => {\n  const roomState = getRoomState(roomId, userId);\n  const { userIdList, faceImages } = useSnapshot(roomState);\n  const { photoSize } = useSnapshot(preferenceState);\n\n  const tenMinAgo = Date.now() - 10 * 60 * 1000;\n  const roomImages: ImageData[] = [];\n  userIdList.forEach(({ userId }) => {\n    const data = faceImages[userId];\n    if (!isImageData(data)) return;\n    if (data.updated >= tenMinAgo) {\n      roomImages.push(data);\n    }\n  });\n\n  const [myImage, setMyImage] = useState<ImageUrl>();\n\n  useEffect(() => {\n    let didCleanup = false;\n    let timer: NodeJS.Timeout;\n    const loop = async () => {\n      if (didCleanup) return;\n      try {\n        const image = suspended\n          ? avatar\n          : await takePhotoWithCache(deviceId, photoSize);\n        if (didCleanup) return;\n        setMyImage(image);\n        const info: FaceInfo = {\n          nickname,\n          message: statusMesg,\n          liveMode,\n          micOn,\n          speakerOn,\n        };\n        const data: ImageData = {\n          userId,\n          image,\n          info,\n          updated: Date.now(),\n        };\n        roomState.faceImages[userId] = data;\n      } catch (e) {\n        console.error(e);\n      }\n      timer = setTimeout(loop, TTL);\n    };\n    loop();\n    return () => {\n      didCleanup = true;\n      clearTimeout(timer);\n    };\n  }, [\n    roomState,\n    userId,\n    deviceId,\n    avatar,\n    nickname,\n    statusMesg,\n    suspended,\n    liveMode,\n    micOn,\n    speakerOn,\n    photoSize,\n  ]);\n\n  return {\n    myImage,\n    roomImages,\n  };\n};\n\nexport const useFaceImageObsoleted = (\n  updated?: number // in milliseconds\n) => {\n  const [obsoleted, setObsoleted] = useState(false);\n  useEffect(() => {\n    if (updated) {\n      const callback = () => {\n        const twoMinAgo = Date.now() - TTL;\n        setObsoleted(updated < twoMinAgo);\n      };\n      const timer = setInterval(callback, 10 * 1000);\n      callback();\n      return () => clearInterval(timer);\n    }\n    return undefined;\n  }, [updated]);\n  return obsoleted;\n};\n","export const getAudioStream = async (deviceId?: string) => {\n  const constraints = deviceId\n    ? {\n        audio: { deviceId },\n      }\n    : { audio: true };\n  const stream = await navigator.mediaDevices.getUserMedia(constraints);\n  const [track] = stream.getAudioTracks();\n  await track.applyConstraints({\n    echoCancellation: true,\n    echoCancellationType: { ideal: \"system\" },\n    noiseSuppression: { ideal: true },\n  } as MediaTrackConstraints);\n  const dispose = () => {\n    track.stop();\n  };\n  return {\n    stream,\n    dispose,\n  };\n};\n","import { useEffect, useState, useRef } from \"react\";\nimport { useSnapshot } from \"valtio\";\n\nimport { getFaceVideoStream } from \"../media/video\";\nimport { getAudioStream } from \"../media/audio\";\nimport { getRoomState } from \"../states/roomMap\";\n\nconst addTrackToStream = (\n  track: MediaStreamTrack,\n  stream: MediaStream | null,\n  disposeStream: (s: MediaStream) => void\n) => {\n  const newStream = stream || new MediaStream();\n  newStream.addTrack(track);\n  newStream.dispatchEvent(new MediaStreamTrackEvent(\"addtrack\", { track }));\n  track.addEventListener(\"ended\", () => {\n    newStream.removeTrack(track);\n    if (newStream.getTracks().length === 0) {\n      disposeStream(newStream);\n    }\n  });\n  return newStream;\n};\n\nexport const useFaceVideos = (\n  roomId: string,\n  userId: string,\n  videoEnabled: boolean,\n  audioEnabled: boolean,\n  micOn: boolean,\n  videoDeviceId?: string,\n  audioDeviceId?: string,\n  uniqueMediaId?: string\n) => {\n  const videoType = `${uniqueMediaId || \"face\"}Video`;\n  const audioType = `${uniqueMediaId || \"face\"}Audio`;\n  const [faceStream, setFaceStream] = useState<MediaStream | null>(null);\n  const [faceStreamMap, setFaceStreamMap] = useState<{\n    [userId: string]: MediaStream;\n  }>({});\n\n  const isMounted = useRef(true);\n  useEffect(() => {\n    const cleanup = () => {\n      isMounted.current = false;\n    };\n    return cleanup;\n  }, []);\n\n  useEffect(() => {\n    if (!videoEnabled && !audioEnabled) {\n      // clear face stream map immediately\n      setFaceStreamMap({});\n    }\n  }, [videoEnabled, audioEnabled]);\n\n  const onTrack = ([uid, track]: [string, MediaStreamTrack]) => {\n    if (track.readyState === \"ended\") return;\n    if (faceStreamMap[uid]?.getTracks().includes(track)) return;\n    const disposeStream = (s: MediaStream) => {\n      if (isMounted.current) {\n        setFaceStreamMap((prev) => {\n          const { [uid]: oldStream, ...rest } = prev;\n          if (oldStream === s) {\n            return rest;\n          }\n          return prev;\n        });\n      }\n    };\n    setFaceStreamMap((prev) => {\n      const stream = prev[uid];\n      const newStream = addTrackToStream(track, stream, disposeStream);\n      if (stream === newStream) {\n        return prev;\n      }\n      return { ...prev, [uid]: newStream };\n    });\n  };\n\n  const trackMap = useSnapshot(getRoomState(roomId, userId).trackMap);\n  Object.entries(trackMap[videoType] || {}).forEach(onTrack);\n  Object.entries(trackMap[audioType] || {}).forEach(onTrack);\n\n  useEffect(() => {\n    const roomState = getRoomState(roomId, userId);\n    let cleanup: (() => void) | null | false = null;\n    if (videoEnabled) {\n      (async () => {\n        const { stream: videoStream, dispose: disposeVideo } =\n          await getFaceVideoStream(videoDeviceId);\n        const [videoTrack] = videoStream.getVideoTracks();\n        roomState.addMediaType(videoType);\n        roomState.addTrack(videoType, videoTrack);\n        const disposeStream = (s: MediaStream) => {\n          if (isMounted.current) {\n            setFaceStream((prev) => (prev === s ? null : prev));\n          }\n        };\n        setFaceStream((prev) =>\n          addTrackToStream(videoTrack, prev, disposeStream)\n        );\n        const dispose = () => {\n          roomState.removeMediaType(videoType);\n          roomState.removeTrack(videoType);\n          disposeVideo();\n          // XXX we need to manually dispatch ended event, why?\n          videoTrack.dispatchEvent(new Event(\"ended\"));\n        };\n        if (cleanup === false) {\n          dispose();\n        } else {\n          cleanup = dispose;\n        }\n      })();\n    }\n    return () => {\n      if (cleanup) cleanup();\n      cleanup = false;\n    };\n  }, [roomId, userId, videoEnabled, videoDeviceId, videoType]);\n\n  useEffect(() => {\n    const roomState = getRoomState(roomId, userId);\n    let cleanup: (() => void) | null | false = null;\n    if (audioEnabled) {\n      (async () => {\n        const { stream: audioStream, dispose: disposeAudio } =\n          await getAudioStream(audioDeviceId);\n        const [audioTrack] = audioStream.getAudioTracks();\n        roomState.addMediaType(audioType);\n        roomState.addTrack(audioType, audioTrack);\n        const disposeStream = (s: MediaStream) => {\n          if (isMounted.current) {\n            setFaceStream((prev) => (prev === s ? null : prev));\n          }\n        };\n        setFaceStream((prev) =>\n          addTrackToStream(audioTrack, prev, disposeStream)\n        );\n        const dispose = () => {\n          roomState.removeMediaType(audioType);\n          roomState.removeTrack(audioType);\n          disposeAudio();\n          // XXX we need to manually dispatch ended event, why?\n          audioTrack.dispatchEvent(new Event(\"ended\"));\n        };\n        if (cleanup === false) {\n          dispose();\n        } else {\n          cleanup = dispose;\n        }\n      })();\n    }\n    return () => {\n      if (cleanup) cleanup();\n      cleanup = false;\n    };\n  }, [roomId, userId, audioEnabled, audioDeviceId, audioType]);\n\n  useEffect(() => {\n    if (faceStream) {\n      faceStream.getAudioTracks().forEach((track) => {\n        const audioTrack = track;\n        audioTrack.enabled = micOn;\n      });\n      const onaddtrack = (event: MediaStreamTrackEvent) => {\n        const { track } = event;\n        if (track.kind === \"audio\") {\n          track.enabled = micOn;\n        }\n      };\n      faceStream.addEventListener(\"addtrack\", onaddtrack);\n      return () => {\n        faceStream.removeEventListener(\"addtrack\", onaddtrack);\n      };\n    }\n    return undefined;\n  }, [faceStream, micOn]);\n\n  return { faceStream, faceStreamMap };\n};\n","import { memo, useState } from \"react\";\n\nimport \"./RegionEditor.css\";\nimport { getRoomState } from \"../states/roomMap\";\nimport { RegionData } from \"../hooks/useGatherArea\";\n\nexport const RegionEditor = memo<{\n  roomId: string;\n  userId: string;\n}>(({ roomId, userId }) => {\n  const roomState = getRoomState(roomId, userId);\n  const [regionId, setRegionId] = useState(\"\");\n  const [type, setType] = useState<RegionData[\"type\"]>(\"meeting\");\n  const [left, setLeft] = useState(100);\n  const [top, setTop] = useState(100);\n  const [width, setWidth] = useState(100);\n  const [height, setHeight] = useState(100);\n\n  const addRegion = () => {\n    const data: RegionData = {\n      type,\n      position: [left, top],\n      size: [width, height],\n    };\n    roomState.gatherRegionMap[regionId] = data;\n  };\n\n  const [allRegionData, setAllRegionData] = useState<string | null>(null);\n\n  const loadAllRegionData = () => {\n    setAllRegionData(JSON.stringify(roomState.gatherRegionMap, null, 2));\n  };\n\n  const saveAllRegionData = () => {\n    try {\n      Object.entries(JSON.parse(allRegionData || \"\")).forEach(\n        ([key, value]) => {\n          roomState.gatherRegionMap[key] = value;\n        }\n      );\n      setAllRegionData(null);\n    } catch (e) {\n      console.log(\"failed to save all region data\", e);\n    }\n  };\n\n  return (\n    <div className=\"RegionEditor-container\">\n      <label>\n        Region ID:{\" \"}\n        <input value={regionId} onChange={(e) => setRegionId(e.target.value)} />\n      </label>\n      <label>\n        Type:{\" \"}\n        <select\n          value={type}\n          onChange={(e) => setType(e.target.value as RegionData[\"type\"])}\n        >\n          <option value=\"meeting\">Meeting</option>\n          <option value=\"chat\">Chat</option>\n          <option value=\"media\">Media</option>\n          <option value=\"goboard\">Go Board</option>\n        </select>\n      </label>\n      <br />\n      <label>\n        Left:{\" \"}\n        <input\n          type=\"number\"\n          value={left}\n          onChange={(e) => setLeft(Number(e.target.value))}\n        />\n      </label>\n      <label>\n        Top:{\" \"}\n        <input\n          type=\"number\"\n          value={top}\n          onChange={(e) => setTop(Number(e.target.value))}\n        />\n      </label>\n      <label>\n        Width:{\" \"}\n        <input\n          type=\"number\"\n          value={width}\n          onChange={(e) => setWidth(Number(e.target.value))}\n        />\n      </label>\n      <label>\n        Height:{\" \"}\n        <input\n          type=\"number\"\n          value={height}\n          onChange={(e) => setHeight(Number(e.target.value))}\n        />\n      </label>\n      <br />\n      <button type=\"button\" onClick={addRegion} disabled={!regionId}>\n        Add Region (Or overwrite)\n      </button>\n      <hr />\n      <button\n        type=\"button\"\n        className=\"RegionEditor-toggle\"\n        onClick={() => {\n          if (allRegionData) {\n            setAllRegionData(null);\n          } else {\n            loadAllRegionData();\n          }\n        }}\n      >\n        Import/Export {allRegionData ? <>&#9660;</> : <>&#9654;</>}\n      </button>\n      {!!allRegionData && (\n        <div>\n          <label>\n            <textarea\n              value={allRegionData}\n              onChange={(e) => setAllRegionData(e.target.value)}\n            />\n          </label>\n          <br />\n          <button type=\"button\" onClick={saveAllRegionData}>\n            Replace (Be careful)\n          </button>\n        </div>\n      )}\n    </div>\n  );\n});\n","import { memo, useState } from \"react\";\n\nimport \"./MySetting.css\";\nimport { setConfigAvatar } from \"../states/singleRoom\";\nimport { preferenceState } from \"../states/preference\";\n\nconst LOW_RESOLUTION = 24;\n\nexport const MySetting = memo<{\n  statusMesg: string;\n  suspended: boolean;\n  toggleSuspended: () => void;\n  setStatusMesg: (message: string) => void;\n}>(({ statusMesg, suspended, toggleSuspended, setStatusMesg }) => {\n  const [message, setMessage] = useState(statusMesg);\n  const [camera, setCamera] = useState(!suspended);\n  const [lowResPhoto, setLowResPhoto] = useState(\n    preferenceState.photoSize === LOW_RESOLUTION\n  );\n  const [avatar, setAvatar] = useState(\"\");\n  const onChangeAvatar = (files: FileList | null) => {\n    const file = files && files[0];\n    if (!file) {\n      return;\n    }\n    if (file.size > 16 * 1024) {\n      window.alert(`Too large: ${file.size}`);\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = () => {\n      if (typeof reader.result === \"string\") {\n        setAvatar(reader.result);\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  return (\n    <div className=\"MySetting-container\">\n      <h3>Setting</h3>\n      <label>\n        Camera :{\" \"}\n        <button\n          type=\"button\"\n          onClick={() => {\n            setCamera(!camera);\n          }}\n        >\n          {camera ? \"on\" : \"off\"}\n        </button>\n      </label>\n      {camera && (\n        <>\n          {\" \"}\n          <label>\n            Low resolution:{\" \"}\n            <input\n              type=\"checkbox\"\n              checked={lowResPhoto}\n              onChange={() => setLowResPhoto((x) => !x)}\n            />\n          </label>\n          <hr />\n        </>\n      )}\n      <hr />\n      {!camera && (\n        <>\n          <label>\n            Avatar:{\" \"}\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={(e) => onChangeAvatar(e.target.files)}\n            />\n          </label>\n          <hr />\n        </>\n      )}\n      <label>\n        Message:{\" \"}\n        <input\n          type=\"text\"\n          defaultValue={message || \"\"}\n          onChange={(e) => {\n            setMessage(e.target.value);\n          }}\n        />\n      </label>\n      <hr />\n      <button\n        type=\"button\"\n        onClick={() => {\n          if (message !== null) {\n            setStatusMesg(message);\n          }\n          if (suspended === camera) {\n            toggleSuspended();\n          }\n          preferenceState.photoSize = lowResPhoto ? LOW_RESOLUTION : undefined;\n          if (suspended && avatar) {\n            setConfigAvatar(avatar);\n          }\n        }}\n      >\n        update\n      </button>\n    </div>\n  );\n});\n","import { ROOM_ID_PREFIX_LEN } from \"../network/room\";\nimport { importCryptoKey } from \"./crypto\";\n\nexport const generateExcalidrawURL = async (roomId: string) => {\n  const id = roomId.slice(0, 20);\n  const imported = await importCryptoKey(roomId.slice(ROOM_ID_PREFIX_LEN));\n  const key = (await window.crypto.subtle.exportKey(\"jwk\", imported)).k;\n  return `https://excalidraw.com/#room=${id},${key}`;\n};\n","import { memo, useEffect, useState } from \"react\";\n\nimport \"./LinkOpener.css\";\nimport { generateExcalidrawURL } from \"../utils/excalidraw\";\n\nexport const LinkOpener = memo<{\n  roomId: string;\n}>(({ roomId }) => {\n  const [excalidrawUrl, setExcalidrawUrl] = useState<string>();\n  useEffect(() => {\n    (async () => {\n      setExcalidrawUrl(await generateExcalidrawURL(roomId));\n    })();\n  }, [roomId]);\n\n  const appLink = `remote-faces://${window.location.href.replace(\n    /^https:\\/\\//,\n    \"\"\n  )}`;\n\n  return (\n    <div className=\"LinkOpener-container\">\n      <div>\n        <span title=\"Share this link with your colleagues\">Room Link: </span>\n        <input value={window.location.href} readOnly />\n      </div>\n      <div>\n        <a href={appLink} title=\"Open this link in the desktop app\">\n          Open App\n        </a>\n      </div>\n      <div>\n        <a href={excalidrawUrl} target=\"_blank\" rel=\"noreferrer\">\n          Open Excalidraw\n        </a>\n      </div>\n    </div>\n  );\n});\n","import { memo } from \"react\";\n\nimport \"./Loading.css\";\n\nexport const Loading = memo(() => (\n  <div className=\"Loading-container\">\n    <div className=\"loader\">\n      <div>Loading...</div>\n    </div>\n  </div>\n));\n","import { memo } from \"react\";\n\nimport \"./FaceCard.css\";\nimport { useFaceImageObsoleted } from \"../hooks/useFaceImages\";\nimport { BLANK_IMAGE } from \"../media/imagePresets\";\nimport { isEmoji } from \"../utils/emoji\";\n\nexport const FaceCard = memo<{\n  image?: string;\n  nickname: string;\n  statusMesg: string;\n  setStatusMesg?: (mesg: string) => void;\n  updated?: number; // in milliseconds\n  inFaceList?: boolean;\n  liveMode?: boolean;\n  stream?: MediaStream;\n  muted: boolean;\n  micOn: boolean;\n  speakerOn: boolean;\n}>(\n  ({\n    image,\n    nickname,\n    statusMesg,\n    setStatusMesg,\n    updated,\n    inFaceList,\n    liveMode,\n    stream,\n    muted,\n    micOn,\n    speakerOn,\n  }) => {\n    const obsoleted = useFaceImageObsoleted(updated);\n    const updatedDate = updated && new Date(updated);\n    const firstStatusMesgChar: string | undefined = [...statusMesg][0];\n    let emoji = setStatusMesg ? String.fromCodePoint(0x1f4dd) : \"\";\n    if (firstStatusMesgChar) {\n      if (isEmoji(firstStatusMesgChar)) {\n        emoji = firstStatusMesgChar;\n      } else {\n        emoji = String.fromCodePoint(0x1f4ac);\n      }\n    }\n    const editStatusMesg = () => {\n      if (setStatusMesg) {\n        const mesg = window.prompt(\"Enter status message\");\n        if (mesg !== null) {\n          setStatusMesg(mesg);\n        }\n      }\n    };\n    return (\n      <div\n        className=\"FaceCard-container\"\n        style={{\n          opacity: obsoleted ? 0.2 : 1,\n          cursor: inFaceList && setStatusMesg ? \"pointer\" : \"inherit\",\n        }}\n        title={inFaceList ? statusMesg || \"(No status message)\" : undefined}\n        onClick={inFaceList && setStatusMesg ? editStatusMesg : undefined}\n        aria-hidden=\"true\"\n      >\n        {liveMode && stream ? (\n          <video\n            className=\"FaceCard-photo\"\n            ref={(videoEle) => {\n              if (videoEle && videoEle.srcObject !== stream) {\n                videoEle.srcObject = stream;\n              }\n            }}\n            autoPlay\n            playsInline\n            muted={muted}\n          />\n        ) : (\n          <img\n            src={image || BLANK_IMAGE}\n            className=\"FaceCard-photo\"\n            alt=\"faceImage\"\n          />\n        )}\n        <div className=\"FaceCard-name\">{nickname}</div>\n        {inFaceList && <div className=\"FaceCard-mesg\">{emoji}</div>}\n        {inFaceList && updatedDate && (\n          <div className=\"FaceCard-updated\">\n            <span title={updatedDate.toLocaleString()}>\n              {`${updatedDate.getHours()}`.padStart(2, \"0\")}:\n              {`${updatedDate.getMinutes()}`.padStart(2, \"0\")}\n            </span>\n          </div>\n        )}\n        {!inFaceList && liveMode && stream && (\n          <div className=\"FaceCard-mic-speaker-icons\">\n            {micOn && <span title=\"Mic On\">&#x1F3A4;</span>}\n            {speakerOn && <span title=\"Speaker On\">&#x1F508;</span>}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n","import { memo } from \"react\";\nimport { useSnapshot } from \"valtio\";\n\nimport \"./FaceList.css\";\nimport { Loading } from \"./Loading\";\nimport { useFaceImages } from \"../hooks/useFaceImages\";\nimport { FaceCard } from \"./FaceCard\";\nimport { NG_IMAGE } from \"../media/imagePresets\";\n\n// XXX temporary global state for debugging\nimport { getRoomState } from \"../states/roomMap\";\n\nexport const FaceList = memo<{\n  roomId: string;\n  userId: string;\n  avatar: string;\n  nickname: string;\n  statusMesg: string;\n  setStatusMesg: (mesg: string) => void;\n  videoDeviceId?: string;\n  suspended: boolean;\n}>(\n  ({\n    roomId,\n    userId,\n    avatar,\n    nickname,\n    statusMesg,\n    setStatusMesg,\n    videoDeviceId,\n    suspended,\n  }) => {\n    const roomState = getRoomState(roomId, userId);\n    const { userIdList } = useSnapshot(roomState);\n    const { myImage, roomImages } = useFaceImages(\n      roomId,\n      userId,\n      avatar,\n      nickname,\n      statusMesg,\n      suspended,\n      false,\n      false,\n      false,\n      videoDeviceId\n    );\n    return (\n      <div className=\"FaceList-list\">\n        <div className=\"FaceList-item\">\n          <FaceCard\n            image={myImage}\n            nickname={nickname}\n            statusMesg={statusMesg}\n            setStatusMesg={setStatusMesg}\n            inFaceList\n            muted\n            micOn={false}\n            speakerOn={false}\n          />\n        </div>\n        {roomImages.map((item) => (\n          <div key={item.userId} className=\"FaceList-item\">\n            <FaceCard\n              image={\n                userIdList.some(\n                  (x) => x.userId === item.userId && x.peerIndex !== \"closed\"\n                )\n                  ? item.image\n                  : NG_IMAGE\n              }\n              nickname={item.info.nickname}\n              statusMesg={item.info.message}\n              updated={item.updated}\n              inFaceList\n              muted\n              micOn={false}\n              speakerOn={false}\n            />\n          </div>\n        ))}\n        {!roomImages.length && (\n          <div className=\"FaceList-item\">\n            <Loading />\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n","/* eslint jsx-a11y/no-static-element-interactions: off */\n\nimport {\n  ClipboardEvent,\n  DragEvent,\n  Suspense,\n  lazy,\n  memo,\n  useCallback,\n  useRef,\n  useState,\n} from \"react\";\n\nimport \"./GatherArea.css\";\nimport {\n  useGatherArea,\n  RegionData,\n  RegionMap,\n  AvatarData,\n} from \"../hooks/useGatherArea\";\nimport { useFaceImages, useFaceImageObsoleted } from \"../hooks/useFaceImages\";\nimport { useFaceVideos } from \"../hooks/useFaceVideos\";\nimport { RegionEditor } from \"./RegionEditor\";\nimport { MySetting } from \"./MySetting\";\nimport { LinkOpener } from \"./LinkOpener\";\nimport { FaceList } from \"./FaceList\";\nimport { FaceCard } from \"./FaceCard\";\nimport { SuspenseFallback } from \"./SuspenseFallback\";\nimport { rand4 } from \"../utils/crypto\";\nimport { encodeBase64Async } from \"../utils/base64\";\n\nconst MomentaryChat = lazy(() => import(\"./MomentaryChat\"));\nconst MediaShare = lazy(() => import(\"./MediaShare\"));\nconst GoBoard = lazy(() => import(\"./GoBoard\"));\n\ntype OnMouseMove = (\n  e: React.MouseEvent<HTMLDivElement, MouseEvent> | \"ended\"\n) => void;\n\nconst getActiveMeetingRegionId = (avatar: AvatarData, regionMap: RegionMap) => {\n  const regionIdList = Object.keys(regionMap).sort(\n    (a, b) => (regionMap[b].zIndex ?? 0) - (regionMap[a].zIndex ?? 0)\n  );\n  const activeId = regionIdList.find((id) => {\n    const { type, position, size } = regionMap[id] as RegionData;\n    return (\n      type === \"meeting\" &&\n      position[0] <= avatar.position[0] + 36 &&\n      position[1] <= avatar.position[1] + 36 &&\n      avatar.position[0] <= position[0] + size[0] &&\n      avatar.position[1] <= position[1] + size[1]\n    );\n  });\n  return activeId;\n};\n\nconst getMicOn = (avatar: AvatarData, regionMap: RegionMap, id?: string) => {\n  if (!id) return undefined;\n  const { position, size } = regionMap[id];\n  const micOn =\n    position[0] <= avatar.position[0] &&\n    position[1] <= avatar.position[1] &&\n    avatar.position[0] + 36 <= position[0] + size[0] &&\n    avatar.position[1] + 36 <= position[1] + size[1];\n  return micOn;\n};\n\nconst Region = memo<{\n  roomId: string;\n  userId: string;\n  nickname: string;\n  id: string;\n  data: RegionData;\n  highlight?: \"meeting\" | \"active-meeting\" | \"micon-meeting\";\n  updateRegion: (regionId: string, data: RegionData | null) => void;\n  registerOnMouseDrag: (onMouseMove?: OnMouseMove) => void;\n  isSelected: boolean;\n  setSelectedRegionId: (regionId: string) => void;\n}>(\n  ({\n    roomId,\n    userId,\n    nickname,\n    id,\n    data,\n    highlight,\n    updateRegion,\n    registerOnMouseDrag,\n    isSelected,\n    setSelectedRegionId,\n  }) => {\n    let boxShadow: string | undefined;\n    if (isSelected) {\n      boxShadow = \"0 0 0 2px rgb(128, 128, 128, 0.9)\";\n    }\n    if (highlight === \"micon-meeting\") {\n      boxShadow = \"0 0 0 5px rgba(255, 0, 0, 0.6)\";\n    } else if (highlight === \"active-meeting\") {\n      boxShadow = \"0 0 0 3px rgba(255, 0, 0, 0.3)\";\n    } else if (highlight === \"meeting\") {\n      boxShadow = \"0 0 0 1px rgba(255, 0, 0, 0.3)\";\n    }\n    return (\n      <div\n        className=\"GatherArea-region\"\n        style={{\n          left: `${data.position[0]}px`,\n          top: `${data.position[1]}px`,\n          width: `${data.size[0]}px`,\n          height: `${data.size[1]}px`,\n          boxShadow,\n          zIndex: data.type !== \"chat\" ? data.zIndex : undefined,\n          background: data.background,\n          border: data.border,\n        }}\n        onMouseDown={(e) => {\n          if (e.metaKey || e.ctrlKey) {\n            e.preventDefault();\n            e.stopPropagation();\n            setSelectedRegionId(id);\n            return;\n          }\n          if (!data.movable) {\n            return;\n          }\n          e.preventDefault();\n          e.stopPropagation();\n          const target = e.currentTarget;\n          const offset = [\n            e.clientX - parseInt(target.style.left, 10),\n            e.clientY - parseInt(target.style.top, 10),\n          ];\n          registerOnMouseDrag((e) => {\n            if (e === \"ended\") {\n              return;\n            }\n            const left = e.clientX - offset[0];\n            const top = e.clientY - offset[1];\n            target.style.left = `${left}px`;\n            target.style.top = `${top}px`;\n            updateRegion(id, { ...data, position: [left, top] });\n          });\n        }}\n      >\n        {data.iframe && <iframe title={id} src={data.iframe} frameBorder=\"0\" />}\n        {data.type === \"chat\" && (\n          <Suspense fallback={<SuspenseFallback />}>\n            <MomentaryChat\n              roomId={roomId}\n              userId={userId}\n              nickname={nickname}\n              uniqueId={id}\n            />\n          </Suspense>\n        )}\n        {data.type === \"media\" && (\n          <Suspense fallback={<SuspenseFallback />}>\n            <MediaShare\n              roomId={roomId}\n              userId={userId}\n              nickname={nickname}\n              uniqueId={id}\n            />\n          </Suspense>\n        )}\n        {data.type === \"goboard\" && (\n          <Suspense fallback={<SuspenseFallback />}>\n            <GoBoard roomId={roomId} userId={userId} uniqueId={id} />\n          </Suspense>\n        )}\n        {isSelected && (\n          <div\n            className=\"GatherArea-region-delete\"\n            title=\"Delete\"\n            onMouseDown={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              const ok = window.confirm(\"Are you sure to delete it?\");\n              if (ok) {\n                updateRegion(id, null);\n              }\n            }}\n          >\n            &#x274C;\n          </div>\n        )}\n        {isSelected && (\n          <div\n            className=\"GatherArea-region-copy\"\n            title=\"Copy\"\n            onMouseDown={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              const target = (e.target as any).parentNode.parentNode;\n              const left = target.scrollLeft + e.clientX - data.size[0] / 2;\n              const top = target.scrollTop + e.clientY - data.size[1] / 2;\n              updateRegion(`${id}_${rand4()}`, {\n                ...data,\n                position: [left, top],\n              });\n            }}\n          >\n            &#x267B;\n          </div>\n        )}\n        {isSelected && (\n          <div\n            className=\"GatherArea-region-move\"\n            title=\"Move\"\n            onMouseDown={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              const target = e.currentTarget.parentNode as HTMLDivElement;\n              const offset = [\n                e.clientX - parseInt(target.style.left, 10),\n                e.clientY - parseInt(target.style.top, 10),\n              ];\n              registerOnMouseDrag((e) => {\n                if (e === \"ended\") {\n                  return;\n                }\n                const left = e.clientX - offset[0];\n                const top = e.clientY - offset[1];\n                target.style.left = `${left}px`;\n                target.style.top = `${top}px`;\n                updateRegion(id, { ...data, position: [left, top] });\n              });\n            }}\n          >\n            &#x271B;\n          </div>\n        )}\n        {isSelected && (\n          <div\n            className=\"GatherArea-region-resize\"\n            title=\"Resize\"\n            onMouseDown={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              const target = e.currentTarget.parentNode as HTMLDivElement;\n              const offset = [\n                e.clientX - parseInt(target.style.width, 10),\n                e.clientY - parseInt(target.style.height, 10),\n              ];\n              registerOnMouseDrag((e) => {\n                if (e === \"ended\") {\n                  return;\n                }\n                const width = e.clientX - offset[0];\n                const height = e.clientY - offset[1];\n                if (width < 1 || height < 1) {\n                  return;\n                }\n                target.style.width = `${width}px`;\n                target.style.height = `${height}px`;\n                updateRegion(id, { ...data, size: [width, height] });\n              });\n            }}\n          >\n            &#x2198;\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nconst Avatar = memo<{\n  nickname: string;\n  statusMesg: string;\n  image?: string;\n  updated?: number; // in milliseconds\n  position: [left: number, top: number];\n  setPosition?: (nextPosition: [number, number]) => void;\n  registerOnMouseDrag: (onMouseMove?: OnMouseMove) => void;\n  stream?: MediaStream;\n  liveMode: boolean;\n  muted?: boolean;\n  micOn?: boolean;\n}>(\n  ({\n    nickname,\n    statusMesg,\n    image,\n    updated,\n    position,\n    setPosition,\n    registerOnMouseDrag,\n    stream,\n    liveMode,\n    muted,\n    micOn,\n  }) => {\n    const obsoleted = useFaceImageObsoleted(updated);\n    return (\n      <div\n        className=\"GatherArea-avatar\"\n        style={{\n          left: `${position[0]}px`,\n          top: `${position[1]}px`,\n        }}\n        onMouseDown={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          if (setPosition) {\n            const target = e.currentTarget;\n            const offset = [\n              e.clientX - parseInt(target.style.left, 10),\n              e.clientY - parseInt(target.style.top, 10),\n            ];\n            registerOnMouseDrag((e) => {\n              if (e === \"ended\") {\n                return;\n              }\n              const left = e.clientX - offset[0];\n              const top = e.clientY - offset[1];\n              target.style.left = `${left}px`;\n              target.style.top = `${top}px`;\n              setPosition([left, top]);\n            });\n          }\n        }}\n      >\n        {statusMesg && (\n          <div\n            className=\"GatherArea-avatar-balloon\"\n            style={{ opacity: obsoleted ? 0.2 : 1 }}\n          >\n            {statusMesg}\n          </div>\n        )}\n        <FaceCard\n          image={image}\n          nickname={nickname}\n          statusMesg={statusMesg}\n          updated={updated}\n          liveMode={liveMode}\n          stream={stream}\n          muted={!!muted}\n          micOn={!!micOn}\n          speakerOn={liveMode}\n        />\n      </div>\n    );\n  }\n);\n\nexport const GatherArea = memo<{\n  roomId: string;\n  userId: string;\n  avatar: string;\n  nickname: string;\n  statusMesg: string;\n  setStatusMesg: (mesg: string) => void;\n  videoDeviceId?: string;\n  audioDeviceId?: string;\n  toggleSuspended: () => void;\n  suspended: boolean;\n}>(\n  ({\n    roomId,\n    userId,\n    avatar,\n    nickname,\n    statusMesg,\n    setStatusMesg,\n    videoDeviceId,\n    audioDeviceId,\n    toggleSuspended,\n    suspended,\n  }) => {\n    const { myImage, roomImages } = useFaceImages(\n      roomId,\n      userId,\n      avatar,\n      nickname,\n      statusMesg,\n      suspended,\n      false,\n      false,\n      false,\n      videoDeviceId\n    );\n    const { avatarMap, myAvatar, setMyAvatar, regionMap, updateRegion } =\n      useGatherArea(roomId, userId);\n\n    const [selectedRegionId, setSelectedRegionId] = useState<string>();\n\n    const onMouseDragRef = useRef<OnMouseMove>();\n    const registerOnMouseDrag = useCallback((onMouseMove?: OnMouseMove) => {\n      if (onMouseDragRef.current) {\n        onMouseDragRef.current(\"ended\");\n      }\n      onMouseDragRef.current = onMouseMove;\n    }, []);\n\n    const activeMeetingRegionId = getActiveMeetingRegionId(myAvatar, regionMap);\n    const activeMeetingMicOn = getMicOn(\n      myAvatar,\n      regionMap,\n      activeMeetingRegionId\n    );\n\n    const { faceStream, faceStreamMap } = useFaceVideos(\n      roomId,\n      userId,\n      !!activeMeetingRegionId,\n      !!activeMeetingRegionId,\n      !!activeMeetingMicOn,\n      videoDeviceId,\n      audioDeviceId,\n      `gatherArea/meeting/${activeMeetingRegionId}/`\n    );\n\n    const [showModal, setShowModal] = useState<\n      null | \"region-editor\" | \"link-opener\" | \"setting\"\n    >(null);\n\n    const handlePasteOrDrop = async (e: ClipboardEvent | DragEvent) => {\n      e.preventDefault();\n      const dataTransfer =\n        \"clipboardData\" in e ? e.clipboardData : e.dataTransfer;\n      const text = dataTransfer.getData(\"text\");\n      const target = e.currentTarget || (e.target as HTMLDivElement);\n      const clientX = \"clientX\" in e ? e.clientX : target.clientWidth / 2;\n      const clientY = \"clientY\" in e ? e.clientY : target.clientHeight / 2;\n      if (/^http.*\\.(png|jpg|jpeg|gif|svg)$/.test(text)) {\n        const width = 36;\n        const height = 36;\n        updateRegion(`img${rand4()}`, {\n          type: \"default\",\n          position: [\n            target.scrollLeft + clientX - width / 2,\n            target.scrollTop + clientY - height / 2,\n          ],\n          size: [width, height],\n          background: `url(${text}) center center / contain no-repeat`,\n          movable: true,\n        });\n      } else if (/^https:\\/\\/www.youtube.com\\//.test(text)) {\n        const match = /([-0-9a-zA-Z]+)$/.exec(text);\n        if (!match) {\n          window.alert(`Invalid YouTube URL: ${text}`);\n          return;\n        }\n        const width = 160;\n        const height = 120;\n        updateRegion(`mov${rand4()}`, {\n          type: \"default\",\n          position: [\n            target.scrollLeft + clientX - width / 2,\n            target.scrollTop + clientY - height / 2,\n          ],\n          size: [width, height],\n          iframe: `https://www.youtube.com/embed/${match[1]}`,\n          border: \"5px solid #F0F0F020\",\n        });\n      } else if (text) {\n        const html = await encodeBase64Async(\n          new TextEncoder().encode(`\n            <!DOCTYPE html><html>\n            <head>\n              <meta charset=\"utf-8\"/>\n              <style>\n                html, body {\n                  margin: 0; padding: 0;\n                  font: 0.5em -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n                }\n              </style>\n            </head>\n            <body>${text}</body>\n            </html>`)\n        );\n        const width = 80;\n        const height = 15;\n        updateRegion(`text${rand4()}`, {\n          type: \"default\",\n          position: [\n            target.scrollLeft + clientX - width / 2,\n            target.scrollTop + clientY - height / 2,\n          ],\n          size: [width, height],\n          iframe: `data:text/html;base64,${html}`,\n          border: \"5px solid #F0F0F040\",\n          movable: true,\n        });\n      } else {\n        window.alert(\"Unsupported object pasted or dropped\");\n      }\n    };\n\n    return (\n      <div className=\"GatherArea-container\">\n        <div\n          className=\"GatherArea-body\"\n          onDragOver={(e) => e.preventDefault()}\n          onDrop={handlePasteOrDrop}\n          onPaste={handlePasteOrDrop}\n          onMouseDown={() => {\n            setSelectedRegionId(undefined);\n          }}\n          onMouseMove={(e) => {\n            if (onMouseDragRef.current) {\n              onMouseDragRef.current(e);\n            }\n          }}\n          onMouseUp={() => {\n            registerOnMouseDrag();\n          }}\n        >\n          {Object.entries(regionMap).map(([regionId, regionData]) => (\n            <Region\n              key={regionId}\n              roomId={roomId}\n              userId={userId}\n              nickname={nickname}\n              id={regionId}\n              data={regionData}\n              highlight={\n                (regionId === activeMeetingRegionId &&\n                  (activeMeetingMicOn ? \"micon-meeting\" : \"active-meeting\")) ||\n                (regionData.type === \"meeting\" ? \"meeting\" : undefined)\n              }\n              updateRegion={updateRegion}\n              registerOnMouseDrag={registerOnMouseDrag}\n              isSelected={selectedRegionId === regionId}\n              setSelectedRegionId={setSelectedRegionId}\n            />\n          ))}\n          {Object.entries(avatarMap).map(([uid, avatarData]) => {\n            if (uid === userId) {\n              return null;\n            }\n            const imageData = roomImages.find((data) => data.userId === uid);\n            if (!imageData) {\n              return null;\n            }\n            return (\n              <Avatar\n                key={uid}\n                nickname={imageData.info.nickname}\n                statusMesg={imageData.info.message}\n                image={imageData.image}\n                updated={imageData.updated}\n                position={avatarData.position}\n                registerOnMouseDrag={registerOnMouseDrag}\n                stream={faceStreamMap[uid]}\n                liveMode={!!activeMeetingRegionId}\n                micOn={getMicOn(avatarData, regionMap, activeMeetingRegionId)}\n              />\n            );\n          })}\n          <Avatar\n            nickname={nickname}\n            statusMesg={statusMesg}\n            image={myImage}\n            position={myAvatar.position}\n            setPosition={useCallback(\n              (position: [number, number]) =>\n                setMyAvatar((prev) => ({ ...prev, position })),\n              [setMyAvatar]\n            )}\n            registerOnMouseDrag={registerOnMouseDrag}\n            stream={faceStream || undefined}\n            liveMode={!!activeMeetingRegionId}\n            muted\n            micOn={activeMeetingMicOn}\n          />\n        </div>\n        <div className=\"GatherArea-facelist\">\n          <FaceList\n            roomId={roomId}\n            userId={userId}\n            avatar={avatar}\n            nickname={nickname}\n            statusMesg={statusMesg}\n            setStatusMesg={setStatusMesg}\n            videoDeviceId={videoDeviceId}\n            suspended={suspended}\n          />\n        </div>\n        <div className=\"GatherArea-toolbar\">\n          <div>\n            <button\n              type=\"button\"\n              onClick={() =>\n                setShowModal(showModal === \"setting\" ? null : \"setting\")\n              }\n            >\n              {showModal === \"setting\" ? \"Close Setting\" : \"Open Setting\"}\n            </button>\n            {showModal === \"setting\" && (\n              <div className=\"GatherArea-setting\">\n                <MySetting\n                  statusMesg={statusMesg}\n                  suspended={suspended}\n                  toggleSuspended={toggleSuspended}\n                  setStatusMesg={setStatusMesg}\n                />\n              </div>\n            )}\n          </div>\n          <div>\n            <button\n              type=\"button\"\n              onClick={() =>\n                setShowModal(\n                  showModal === \"region-editor\" ? null : \"region-editor\"\n                )\n              }\n            >\n              {showModal === \"region-editor\"\n                ? \"Close Region Editor\"\n                : \"Open Region Editor\"}\n            </button>\n            {showModal === \"region-editor\" && (\n              <div className=\"GatherArea-region-editor\">\n                <RegionEditor roomId={roomId} userId={userId} />\n              </div>\n            )}\n          </div>\n          <div>\n            <button\n              type=\"button\"\n              onClick={() =>\n                setShowModal(showModal === \"link-opener\" ? null : \"link-opener\")\n              }\n            >\n              {showModal === \"link-opener\"\n                ? \"Close Link Opener\"\n                : \"Open Link Opener\"}\n            </button>\n            {showModal === \"link-opener\" && (\n              <div className=\"GatherArea-link-opener\">\n                <LinkOpener roomId={roomId} />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default GatherArea;\n","import { memo, useEffect, useState } from \"react\";\nimport { useSnapshot } from \"valtio\";\n\nimport \"./SingleRoom.css\";\nimport { singleRoomState, toggleConfigTakePhoto } from \"../states/singleRoom\";\nimport { setRoomIdToUrl } from \"../utils/url\";\nimport { GatherArea } from \"./GatherArea\";\n\nexport const SingleRoom = memo(() => {\n  const { roomId, userId, config } = useSnapshot(singleRoomState);\n  const [statusMesg, setStatusMesg] = useState(\"\");\n  useEffect(() => {\n    setRoomIdToUrl(roomId);\n  }, [roomId]);\n\n  const [inactive, setInactive] = useState(false);\n  if (inactive) {\n    throw new Error(\"inactive for too long\");\n  }\n  useEffect(() => {\n    let lastTime = Date.now();\n    const timer = setInterval(() => {\n      const now = Date.now();\n      if (now - lastTime >= 4 * 60 * 60 * 1000) {\n        setInactive(true);\n      }\n      lastTime = now;\n    }, 60 * 60 * 1000);\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  return (\n    <div className=\"SingleRoom-container\">\n      <GatherArea\n        roomId={roomId}\n        userId={userId}\n        avatar={config.avatar}\n        nickname={config.nickname}\n        statusMesg={statusMesg}\n        setStatusMesg={setStatusMesg}\n        suspended={!config.takePhoto}\n        videoDeviceId={config.videoDeviceId}\n        audioDeviceId={config.audioDeviceId}\n        toggleSuspended={toggleConfigTakePhoto}\n      />\n    </div>\n  );\n});\n\nexport default SingleRoom;\n","export const getVideoStream = async (deviceId?: string) => {\n  const constraints = deviceId\n    ? {\n        video: { deviceId },\n      }\n    : { video: true };\n  const stream = await navigator.mediaDevices.getUserMedia(constraints);\n  const [track] = stream.getVideoTracks();\n  const dispose = () => {\n    track.stop();\n  };\n  return {\n    stream,\n    dispose,\n  };\n};\n\nexport const getFaceVideoStream = async (deviceId?: string) => {\n  const constraints = {\n    video: {\n      deviceId,\n      frameRate: { max: 5 },\n      width: { exact: 72 },\n      height: { exact: 72 },\n    },\n  };\n  const stream = await navigator.mediaDevices.getUserMedia(constraints);\n  const [track] = stream.getVideoTracks();\n  const dispose = () => {\n    track.stop();\n  };\n  return {\n    stream,\n    dispose,\n  };\n};\n","import { proxy, snapshot, ref } from \"valtio\";\nimport * as Y from \"yjs\";\nimport { bindProxyAndYMap } from \"valtio-yjs\";\n\nimport { PeerInfo, createRoom, NetworkStatus } from \"../network/room\";\nimport { encodeBase64Async, decodeBase64Async } from \"../utils/base64\";\n\ntype RoomState = {\n  networkStatusList: NetworkStatus[];\n  userIdList: { userId: string; peerIndex: number | \"closed\" }[];\n  faceImages: { [userId: string]: unknown };\n  gatherAvatarMap: { [userId: string]: unknown };\n  gatherRegionMap: { [regionId: string]: unknown };\n  extraDataListMap: { [id: string]: unknown[] };\n  acceptingMediaTypes: string[];\n  trackMap: {\n    [mediaType: string]: {\n      [userId: string]: MediaStreamTrack;\n    };\n  };\n  addMediaType: (type: string) => Promise<void>;\n  removeMediaType: (type: string) => Promise<void>;\n  addTrack: (type: string, track: MediaStreamTrack) => Promise<void>;\n  removeTrack: (type: string) => Promise<void>;\n  dispose: () => Promise<void>;\n};\n\nconst createRoomState = (roomId: string, userId: string) => {\n  const addMediaType = async (type: string) => {\n    if (state.acceptingMediaTypes.includes(type)) {\n      console.log(\"media type already added\", type);\n      return;\n    }\n    state.acceptingMediaTypes.push(type);\n    const room = await roomPromise;\n    room.acceptMediaTypes(snapshot(state.acceptingMediaTypes));\n  };\n  const removeMediaType = async (type: string) => {\n    const index = state.acceptingMediaTypes.indexOf(type);\n    if (index === -1) {\n      console.log(\"media type already added\", type);\n      return;\n    }\n    state.acceptingMediaTypes.splice(index, 1);\n    const room = await roomPromise;\n    room.acceptMediaTypes(snapshot(state.acceptingMediaTypes));\n  };\n  const addTrack = async (type: string, track: MediaStreamTrack) => {\n    const room = await roomPromise;\n    room.addTrack(type, track);\n  };\n  const removeTrack = async (type: string) => {\n    const room = await roomPromise;\n    room.removeTrack(type);\n  };\n  const dispose = async () => {\n    const room = await roomPromise;\n    room.dispose();\n  };\n  const state = proxy<RoomState>({\n    networkStatusList: [],\n    userIdList: [],\n    faceImages: {},\n    gatherAvatarMap: {},\n    gatherRegionMap: {},\n    extraDataListMap: {},\n    acceptingMediaTypes: [],\n    trackMap: {},\n    addMediaType,\n    removeMediaType,\n    addTrack,\n    removeTrack,\n    dispose,\n  });\n  const ydoc = new Y.Doc();\n  bindProxyAndYMap(state.faceImages, ydoc.getMap(\"faceImages\"));\n  bindProxyAndYMap(state.gatherAvatarMap, ydoc.getMap(\"gatherAvatarMap\"));\n  bindProxyAndYMap(state.gatherRegionMap, ydoc.getMap(\"gatherRegionMap\"));\n  bindProxyAndYMap(state.extraDataListMap, ydoc.getMap(\"extraDataListMap\"));\n  const updateNetworkStatus = (status: NetworkStatus) => {\n    console.log(new Date().toLocaleString(), \"[network status]\", status);\n    state.networkStatusList.unshift(status);\n    if (state.networkStatusList.length > 10) {\n      state.networkStatusList.pop();\n    }\n    if (status?.type === \"CONNECTION_CLOSED\") {\n      state.userIdList.forEach((item) => {\n        if (item.peerIndex === status.peerIndex) {\n          item.peerIndex = \"closed\";\n          // FIXME somehow this might be causing fatal behavior\n          // state.userIdMap.splice(index, index);\n        }\n      });\n    }\n  };\n  const notifyNewPeer = async (peerIndex: number) => {\n    const update = Y.encodeStateAsUpdate(ydoc);\n    const base64 = await encodeBase64Async(update);\n    const data = { ydocUpdate: base64 };\n    roomPromise.then((room) => {\n      // XXX this does not scale\n      room.sendData(data, peerIndex);\n    });\n  };\n  const receiveData = async (data: any, info: PeerInfo) => {\n    const found = state.userIdList.find((item) => item.userId === info.userId);\n    if (found) {\n      found.peerIndex = info.peerIndex;\n    } else {\n      state.userIdList.push({\n        userId: info.userId,\n        peerIndex: info.peerIndex,\n      });\n    }\n    if (data?.ydocUpdate) {\n      const update = await decodeBase64Async(data.ydocUpdate);\n      Y.applyUpdate(ydoc, update);\n    }\n  };\n  ydoc.on(\"update\", async (update: Uint8Array) => {\n    const base64 = await encodeBase64Async(update);\n    roomPromise.then((room) => {\n      room.broadcastData({ ydocUpdate: base64 });\n    });\n  });\n  const receiveTrack = (\n    mediaType: string,\n    track: MediaStreamTrack,\n    info: PeerInfo\n  ) => {\n    if (!state.trackMap[mediaType]) {\n      state.trackMap[mediaType] = {};\n    }\n    track.addEventListener(\"ended\", () => {\n      if (state.trackMap[mediaType][info.userId] === track) {\n        delete state.trackMap[mediaType][info.userId];\n      }\n    });\n    state.trackMap[mediaType][info.userId] = ref(track);\n  };\n  const roomPromise = createRoom(\n    roomId,\n    userId,\n    updateNetworkStatus,\n    notifyNewPeer,\n    receiveData,\n    receiveTrack\n  );\n  return state;\n};\n\nconst roomMap = new Map<string, RoomState>();\n\nexport const getRoomState = (roomId: string, userId: string) => {\n  const key = `${roomId}:${userId}`;\n  if (!roomMap.has(key)) {\n    const state = createRoomState(roomId, userId);\n    roomMap.set(key, state);\n  }\n  return roomMap.get(key) as RoomState;\n};\n\nexport const disposeRoomState = (roomId: string, userId: string) => {\n  const key = `${roomId}:${userId}`;\n  const state = roomMap.get(key);\n  if (state) {\n    roomMap.delete(key);\n    state.dispose();\n  }\n};\n","import { hasPeerJsConfigInUrl, hasPubsubConfigInUrl } from \"../utils/url\";\nimport type { CreateRoom } from \"./common\";\n\nexport type { NetworkStatus, PeerInfo } from \"./common\";\nexport { ROOM_ID_PREFIX_LEN } from \"./common\";\n\nexport const createRoom: CreateRoom = async (...args) => {\n  let createRoomImpl: CreateRoom;\n  if (hasPeerJsConfigInUrl()) {\n    createRoomImpl = (await import(\"./peerjsRoom\")).createRoom;\n  } else if (hasPubsubConfigInUrl()) {\n    createRoomImpl = (await import(\"./pubsubRoom\")).createRoom;\n  } else {\n    createRoomImpl = (await import(\"./ipfsRoom\")).createRoom;\n  }\n  return createRoomImpl(...args);\n};\n","export const encodeBase64Sync = (data: Uint8Array) => {\n  const base64 = btoa(String.fromCharCode(...data));\n  return base64;\n};\n\nexport const decodeBase64Sync = (base64: string) => {\n  const binaryString = atob(base64);\n  const data = new Uint8Array(\n    [].map.call(binaryString, (c: string) =>\n      c.charCodeAt(0)\n    ) as unknown as ArrayBufferLike\n  );\n  return data;\n};\n\nexport const encodeBase64Async = (data: Uint8Array) =>\n  new Promise<string>((resolve) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      const result = reader.result as string;\n      const offset = result.indexOf(\",\") + 1;\n      resolve(result.slice(offset));\n    };\n    reader.readAsDataURL(new Blob([data]));\n  });\n\nexport const decodeBase64Async = async (base64: string) => {\n  const response = await fetch(\n    `data:application/octet-binary;base64,${base64}`\n  );\n  const buf = await response.arrayBuffer();\n  return new Uint8Array(buf);\n};\n","import { ComponentType } from \"react\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { BaseEmoji, Picker, getEmojiDataFromNative, Data } from \"emoji-mart\";\nimport data from \"emoji-mart/data/all.json\";\n\nexport { Emoji } from \"emoji-mart\";\nexport type EmojiDataType = BaseEmoji;\n\n// we do not support custom emojis\nexport const EmojiPicker = Picker as ComponentType<\n  | Omit<Picker, \"custom\" | \"onSelect\">\n  | {\n      onSelect: (emoji: BaseEmoji) => void;\n      style: unknown;\n    }\n>;\n\nexport const isEmoji = (s: string) => {\n  const emojiData: BaseEmoji | null = getEmojiDataFromNative(\n    s,\n    \"apple\",\n    data as unknown as Data\n  );\n  return !!emojiData;\n};\n","export const sleep = (ms: number) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n","export const isObject = (x: unknown): x is Record<string, unknown> =>\n  typeof x === \"object\" && x !== null;\n\nexport const hasStringProp = <\n  Obj extends Record<string, unknown>,\n  Prop extends string\n>(\n  x: Obj,\n  prop: Prop\n): x is Obj & Record<Prop, string> =>\n  typeof (x as Record<Prop, unknown>)[prop] === \"string\";\n\nexport const hasObjectProp = <\n  Obj extends Record<string, unknown>,\n  Prop extends string\n>(\n  x: Obj,\n  prop: Prop\n): x is Obj & Record<Prop, Record<string, unknown>> =>\n  isObject((x as Record<Prop, unknown>)[prop]);\n\nexport type ReturnPromiseType<F extends (...args: any) => any> =\n  ReturnType<F> extends Promise<infer T> ? T : never;\n"],"names":["createMeeting","i","x","y","w","h","type","position","size","zIndex","background","border","iframe","createGoBoard","roomPresets","intro","chat","share","phone","share1","share2","share3","igo","office1","go","go2","office2","office3","movable","office4","movie","BeachChair","BeachChair2","ChairA","ChairB","ChairC","Digda","Kintone","BlockA","BlockB","BlockC","BlockD","isRegionData","obj","includes","e","captureImage","async","stream","track","ImageCapture","imageCapture","srcImg","sleep","blob","takePhoto","createImageBitmap","grabFrame","srcW","width","srcH","height","video","document","createElement","autoplay","setAttribute","style","display","bottom","body","appendChild","srcObject","videoWidth","videoHeight","dispose","removeChild","preferenceState","proxy","isImageData","isObject","image","nickname","message","liveMode","micOn","speakerOn","isFaceInfo","info","updated","TTL","myImageCache","takePhotoWithCache","deviceId","photoSize","now","Date","createdAt","promiseUrl","constraints","navigator","mediaDevices","getUserMedia","getVideoTracks","canvas","ctx","getContext","dstW","dstH","ratio","Math","max","min","drawImage","stop","toDataURL","useFaceImages","roomId","userId","avatar","statusMesg","suspended","roomState","getRoomState","userIdList","faceImages","useSnapshot","tenMinAgo","roomImages","forEach","data","push","myImage","setMyImage","useState","useEffect","timer","didCleanup","loop","console","error","setTimeout","clearTimeout","useFaceImageObsoleted","obsoleted","setObsoleted","callback","twoMinAgo","setInterval","clearInterval","addTrackToStream","disposeStream","newStream","MediaStream","addTrack","dispatchEvent","MediaStreamTrackEvent","addEventListener","removeTrack","getTracks","length","useFaceVideos","videoEnabled","audioEnabled","videoDeviceId","audioDeviceId","uniqueMediaId","videoType","audioType","faceStream","setFaceStream","faceStreamMap","setFaceStreamMap","isMounted","useRef","current","onTrack","uid","readyState","s","prev","oldStream","rest","trackMap","Object","entries","cleanup","videoStream","disposeVideo","getFaceVideoStream","videoTrack","addMediaType","removeMediaType","Event","audioStream","disposeAudio","audio","getAudioTracks","applyConstraints","echoCancellation","echoCancellationType","ideal","noiseSuppression","getAudioStream","audioTrack","enabled","onaddtrack","event","kind","removeEventListener","RegionEditor","memo","regionId","setRegionId","setType","left","setLeft","top","setTop","setWidth","setHeight","allRegionData","setAllRegionData","className","value","onChange","target","Number","onClick","gatherRegionMap","disabled","JSON","stringify","parse","key","log","MySetting","toggleSuspended","setStatusMesg","setMessage","camera","setCamera","lowResPhoto","setLowResPhoto","setAvatar","checked","accept","files","file","window","alert","reader","FileReader","onload","result","readAsDataURL","onChangeAvatar","defaultValue","undefined","setConfigAvatar","LinkOpener","excalidrawUrl","setExcalidrawUrl","id","slice","imported","importCryptoKey","ROOM_ID_PREFIX_LEN","crypto","subtle","exportKey","k","generateExcalidrawURL","appLink","location","href","replace","title","readOnly","rel","Loading","FaceCard","inFaceList","muted","updatedDate","firstStatusMesgChar","emoji","String","fromCodePoint","isEmoji","opacity","cursor","mesg","prompt","ref","videoEle","autoPlay","playsInline","src","BLANK_IMAGE","alt","toLocaleString","getHours","padStart","getMinutes","FaceList","map","item","some","peerIndex","NG_IMAGE","MomentaryChat","lazy","MediaShare","GoBoard","getMicOn","regionMap","Region","boxShadow","highlight","updateRegion","registerOnMouseDrag","isSelected","setSelectedRegionId","onMouseDown","metaKey","ctrlKey","preventDefault","stopPropagation","currentTarget","offset","clientX","parseInt","clientY","frameBorder","Suspense","fallback","SuspenseFallback","uniqueId","confirm","parentNode","scrollLeft","scrollTop","rand4","Avatar","setPosition","GatherArea","avatarMap","myAvatar","setMyAvatar","gatherAvatarMap","isAvatarData","dataToBroadcast","roomPreset","getRoomPresetFromUrl","preset","keys","timerMap","useCallback","found","useGatherArea","selectedRegionId","onMouseDragRef","onMouseMove","activeMeetingRegionId","sort","a","b","find","getActiveMeetingRegionId","activeMeetingMicOn","showModal","setShowModal","handlePasteOrDrop","text","clipboardData","dataTransfer","getData","clientWidth","clientHeight","test","match","exec","html","encodeBase64Async","TextEncoder","encode","onDragOver","onDrop","onPaste","onMouseUp","regionData","avatarData","imageData","SingleRoom","config","singleRoomState","setRoomIdToUrl","inactive","setInactive","Error","lastTime","toggleConfigTakePhoto","getVideoStream","frameRate","exact","createRoomState","state","networkStatusList","extraDataListMap","acceptingMediaTypes","roomPromise","acceptMediaTypes","snapshot","index","indexOf","splice","ydoc","Y","bindProxyAndYMap","getMap","on","base64","update","then","room","broadcastData","ydocUpdate","createRoomImpl","hasPeerJsConfigInUrl","createRoom","hasPubsubConfigInUrl","status","unshift","pop","sendData","decodeBase64Async","mediaType","roomMap","Map","has","set","get","Promise","resolve","Blob","response","fetch","buf","arrayBuffer","Uint8Array","EmojiPicker","Picker","getEmojiDataFromNative","ms","hasStringProp","prop","hasObjectProp"],"sourceRoot":""}